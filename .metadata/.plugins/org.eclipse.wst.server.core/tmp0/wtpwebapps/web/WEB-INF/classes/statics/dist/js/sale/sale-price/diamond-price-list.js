"use strict";new Vue({el:"#diamond-price-list",data:function(){return{openName:"",openTime:"",showUpload:!1,file:"",uploadDataList:{},diamondList:[]}},methods:{importExcel:function(){this.showUpload=!this.showUpload},modalOk:function(){this.diamondList=this.uploadDataList},modalCancel:function(){},handleSuccess:function(t,n){"100100"==t.code?(this.$Modal.success({title:"提示",content:"上传成功!"}),this.uploadDataList=t.data):(this.$Modal.warning({title:"提示",content:"上传失败!"}),this.uploadDataList=this.diamondList)},handleFormatError:function(t){this.$Modal.warning({title:"提示",content:"文件格式错误，请选择.xlsx文件"})},handleMaxSize:function(t){this.$Modal.warning({title:"提示",content:"文件过大，请选择小于5M文件"})},handleBeforeUpload:function(){},exportTemplate:function(){var t=contextPath+"/excle/getExcelModel?excelModelName=国际钻石价目表模板.xlsx";window.location.href=t},save:function(){var n=this;if(0===n.diamondList.length)return n.$Modal.warning({title:"提示",content:"请先引入数据在进行保存!"}),!1;$.ajax({type:"POST",url:contextPath+"/saleWorldDiamondPriceController/saveBatch",contentType:"application/json;charset=utf-8",data:JSON.stringify(n.diamondList),dataType:"json",success:function(t){console.log(t),"100100"===t.code?n.$Modal.success({title:"提示",content:"保存成功!"}):n.$Modal.warning({title:"提示",content:"保存失败!"})},error:function(t){n.$Modal.warning({title:"提示",content:"服务器出错!"})}})},cancel:function(){window.parent.closeCurrentTab({name:this.openName,exit:!0,openTime:this.openTime})},getData:function(){var n=this;$.ajax({type:"POST",url:contextPath+"/saleWorldDiamondPriceController/list",contentType:"application/json;charset=utf-8",dataType:"json",success:function(t){console.log(t),n.diamondList=t.data},error:function(t){n.$Modal.warning({title:"提示",content:"服务器出错!"})}})}},mounted:function(){this.openTime=window.parent.params.openTime,this.openName=window.parent.params.openName,this.getData()}});