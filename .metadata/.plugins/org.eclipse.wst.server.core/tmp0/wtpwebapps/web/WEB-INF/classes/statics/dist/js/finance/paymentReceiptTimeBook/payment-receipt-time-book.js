"use strict";new Vue({el:"#paymentReceiptTimeBook",data:function(){return{isInit:!0,showFilter:!1,subjectVisable:!1,visible_filter:!1,id:"",auditStatus:"",confirmConfig:{showConfirm:!1,title:"提示",content:"这是内容",onlySure:!0,success:!0},filterBody:{timeStart:"",timeEnd:"",dateScore:"",auditStatus:"",isVoucher:"",documentNumber:""},detailDate:[{label:"今天",value:"today"},{label:"昨天",value:"yesterday"},{label:"近7天",value:"interval7"},{label:"近30天",value:"interval30"},{label:"本月",value:"thisMon"},{label:"上月",value:"lastMon"},{label:"本季度",value:"thisQuarter"},{label:"上季度",value:"lastQuarter"},{label:"本年",value:"thisYear"},{label:"去年",value:"lastYear"}],auditStatusList:[{label:"未审核",value:1},{label:"已审核",value:2}],isVoucherList:[{label:"未记账",value:1},{label:"已记账",value:2}]}},methods:{sortData:function(t,e,n,i){var a="";return t.map(function(t,e){"number"==typeof t&&(t=accounting.formatMoney(t,"",2)),a+="<div class='sumCol'>"+t+"</div>"}),a},getColSum:function(t){var e=$("td[aria-describedby='list_"+t+"']"),n=0;return(e=0!==e.children("div.sumCol").length?$("td[aria-describedby='list_"+t+"']").children("div.sumCol"):$("td[aria-describedby='list_"+t+"']:not(:last)")).each(function(t,e){n+=1e3*accounting.unformat($(e).text())}),n/=1e3,n=accounting.formatMoney(n,"",2)},pageInit:function(){var a=this;jQuery("#list").jqGrid({url:"./bookData2.json",datatype:"json",colNames:["审核标志","日期","单据号","源单编号","结算账号","折扣科目","折后金额","折后金额本位币","凭证字号","整单折扣","币别","汇率","表头收(付)款金额","表头收(付)款金额本位币","收(付款)款类型","单据日期","单据金额","单据金额本位币","已核销金额","未核销金额","本次核销","本次核销本位币","发票币别","表体汇率","摘要","部门","主管","客户(供应商)","业务员","制单人","审核人","审核日期","打印次数","备注"],colModel:[{name:"paymentReceiptEntity.auditMark",width:70,formatter:function(t,e,n,i){return 2===t?"Y":""}},{name:"paymentReceiptEntity.orderDate",index:"orderDate",sortable:!0,sortorder:"asc",width:90,formatter:function(t,e,n,i){return t.slice(0,10)}},{name:"paymentReceiptEntity.documentNumber",width:80,align:"left"},{name:"financeSourceSingleDataEntities",width:100,align:"left",formatter:function(t,e,n,i){var a="";return n.financeSourceSingleDataEntities.map(function(t,e){a+=t.sourceListNumber+"<br>"}),a}},{name:"paymentReceiptEntity.clearanceAccount",width:80,align:"left"},{name:"paymentReceiptEntity.discountSubject",width:80,align:"right"},{name:"paymentReceiptEntity.reducedAmountFor",width:80,align:"right",formatter:function(t,e,n,i){return accounting.formatMoney(t,"",2)}},{name:"paymentReceiptEntity.reducedAmount",width:120,align:"right",formatter:function(t,e,n,i){return accounting.formatMoney(t,"",2)}},{name:"paymentReceiptEntity.voucherSize",width:80,align:"left"},{name:"paymentReceiptEntity.bulkDiscount",width:80,align:"right"},{name:"paymentReceiptEntity.coinStop",width:80,align:"left"},{name:"paymentReceiptEntity.exchangeRate",width:50,align:"right"},{name:"paymentReceiptEntity.watchPaymentFor",width:120,align:"right",formatter:function(t,e,n,i){return accounting.formatMoney(t,"",2)}},{name:"paymentReceiptEntity.watchPayment",width:150,align:"right",formatter:function(t,e,n,i){return accounting.formatMoney(t,"",2)}},{name:"paymentReceiptEntity.typePaymentReceived",index:"typePaymentReceived",width:120,align:"right"},{name:"financeSourceSingleDataEntities",width:80,align:"right",formatter:function(t,e,n,i){var a="";return n.financeSourceSingleDataEntities.map(function(t,e){a+=t.documentDate+"<br>"}),a}},{name:"paymentReceiptEntity.documentaryAmountForList",width:80,align:"right",formatter:function(t,e,n,i){return a.sortData(t,e,n,i)}},{name:"paymentReceiptEntity.documentaryAmountList",width:100,align:"right",formatter:function(t,e,n,i){return a.sortData(t,e,n,i)}},{name:"paymentReceiptEntity.cancellationAmountList",width:100,align:"right",formatter:function(t,e,n,i){return a.sortData(t,e,n,i)}},{name:"paymentReceiptEntity.notCancellationAmountList",width:100,align:"right",formatter:function(t,e,n,i){return a.sortData(t,e,n,i)}},{name:"paymentReceiptEntity.thisTiemCancellationForList",width:100,align:"right",formatter:function(t,e,n,i){return a.sortData(t,e,n,i)}},{name:"paymentReceiptEntity.thisTiemCancellationList",width:100,align:"right",formatter:function(t,e,n,i){return a.sortData(t,e,n,i)}},{name:"financeSourceSingleDataEntities",width:100,align:"right",formatter:function(t,e,n,i){var a="";return n.financeSourceSingleDataEntities.map(function(t,e){a+=t.invoiceCoinType+"<br>"}),a}},{name:"financeSourceSingleDataEntities",width:100,align:"right",formatter:function(t,e,n,i){var a="";return n.financeSourceSingleDataEntities.map(function(t,e){a+=t.surfaceExchangeRate+"<br>"}),a}},{name:"paymentReceiptEntity.summary",width:80,align:"right"},{name:"paymentReceiptEntity.department",width:80,align:"right"},{name:"paymentReceiptEntity.director",width:80,align:"right"},{name:"paymentReceiptEntity.occurrenceObject",width:80,align:"right"},{name:"paymentReceiptEntity.salesman",width:80,align:"right"},{name:"paymentReceiptEntity.singlePerson",width:80,align:"right"},{name:"paymentReceiptEntity.auditorName",width:80,align:"right"},{name:"paymentReceiptEntity.auditDate",width:80,align:"right"},{name:"paymentReceiptEntity.printingTimes",width:80,align:"right"},{name:"financeSourceSingleDataEntities",width:100,align:"right",formatter:function(t,e,n,i){var a="";return n.financeSourceSingleDataEntities.map(function(t,e){a+=t.remark+"<br>"}),a}}],rowNum:999999999,sortorder:"desc",mtype:"post",jsonReader:{root:"data"},styleUI:"Bootstrap",height:.7*$(window).height(),viewrecords:!0,caption:"收款单序时簿",footerrow:!0,userDataOnFooter:!0,gridComplete:a.completeMethod,onCellSelect:function(t){var e=jQuery("#list").jqGrid("getRowData",t);console.log(e),console.log(e["paymentReceiptEntity.orderDate"])},ondblClickRow:function(t){console.log(7574777579757)}})},completeMethod:function(){$("#list").footerData("set",{"paymentReceiptEntity.orderDate":"合计","paymentReceiptEntity.documentaryAmountForList":[0],"paymentReceiptEntity.documentaryAmountList":[0],"paymentReceiptEntity.cancellationAmountList":[0],"paymentReceiptEntity.notCancellationAmountList":[0],"paymentReceiptEntity.thisTiemCancellationForList":[0],"paymentReceiptEntity.thisTiemCancellationList":[0]});var t=this.getColSum("paymentReceiptEntity.reducedAmountFor"),e=this.getColSum("paymentReceiptEntity.reducedAmount"),n=this.getColSum("paymentReceiptEntity.watchPaymentFor"),i=this.getColSum("paymentReceiptEntity.watchPayment"),a=this.getColSum("paymentReceiptEntity.documentaryAmountForList"),o=this.getColSum("paymentReceiptEntity.documentaryAmountList"),r=this.getColSum("paymentReceiptEntity.cancellationAmountList"),c=this.getColSum("paymentReceiptEntity.notCancellationAmountList"),l=this.getColSum("paymentReceiptEntity.thisTiemCancellationForList"),m=this.getColSum("paymentReceiptEntity.thisTiemCancellationList");$("#list").footerData("set",{"paymentReceiptEntity.orderDate":"合计","paymentReceiptEntity.reducedAmountFor":t,"paymentReceiptEntity.reducedAmount":e,"paymentReceiptEntity.watchPayment":i,"paymentReceiptEntity.watchPaymentFor":n,"paymentReceiptEntity.documentaryAmountForList":[a],"paymentReceiptEntity.documentaryAmountList":[o],"paymentReceiptEntity.cancellationAmountList":[r],"paymentReceiptEntity.notCancellationAmountList":[c],"paymentReceiptEntity.thisTiemCancellationForList":[l],"paymentReceiptEntity.thisTiemCancellationList":[m]})},handleOpen:function(){this.visible_filter=!0},detailClick:function(t){},iconPopup:function(t){this.subjectVisable=!0},subjectClose:function(){this.subjectVisable=!1},conformCancel:function(){this.confirmConfig.showConfirm=!1},conformSure:function(){this.confirmConfig.showConfirm=!1,this.confirmConfig.onlySure=!this.confirmConfig.onlySure},subjectDate:function(t){},sure:function(t){console.log(this.filterBody),this.visible_filter=!1},addRow:function(){console.log("add")},delRow:function(){console.log("del"),""!==this.id&&(this.confirmConfig={showConfirm:!0,title:"提示",content:"确认删除这条数据",onlySure:!1,success:!0})},copyRow:function(){console.log("复制")},review:function(){console.log("审核"),console.log(this.auditStatus),""===this.auditStatus&&(this.confirmConfig={showConfirm:!0,title:"提示",content:"该数据不能审核",onlySure:!0,success:!0})},reReview:function(){console.log("反审核")},derivation:function(){console.log("引出")},print:function(){console.log("打印")},voucher:function(){console.log("凭证1111111")}},mounted:function(){this.pageInit()}});