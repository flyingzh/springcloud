"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var vm=new Vue({el:"#customer-order-wait-list",data:function(){var e,o=this;return{isHideSearch:!0,isHideList:!0,selected:[],categoryType:[],commodityCategoty:[],goldPriceList:[],wareHouseList:[],areaInit:[],openTime:"",reload:!1,addBody:(e={id:"",outStockNo:"",outStockTime:"",goodsType:"",goodsMainType:"",organizationId:"",status:1,businessType:"",shipMethod:"",saleMenId:"",saleMenName:"",remark:"",operationFlag:"",saleCustInfoEntity:{custNo:"",email:"",area:"",name:"",zipCode:"",detail:"",phone:"",weChartNo:""},pricingMethod:"",totalCost:"",totalSaleAmount:"",totalActualAmount:"",goldAmount:"",stoneAmount:"",accessoryAmount:"",totalLaborCost:"",totalCertificateAmount:"",totalOtherAmount:"",createId:""},_defineProperty(e,"createId",""),_defineProperty(e,"createName",""),_defineProperty(e,"createTime",""),_defineProperty(e,"updateId",""),_defineProperty(e,"updateName",""),_defineProperty(e,"updateTime",""),_defineProperty(e,"auditName",""),_defineProperty(e,"auditTime",""),_defineProperty(e,"goodList",[]),e),body:{saleOrderNo:"",goodsType:"",goodsCode:"",goodsName:""},businessStatusLabel:[{label:"待收定金",value:"10"}],saveReqList:[],data_config:{url:contextPath+"/tsaleoutstockwait/list",colNames:["源单类型","客户订单编号","客户","商品类型","质检状态","图片","商品编码","商品名称","计数单位","订单数量","待出库数量","发货检验合格数量","特殊放行数量","累计出库数量","交货日期","分录行号","客户编号","邮箱","所属区域","联系人","邮编","地址","联系方式","微信号","id","计价方式","客户id","库位id","仓库","主类型","分录行id","业务类型","金价","总重","计重id","计数id","计价","市","区","省","详细地址","条码id"],colModel:[{name:"documentType",index:"documentType",width:180,align:"left",sortable:!1,formatter:function(e,t,i,n){return"S_CUST_ORDER"==e?"客户订单":""}},{name:"saleOrderNo",index:"custNo",width:150,align:"left",formatter:function(e,t,i,n){return $(document).off("click",".detail"+e).on("click",".detail"+e,function(){o.detailClick({value:e,grid:t,rows:i,state:n})}),'<a class="detail'+e+'">'+e+"</a>"}},{name:"custName",index:"goodsType",width:180,align:"left",sortable:!1},{name:"goodsTypeName",index:"goodsTypeName",width:180,align:"left",sortable:!1},{name:"qualityInspectionStatus",index:"qualityInspectionStatus",width:150,align:"left",sortable:!1},{name:"pictureUrl",index:"pictureUrl",width:180,align:"left",formatter:function(e,t,i,n){return"<img height=40px width=40px src="+e+">"}},{name:"goodsCode",index:"goodsCode",width:180,sortable:!1,align:"left",formatter:function(e,t,i,n){return $(document).off("click",".detail"+e).on("click",".detail"+e,function(){o.commodityDetailClick(i)}),'<a class="detail'+e+'">'+e+"</a>"}},{name:"goodsName",index:"goodsName",width:180,sortable:!1,align:"left"},{name:"countingUnit",index:"countingUnit",width:180,sortable:!1,align:"left"},{name:"num",index:"num",width:180,sortable:!1,align:"left"},{name:"waitOutStockAmount",index:"waitOutStockAmount",width:180,sortable:!1,align:"left"},{name:"shipCheckPassNum",index:"shipCheckPassNum",width:180,sortable:!1,align:"left"},{name:"shipCheckReleaseNum",index:"shipCheckReleaseNum",width:180,sortable:!1,align:"left"},{name:"totalOutStockNum",index:"totalOutStockNum",width:180,sortable:!1,align:"left"},{name:"deliveryDate",index:"deliveryDate",width:180,sortable:!1,align:"left"},{name:"goodsLineNo",index:"goodsLineNo",width:180,sortable:!1,align:"left",hidden:!0},{name:"custNo",index:"custNo",width:180,sortable:!1,align:"left",hidden:!0},{name:"email",index:"email",width:180,sortable:!1,align:"left",hidden:!0},{name:"county",index:"county",width:180,sortable:!1,align:"left",hidden:!0},{name:"name",index:"name",width:180,sortable:!1,align:"left",hidden:!0},{name:"zipCode",index:"zipCode",width:180,sortable:!1,align:"left",hidden:!0},{name:"detail",index:"detail",width:180,sortable:!1,align:"left",hidden:!0},{name:"phone",index:"phone",width:180,sortable:!1,align:"left",hidden:!0},{name:"weChatNo",index:"weChatNo",width:180,sortable:!1,align:"left",hidden:!0},{name:"id",index:"id",width:180,sortable:!1,align:"left",hidden:!0},{name:"pricingMethod",index:"pricingMethod",width:180,sortable:!1,align:"left",hidden:!0},{name:"custId",index:"custId",width:180,sortable:!1,align:"left",hidden:!0},{name:"locationId",index:"locationId",width:180,sortable:!1,align:"left",hidden:!0},{name:"warehouseId",index:"warehouseId",width:180,sortable:!1,align:"left",hidden:!0},{name:"goodsMainType",index:"goodsMainType",width:180,sortable:!1,align:"left",hidden:!0},{name:"goodsLineNoId",index:"goodsLineNoId",width:180,sortable:!1,align:"left",hidden:!0},{name:"businessType",index:"businessType",width:180,sortable:!1,align:"left",hidden:!0},{name:"goldPrice",index:"goldPrice",width:180,sortable:!1,align:"left",hidden:!0},{name:"totalWeight",index:"totalWeight",width:180,sortable:!1,align:"left",hidden:!0},{name:"weightUnitId",index:"weightUnitId",width:180,sortable:!1,align:"left",hidden:!0},{name:"countingUnitId",index:"countingUnitId",width:180,sortable:!1,align:"left",hidden:!0},{name:"pricingUnitId",index:"pricingUnitId",width:180,sortable:!1,align:"left",hidden:!0},{name:"city",index:"city",width:180,sortable:!1,align:"left",hidden:!0},{name:"area",index:"area",width:180,sortable:!1,align:"left",hidden:!0},{name:"province",index:"province",width:180,sortable:!1,align:"left",hidden:!0},{name:"concreteAddress",index:"concreteAddress",width:180,sortable:!1,align:"left",hidden:!0},{name:"goodsId",index:"goodsId",width:180,sortable:!1,align:"left",hidden:!0}]}}},methods:{detailClick:function(e){console.log("这是跳转客户订单页面。。。"),console.log(e.value),window.parent.activeEvent({name:"新增客户订单",url:contextPath+"/sale/customer-order/customer-order-add.html",params:{type:"view",saleOrderNo:e.value}})},commodityDetailClick:function(e){console.log("这是跳转商品查看页面。。。"),console.log(e),window.parent.activeEvent({name:"商品",url:contextPath+"/base-data/commodity/commodity-info.html",params:{type:"skip",id:e.commodityId}})},initGoldPrice:function(e){var t=this;$.ajax({type:"post",url:contextPath+"/tbasetodygoldprice/queryPrice",data:{type:e},dataType:"json",success:function(e){t.goldPriceList=e.data},error:function(){t.$Message.warning("服务器报错")}})},initWareHoust:function(){var t=this;$.ajax({url:contextPath+"/wareHouse/listByTypeAndOrganizationId?type=1",type:"POST",dataType:"json",success:function(e){console.log(e),t.wareHouseList=e.data},error:function(e){t.$Modal.error({content:"系统出现异常,请联系管理人员"})}})},search:function(){this.reload=!this.reload},clear:function(){this.body={saleOrderNo:"",goodsType:"",goodsCode:"",goodsName:""}},exit:function(){window.parent.closeCurrentTab({exit:!0,openTime:this.openTime})},jump:function(e,t){this.initGoldPrice(1),this.initWareHoust();var i=this.selected[0];this.areaInit={isInit:!0,province:i.province,city:i.city,county:i.county,detail:i.concreteAddress,disabled:!1},Object.assign(e,{goldPriceList:this.goldPriceList},{wareHouseList:this.wareHouseList},{areaInit:this.areaInit}),window.parent.activeEvent({name:"销售出库单新增",url:contextPath+"/sale/saleoutstock/saleoutstock-add.html",params:{type:t,data:e}})},save:function(){console.log("进保存了。。。");var t=this,e=t.selected;if(0!=e.length){if(0<e.length)for(var i in e){if(e[0].custId!=e[i].custId){t.$Modal.warning({content:"请选择相同客户生成销售出库单！"});break}if(e[0].goodsType!=e[i].goodsType){t.$Modal.warning({content:"请选择相同商品类型生成销售出库单！"});break}}$.ajax({type:"POST",url:contextPath+"/tsaleoutstockwait/save",data:JSON.stringify(t.selected),contentType:"application/json",success:function(e){console.log(e),"100100"==e.code?(t.conversionData(e.data),vm.jump(e.data,"wait")):t.$Modal.warning({content:e.msg})},error:function(e){t.$Modal.error({content:"系统出现异常,请联系管理人员"})}})}else t.$Modal.warning({content:"请选择一条记录！"})},conversionData:function(e){e.map(function(e){var t=e.tSaleBarcodeGoodsEntityVoList;0<t.length&&t.map(function(e){var t={countingUnitId:e.countingUnitId,goodsNo:e.goodsNo,goodsName:e.goodsName,batchNum:e.batchNum,countingUnitName:e.countingUnitName,num:"1",weightUnitName:e.weightUnitName,totalWeight:e.totalWeight,netGoldWeight:e.netGoldWeight,mainStoneWeight:e.mainStoneWeight,certificateNo:e.certificateNo,certificateType:e.certificateType,purchaseCost:e.purchaseCost};e.goodsEntity=t})})},refresh:function(){console.log("进刷新了。。。"),this.reload=!this.reload},loadProductType:function(){var t=this;$.ajax({type:"post",url:contextPath+"/documentController/getCategory?parentId=0",contentType:"application/json",dataType:"json",success:function(e){t.categoryType=t.initGoodCategory(e.data.cateLists)},error:function(e){console.log("服务器出错")}})},initGoodCategory:function(e){var o=this,a=[];return e.forEach(function(e){var t=e.customCode,i=e.name,n=e.cateLists;n&&(n=o.initGoodCategory(n)),a.push({value:t,label:i,children:n})}),a.forEach(function(e){e.children||delete e.children}),a},changeCategory:function(e){console.log(e),this.body.goodsType=e[e.length-1]}},created:function(){this.loadProductType()},mounted:function(){this.openTime=window.parent.params.openTime}});