"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _defineProperty(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var returnReport=new Vue({el:"#returnReport",data:function(){var t;return _defineProperty(t={productDetailModal:{showModal:!1,dataSourceType:!1,dataSource:null,ids:{goodsId:"",commodityId:"",documentType:"P_APPLY_ORDER"},specialAttr:{stone:{},gold:{},part:{}}},openTime:"",isHint:!0,isSearchHide:!0,isTabulationHide:!0,isHide:!0,selected:[],needReload:!1,categoryType:[],commodityCategoty:[],employees:{},commodityList:[],barCodeTab:!1,isGoodsBarcode:!1,isCleanStore:!0,returnGoods:{id:"",orderNo:"",orderStatus:1,businessType:"",supplierId:"",supplierName:"",supplierCode:"",goodsTypeName:"",goodsTypePath:"",returnWeight:0,returnCount:0,dataSource:"",returnDate:null,businessStatus:"",salesman:"",organizationId:"",orgName:"",logisticsMode:"",goodList:[],delGoodsDetails:[]},params:{},unitMap:{},productDetailList:[{goodsEntities:[]}],productDetailListTemp:{goodsEntities:[]},selectedIndex:0,selectSupplier:"",showSupplier:!1,storageList:[],wareHouse:[],modalTrigger:!1,productTypeList:[],modalType:"",steplist:[],approvalTableData:[],boeType:"P_RETURN_STOCK",tabVal:"name1",selectedIndex1:0,selectTab:!0,showAll:!1,showBody:!1,showProductType:!1,showProduct:!1,selectLogisticMode:[]},"productDetailModal",{showModal:!1,ids:{goodsId:"",commodityId:"",documentType:"W_STOCK_IN"}}),_defineProperty(t,"productDetailModal2",{showModal:!1,ids:{goodsId:"",commodityId:"",documentType:"W_STOCK_IN"}}),_defineProperty(t,"locationMap",[]),_defineProperty(t,"options",[]),t},created:function(){this.loadProductType(),this.loadWarehouses(),this.loadData(),this.loadProductType(),this.loadPosition(),this.initUnit(),this.getLogisticMode()},methods:{typeInit:function(t,o,e){for(var i=0;i<t.length;i++){if(t[i].value==e)return o.push(t[i].value),!0;if(t[i].children&&0<t[i].children.length&&this.typeInit(t[i].children,o,e))return o.push(t[i].value),!0}},loadPosition:function(){var e=this;$.ajax({url:contextPath+"/tpurchasecollectgoods/findByAllPosition",method:"POST",dataType:"json",contentType:"application/json;charset=utf-8",success:function(t){if("100100"==t.code){var o={};t.data.map(function(t){null==o[t.groupId]&&(o[t.groupId]=[]),o[t.groupId].push(t)}),e.locationMap=o}}})},isEdit:function(t,o){eventHub.$emit("isEdit",t)},saveAccess:function(t,o,e){eventHub.$emit("saveFile",t,o)},getAccess:function(t,o,e){eventHub.$emit("queryFile",t,o)},approvalOrRejectCallBack:function(t){var o=this;if("100515"==t.result.code&&("approve"==o.modalType&&o.ajaxUpdateDocStatusById(o.returnGoods.id,4),"reject"==o.modalType&&o.ajaxUpdateDocStatusById(o.returnGoods.id,1)),"100100"==t.result.code){var e=t.result.data;this.returnGoods.orderStatus=e.orderStatus,this.returnGoods.auditor=e.auditor,this.returnGoods.auditorId=e.auditorId,this.returnGoods.auditTime=e.auditTime,1!=this.returnGoods.orderStatus&&(this.isEdit("N"),this.isCleanStore=!1)}},openSupplier:function(){1==this.returnGoods.orderStatus&&(this.showSupplier=!0)},closeSupplier:function(){this.showSupplier=!1;this.returnGoods.supplierId=this.selectSupplier.id,this.returnGoods.supplierName=this.selectSupplier.supplierName},loadWarehouses:function(t){var o=this;$.ajax({type:"post",url:contextPath+"/rurchaseReturnGoods/queryByWarehouseInfo",dataType:"json",success:function(t){"100100"==t.code?o.wareHouse=t.data:layer.alert(t.msg,{icon:0})},error:function(){layer.alert("服务器异常，请稍后再试！",{icon:0})}})},loadData:function(){var o=this;$.ajax({type:"post",url:contextPath+"/tpurchasecollectgoods/data",dataType:"json",success:function(t){o.employees=t.data.employees},error:function(){console.log("服务器出错啦")}})},initUnit:function(){var i=this;$.ajax({type:"post",url:contextPath+"/tbaseunit/list",contentType:"application/json",dataType:"json",async:!1,success:function(t){"100100"===t.code?(t.data.map(function(t){var o=t.id,e=t.name;i.unitMap[o]=e}),console.log(i.unitMap)):layer.alert("服务器异常,请联系技术人员！",{icon:0})},error:function(t){layer.alert("网络异常,请联系技术人员！",{icon:0})}})},changeEmp:function(t){this.returnGoods.salesmanId=t.value,this.returnGoods.salesmanName=t.label.substr(t.label.lastIndexOf("-")+1,t.label.length)},modalCancel:function(t){this.productDetailModal2.showModal=!1,this.productDetailModal.showModal=!1},getGoodsBarcodeValue:function(t,o){var e=this,i={goodsBarcode:t,commodityId:e.productDetailList[e.selectedIndex].commodityId,isInStock:1,nature:1,warehouseId:e.productDetailList[e.selectedIndex].warehouseId,limit:20};$.ajax({type:"post",url:contextPath+"/goodsController/queryGoodsDetail",data:JSON.stringify(i),contentType:"application/json",dataType:"json",success:function(t){"100100"===t.code&&(e.productDetailListTemp.goodsEntities[o].goodsEntity.options=t.data.map(function(t){return $.extend(!0,{},{code:t.goodsBarcode,name:t.goodsName,id:t.id})}),e.$forceUpdate())},error:function(){layer.alert("服务器出错啦")}})},initGoodsBarcodeValue:function(){var i=this,t={commodityId:i.productDetailList[i.selectedIndex].commodityId,isInStock:1,nature:1,warehouseId:i.productDetailList[i.selectedIndex].warehouseId,limit:20};$.ajax({type:"post",url:contextPath+"/goodsController/queryGoodsDetail",data:JSON.stringify(t),contentType:"application/json",dataType:"json",async:!1,success:function(t){if("100100"===t.code){for(var o=t.data.map(function(t){return $.extend(!0,{},{code:t.goodsBarcode,name:t.goodsName,id:t.id})}),e=0;e<i.productDetailList[i.selectedIndex].goodsEntities.length;e++)i.productDetailList[i.selectedIndex].goodsEntities[e].goodsEntity.options=o;i.$forceUpdate()}},error:function(){layer.alert("服务器出错啦")}})},showProductDetail:function(t){var o=this;if(this.selectedIndex=t,!this.productDetailListTemp.goodsEntities[t].goodsBarcodeId)return this.$Modal.error({content:"还未选择商品，请先选择商品，再选择明细！"}),!1;var e={goodsId:this.productDetailListTemp.goodsEntities[t].goodsBarcodeId,documentType:"W_STOCK_IN"};Object.assign(this.productDetailModal,{showModal:!0,ids:e}),this.$nextTick(function(){o.$refs.modalRef.getProductDetail()})},showProductDetail2:function(t){var o=this;if(this.selectedIndex=t,!this.productDetailList[t].commodityId)return this.$Modal.error({content:"还未选择商品，请先选择商品，再选择明细！"}),!1;var e={goodsId:2==this.returnGoods.dataSource?this.productDetailList[t].sourceOrderGoodsId:this.productDetailList[t].goodsId,commodityId:2==this.returnGoods.dataSource?"":this.productDetailList[t].commodityId,documentType:2==this.returnGoods.dataSource?"W_REQUISITION":"P_RETURN_STOCK"};Object.assign(this.productDetailModal2,{showModal:!0,ids:e}),this.$nextTick(function(){o.$refs.modalRef2.getProductDetail()})},modalSure:function(t){this.productDetailModalClick(t)},modalSure2:function(t){this.productDetailModalClick2(t)},productDetailModalClick:function(t){"attr_ranges_goods"===this.productDetailListTemp.goodsEntities[this.selectedIndex1].goodsEntity.goodsMainType?Object.assign(this.productDetailListTemp.goodsEntities[this.selectedIndex1].goodsEntity,{tBaseBomEntity:t,assistAttrs:null,overEdit:!0}):Object.assign(this.productDetailListTemp.goodsEntities[this.selectedIndex1].goodsEntity,{assistAttrs:t,tBaseBomEntity:null,overEdit:!0}),this.productDetailModal.showModal=!1},productDetailModalClick2:function(t){"attr_ranges_goods"===this.productDetailList[this.selectedIndex].goodsMainType?Object.assign(this.productDetailList[this.selectedIndex],{tBaseBomEntity:t,assistAttrs:null,overEdit:!0}):Object.assign(this.productDetailList[this.selectedIndex],{assistAttrs:t,tBaseBomEntity:null,overEdit:!0}),this.productDetailModal2.showModal=!1},handlerDataToPost:function(){var t={amount:"",returnCount:"",returnWeight:"",countingUnit:"",createTime:"",goldColor:"",goldWeight:"",goodsId:"",goodsMainType:"",goodsName:"",goodsCode:"",goodsTypeName:"",goodsTypePath:"",mainStoneWeight:"",orderNo:"",orderStatus:"",pictureUrl:"",price:"",pricingMethod:"",remark:null,warehouseId:"",reservoirPositionId:"",sourceOrderGoodsId:"",sourceOrderType:"",sourceOrderNo:"",sourceOrderId:"",orderId:"",goodsEntities:[],stoneClarity:null,stoneColor:null,stoneSection:null,updateId:null,updateName:null,updateTime:null,viceStoneWeight:null,weightUnit:"",goodsNorm:"",stonesParts:[],materialParts:[],partParts:[],goldParts:[]},e=this.returnGoods;return 0<this.productDetailList.length&&(e.goodList=[JSON.parse(JSON.stringify(t))]),htHandlerProductDetail(this.productDetailList,e,t),this.productDetailList.map(function(t,o){e.goodList[o]||(e.goodList[o]={}),Object.assign(e.goodList[o],{commodityId:t.commodityId,pictureUrl:t.pictureUrl,goodsCode:t.goodsCode,goodsName:t.goodsName,goodsMainType:t.goodsMainType,countingUnit:t.countingUnit,returnCount:t.returnCount,weightUnit:t.weightUnit,returnWeight:t.returnWeight,pricingMethod:t.pricingMethod,price:t.price,amount:t.amount,remark:t.remark,goodsId:t.goodsId,goodsTypeName:t.goodsTypeName,goodsTypePath:t.goodsTypePath,custStyleCode:t.custStyleCode,stoneSection:t.stoneSection,stoneClarity:t.stoneClarity,stoneColor:t.stoneColor,viceStoneWeight:t.viceStoneWeight,mainStoneWeight:t.mainStoneWeight,goldColor:t.goldColor,goldWeight:t.goldWeight,warehouseId:t.warehouseId,reservoirPositionId:t.reservoirPositionId,sourceOrderGoodsId:t.sourceOrderGoodsId,sourceOrderType:t.sourceOrderType,sourceOrderNo:t.sourceOrderNo,sourceOrderId:t.sourceOrderId,orderNo:t.orderNo,orderId:t.orderId,goodsNorm:t.goodsNorm,goodsEntities:t.goodsEntities})}),e},validateProduct:function(){var e=!0,i=this;return $.each(i.productDetailList,function(t,o){return!!o.goodsId||("attr_ranges_gold"!=o.goodsMainType||o.assistAttrs?void 0:(e=!1,i.$Modal.error({content:"第"+(t+1)+"行商品明细未选择，请先选择商品明细！"}),!1))}),e},getLogisticMode:function(){this.selectLogisticMode=getCodeList("jxc_jxc_wlfs")},detailAction:function(t){if(this.productDetailList[t].goodsCode)if(this.productDetailList[t].returnCount)if(this.productDetailList[t].warehouseId){this.selectedIndex=t,this.tabVal="name2","handworkAdd"!=this.params.activeType&&"generate"!=this.params.type&&"detail"!=this.params.type||(1==this.returnGoods.orderStatus&&0==this.productDetailList[this.selectedIndex].goodsEntities[0].goodsEntity.options.length&&this.initGoodsBarcodeValue(),this.productDetailListTemp=JSON.parse(JSON.stringify(this.productDetailList[t])))}else this.$Message.info("请先选择仓库！");else this.$Message.info("请先输入数量！");else this.$Message.info("请先选择商品编码！")},crolMark:function(t){this.tabVal=t},getGoodsItem:function(t,o){for(var e=this,i=0;i<e.productDetailListTemp.goodsEntities.length;i++)if(e.productDetailListTemp.goodsEntities[i].goodsEntity.goodsBarcode==t.code)return void e.$Modal.warning({content:"条码明细中已存在条码为【"+t.code+"】的条码信息！"});var s={id:t.id};$.ajax({type:"post",url:contextPath+"/goodsController/queryGoodsDetail",data:JSON.stringify(s),contentType:"application/json",dataType:"json",success:function(t){console.log("明细",t.data),"100100"===t.code&&(Object.assign(e.productDetailListTemp.goodsEntities[o],{goodsName:t.data[0].goodsName,goodsBarcode:t.data[0].goodsBarcode,goodsBarcodeId:t.data[0].id,goodsEntity:Object.assign({},t.data[0],{options:e.productDetailListTemp.goodsEntities[o].goodsEntity.options})}),e.productDetailList[e.selectedIndex].goodsEntities[o].goodsEntity=e.productDetailListTemp.goodsEntities[o].goodsEntity,e.$forceUpdate())},error:function(){layer.alert("服务器出错啦")}})},initGoodCategory:function(t){var r=this,n=[];return t.forEach(function(t){var o=t.customCode,e=t.name,i=t.cateLists,s=t.code;i&&(i=r.initGoodCategory(i)),n.push({value:o,label:e,children:i,code:s})}),n.forEach(function(t){t.children||delete t.children}),n},isHintShow:function(t){var o=this;t&&this.typeValue&&this.isHint&&this.productDetailList&&0<this.productDetailList.length&&this.$Modal.warning({content:"温馨提示：改变商品类型将删除所有商品信息!",onOk:function(){o.isHint=!1,console.log("温馨提示：改变商品类型将删除所有商品信息！")}})},getCommodityList:function(){var o=this,t={categoryCustomCode:o.returnGoods.goodsTypePath,field:"",limit:""};$.ajax({type:"post",url:contextPath+"/tbasecommodity/findByType",data:t,dataType:"json",success:function(t){if("100100"!=t.code)return this.$Modal.error({content:t.msg}),void(o.commodityList=[]);o.commodityList=t.data},error:function(){this.$Modal.error({content:"网络异常,请联系技术人员！"})}})},changeProductType:function(t,o){var e=this;if(t==this.typeValue)return!1;this.returnGoods.id&&this.productDetailList.map(function(t){t.goodsId&&e.returnGoods.delGoodsDetails.push(t.goodsId)}),this.productDetailList=[];var i=o[o.length-1];this.returnGoods.goodsTypeName=i.label,this.returnGoods.goodsTypePath=i.value,this.returnGoods.returnCount=0,this.returnGoods.returnWeight=0,this.getCommodityList()},getSelectedItem:function(t,e){var i=this;$.ajax({type:"post",url:contextPath+"/tbasecommodity/getBriefById/"+t.id,dataType:"json",success:function(t){i.order=t.data;var o=t.data;o.countUnitId=i.unitMap[o.countUnitId],o.weightUnitId=i.unitMap[o.weightUnitId],console.log(o),Object.assign(i.productDetailList[e],{goodsCode:o.code,goodsName:o.name,commodityId:o.id,pictureUrl:o.frontPic&&o.frontPic.fdUrl,goodsTypeName:o.categoryName,goodsTypePath:o.categoryCustomCode,goodsMainType:o.mainType,goodsNorm:o.specification,countingUnit:o.countUnitId,weightUnit:o.weightUnitId,pricingMethod:o.pricingType}),null!=i.productDetailList[e].goodsEntities&&null!=i.productDetailList[e].goodsEntities||(i.productDetailList[e].goodsEntities=[]),"attr_ranges_gold"===o.mainType&&(i.productDetailList[e].goldColor=o.certificateType,i.productDetailList[e].returnCount=null),i.$forceUpdate()},error:function(){layer.alert("服务器异常，请稍后再试！",{icon:0})}})},loadProductType:function(){var o=this;$.ajax({type:"post",url:contextPath+"/tbasecommoditycategory/listByAll?parentId=0",dataType:"json",success:function(t){o.productTypeList=o.initGoodCategory(t.data.cateLists)},error:function(){layer.alert("服务器异常，请稍后再试！",{icon:0})}})},getInputValue:function(t,o){var e=this;if(null!=e.returnGoods.goodsTypePath&&""!=e.returnGoods.goodsTypePath){var i={categoryCustomCode:e.returnGoods.goodsTypePath,field:t,limit:""};$.ajax({type:"post",url:contextPath+"/tbasecommodity/findByType",data:i,dataType:"json",success:function(t){Object.assign(e.productDetailList[o],{options:t.data}),e.$forceUpdate()},error:function(){layer.alert("服务器异常，请稍后再试！",{icon:0})}})}else layer.alert("请选择商品类型！",{icon:0})},selectProductDetail:function(t){this.selectedIndex=t},selectProductDetail2:function(t){this.selectedIndex1=t},locatorChange:function(t,o){var e=t;"object"===(void 0===t?"undefined":_typeof(t))&&(e=t.target.value);for(var i="",s=0;s<this.wareHouse.length;s++)if(e==this.wareHouse[s].id){i=this.wareHouse[s].groupId;break}this.$set(this.storageList,o,this.locationMap[i])},saveClick:function(t){var o=this,e="";if("submit"==t){if(!this.submitCheck())return;e=contextPath+"/rurchaseReturnGoods/submitReturnGoods"}else"save"==t&&(e=contextPath+"/rurchaseReturnGoods/saveOrUpdateReturnGoods");var i=!0,s="";if("P_RETURN_STOCK_02"==o.returnGoods.businessType){t:for(var r=0;r<this.productDetailList.length;r++)if("attr_ranges_gold"!=this.productDetailList[r].goodsMainType)for(var n=0;n<this.productDetailList[r].goodsEntities.length;n++)if(null==this.productDetailList[r].goodsEntities[n].goodsBarcodeId&&null==this.productDetailList[r].goodsEntities[n].goodsEntity.id){s="第"+(r+1)+"行的商品编码为["+this.productDetailList[r].goodsCode+"]条码信息未输入！",i=!1;break t}if(!i)return void o.$Modal.error({content:s});if(!this.validateProduct())return;o.returnGoods.goodList=o.productDetailList,o.returnGoods=this.handlerDataToPost()}else o.returnGoods.goodList=o.productDetailList;window.top.home.loading("show"),$.ajax({url:e,method:"post",dataType:"json",data:JSON.stringify(o.returnGoods),contentType:"application/json;charset=utf-8",success:function(t){window.top.home.loading("hide"),"100100"==t.code?(o.$Modal.success({title:"提示信息",content:t.msg}),o.productDetailList=[{goodsEntities:[]}],o.returnGoods={},o.returnGoods=t.data,o.productDetailList=o.returnGoods.goodList,2==o.returnGoods.orderStatus?o.isCleanStore=!1:o.isCleanStore=!0,o.saveAccess(o.returnGoods.id,o.boeType),o.isEdit(1==o.returnGoods.orderStatus?"Y":"N")):o.$Modal.warning({content:t.msg})},error:function(){window.top.home.loading("hide"),layer.alert("服务器异常，请稍后再试！",{icon:0})}})},submitCheck:function(){var t=this;if(null==t.returnGoods.businessType||""==t.returnGoods.businessType)return t.$Modal.warning({content:"请选择业务类型！"}),!1;if(null==t.returnGoods.goodsTypePath||""==t.returnGoods.goodsTypePath)return t.$Modal.warning({content:"请选择商品类型！"}),!1;if(null==t.returnGoods.supplierId||""==t.returnGoods.supplierId)return t.$Modal.warning({content:"请选择供应商！"}),!1;if(null==t.returnGoods.logisticsMode||""==t.returnGoods.logisticsMode)return t.$Modal.warning({content:"请选择物流方式！"}),!1;if(null==this.productDetailList||0==t.productDetailList.length)return t.$Modal.warning({content:"商品信息不能为空！"}),!1;if(0<t.productDetailList.length&&null==t.productDetailList[0].goodsCode)return t.$Modal.warning({content:"商品信息不能为空！"}),!1;for(var o=0;o<this.productDetailList.length;o++){if("attr_ranges_gold"!=this.productDetailList[o].goodsMainType&&(null==this.productDetailList[o].returnWeight||""==this.productDetailList[o].returnWeight))return t.$Modal.warning({content:"请输入第"+(o+1)+"行的退货重量！"}),!1;if("attr_ranges_gold"!=this.productDetailList[o].goodsMainType&&(null==this.productDetailList[o].returnCount||""==this.productDetailList[o].returnCount))return t.$Modal.warning({content:"请输入第"+(o+1)+"行的退货数量！"}),!1;if("attr_ranges_gold"==this.productDetailList[o].goodsMainType&&(null==this.productDetailList[o].returnWeight||""==this.productDetailList[o].returnWeight))return t.$Modal.warning({content:"请输入第"+(o+1)+"行的退货重量！"}),!1;if(null==this.productDetailList[o].warehouseId)return t.$Modal.warning({content:"请选择第"+(o+1)+"行的仓库信息！"}),!1;if(null==this.productDetailList[o].price||this.productDetailList[o].price<=0)return t.$Modal.warning({content:"请检查第"+(o+1)+"行的进货单价是否输入正确！"}),!1}return!0},approval:function(){this.modalType="approve",this.modalTrigger=!this.modalTrigger},reject:function(){console.log("_this.returnGoods.orderStatus",this.returnGoods.orderStatus),this.modalType="reject",this.modalTrigger=!this.modalTrigger},cancel:function(){window.parent.closeCurrentTab({exit:!0,openTime:this.openTime})},rowClick:function(t){if(1==this.returnGoods.orderStatus){if("add"===t){if(null==this.returnGoods.businessType||""==this.returnGoods.businessType)return void layer.alert("请选择业务类型！",{icon:0});if(null==this.returnGoods.goodsTypePath||""==this.returnGoods.goodsTypePath)return void layer.alert("请选择商品类型！",{icon:0});if(0<this.productDetailList.length)for(var o=0;o<this.productDetailList.length;o++)if(null==this.productDetailList[o].commodityId||null==this.productDetailList[o].commodityId)return void layer.alert("请输输入第"+(o+1)+"行的商品信息！",{icon:0});this.productDetailList.push({options:this.commodityList})}else if("del"===t){if(2==this.returnGoods.dataSource&&1==this.productDetailList.length)return void layer.alert("生成的商品明细不能全部删除！",{icon:0});this.productDetailList[this.selectedIndex].goodsId&&(this.returnGoods.delGoodsDetails||(this.returnGoods.delGoodsDetails=[]),this.returnGoods.delGoodsDetails.push(this.productDetailList[this.selectedIndex].goodsId)),this.productDetailList.splice(this.selectedIndex,1)}this.$forceUpdate()}},clearNoNum:function(t,o,e){if("returnCount"===o){if(t.returnCount<=0)return;if("P_RETURN_STOCK_02"==this.returnGoods.businessType)if(t.returnCount<t.goodsEntities.length){var i=Number(t.returnCount),s=Number(t.goodsEntities.length)-i;t.goodsEntities.splice(i,s)}else for(var r=Number(t.returnCount),n=Number(t.goodsEntities.length),d=0;d<r-n;d++)t.goodsEntities.push({goodsEntity:{id:null,options:[]}})}return htInputNumber(t,o,e)}},watch:{productDetailList:{handler:function(t,o){var e=this;console.log(t),console.log(o);var i=0,s=0,r=0;t.map(function(t){t.returnCount&&!isNaN(t.returnCount)&&(i=math.eval(Number(i)+Number(t.returnCount))),t.returnWeight&&!isNaN(t.returnWeight)&&(s=math.eval(Number(s)+Number(t.returnWeight))),t.price&&(1==t.pricingMethod&&t.returnWeight?t.amount=parseFloat(math.eval(Number(t.price)*Number(t.returnWeight)).toFixed(3)):2==t.pricingMethod&&t.returnCount?t.amount=parseFloat(math.eval(Number(t.price)*Number(t.returnCount)).toFixed(3)):t.amount=0,r=parseFloat(math.eval(Number(r)+Number(t.amount)).toFixed(2))),e.returnGoods.returnCount=i,e.returnGoods.returnWeight=s})},deep:!0}},computed:{typeValue:function(){var t=this.returnGoods.goodsTypePath,o=[];return this.typeInit(this.productTypeList,o,t),o.reverse()}},mounted:function(){var t=this;this.openTime=window.parent.params.openTime,this.params=window.parent.params.params;var o=window.parent.params.params.type;t.returnGoods={},t.returnGoods=window.parent.params.params.goodsData,t.productDetailList=t.returnGoods.goodList,"generate"==o?(this.isCleanStore=!1,t.productDetailList.map(function(t){t.goodsEntities.map(function(t){t.goodsEntity.options=[]})}),this.loadData(this.returnGoods.goodList),0==this.wareHouse.length&&this.loadWarehouses(this.returnGoods.goodList),this.isEdit("Y")):"add"==o?this.isEdit("Y"):"detail"==o&&(t.productDetailList.map(function(t){t.goodsEntities.map(function(t){t.goodsEntity.options=[]})}),0==this.wareHouse.length&&this.loadWarehouses(this.returnGoods.goodList),2==this.returnGoods.dataSource?this.isCleanStore=!1:1==this.returnGoods.dataSource&&1!=this.returnGoods.orderStatus&&(this.isCleanStore=!1),this.getAccess(t.returnGoods.id,t.boeType),this.isEdit(1==t.returnGoods.orderStatus?"Y":"N"))}});