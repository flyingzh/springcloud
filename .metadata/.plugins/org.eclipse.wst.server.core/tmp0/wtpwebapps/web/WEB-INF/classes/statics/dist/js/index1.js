"use strict";function initDict(){$.getJSON("sys/code/map",function(r){if(0==r.code){var map=eval("("+r.map+")");for(var key in map){var value=map[key];layui.data("dict",{key:key,value:value})}}})}function initMenu(){var d=layui.element();$.getJSON("sys/menu/userMenu?_"+$.now(),function(a){for(var e=a.menuList,t="",i=0;i<e.length;i++){var n=e[i];if(t+='<li class="layui-nav-item">',"0"==n.type){t+='<a href="javascript:;">',t+='    \t<i class="'+(o=n.icon)+'"></i>',t+="    \t<span>"+(c=n.name)+"</span>",t+='\t\t<em class="layui-nav-more"></em>',t+="</a>";for(var r=n.list,l=0;l<r.length;l++){var s=r[l];if("1"==s.type){var o=s.icon,c=s.name,u=s.url;"1"==s.type&&(t+='<dl class="layui-nav-child">',t+="\t<dd>",t+='\t\t<a href="javascript:;" data-url="'+u+'">',t+='\t\t\t<i class="'+o+'" data-icon="'+o+'"></i>',t+="\t\t\t<span>"+c+"</span>",t+="\t\t</a>",t+="\t</dd>",t+="</dl>")}else s.type}}if("1"==n.type){o=n.icon,c=n.name;t+='<a href="javascript:;" data-url="'+(u=n.url)+'">',t+='\t<i class="'+o+'" data-icon="'+o+'"></i>',t+="\t<span>"+c+"</span>",t+="</a>"}t+="</li>"}$("#menuTree").append(t),d.init()})}layui.config({base:"statics/js/"}).use(["navtab"],function(){window.jQuery=window.$=layui.jquery,window.layer=layui.layer;layui.element();var t=layui.navtab({elem:".larry-tab-box"});$(window).on("resize",function(){var a=$("#larry-tab .layui-tab-content");a.height($(this).height()-140),a.find("iframe").each(function(){$(this).height(a.height())})}).resize(),$(function(){$("#larry-nav-side").click(function(){void 0!==$(this).attr("lay-filter")&&$(this).children("ul").find("li").each(function(){var a=$(this);if(0<a.find("dl").length)a.find("dd").each(function(){$(this).on("click",function(){var a=$(this).children("a"),e={href:a.data("url"),icon:a.children("i:first").data("icon"),title:a.children("span").text()};t.tabAdd(e)})});else a.on("click",function(){var a=$(this).children("a"),e={href:a.data("url"),icon:a.children("i:first").data("icon"),title:a.children("span").text()};t.tabAdd(e)})})}).trigger("click")})}),layui.use(["jquery","layer","element"],function(){window.jQuery=window.$=layui.jquery,window.layer=layui.layer,initDict(),initMenu(),$(".larry-side-menu").click(function(){200===$("#larry-side").width()?($("#larry-body").animate({left:"0"}),$("#larry-footer").animate({left:"0"}),$("#larry-side").animate({width:"0"})):($("#larry-body").animate({left:"200px"}),$("#larry-footer").animate({left:"200px"}),$("#larry-side").animate({width:"200px"}))})});var vm=new Vue({el:"#layui_layout",data:{user:{},menuList:{},passWord:"",newPassWord:"",navTitle:"首页",myUpcomingCount:"",myNoticeCount:""},methods:{getUser:function(){$.getJSON("sys/user/info?_"+$.now(),function(a){vm.user=a.user,vm.myUpcomingCount=a.myUpcomingCount,vm.myNoticeCount=a.myNoticeCount})},myUpcoming:function(){var a=$("#menuTree a[data-url='act/deal/myUpcoming']");a.parent().parent().parent().click(),a.parent().parent().parent().addClass("layui-nav-itemed"),a.click()},myNotice:function(){var a=$("#menuTree a[data-url='sys/notice/myList']");a.parent().parent().parent().click(),a.parent().parent().parent().addClass("layui-nav-itemed"),a.click()},updatePassword:function(){layer.open({type:1,skin:"layui-layer-molv",title:"修改密码",area:["550px","270px"],shadeClose:!1,content:$("#passwordLayer"),btn:["修改","取消"],btn1:function(e){var a="passWord="+vm.passWord+"&newPassWord="+vm.newPassWord;$.ajax({type:"POST",url:"sys/user/updatePassword",data:a,dataType:"json",success:function(a){0==a.code?(layer.alert("修改成功",function(a){location.reload()}),layer.close(e)):layer.alert(a.msg)}})}})}},created:function(){this.getUser()}});