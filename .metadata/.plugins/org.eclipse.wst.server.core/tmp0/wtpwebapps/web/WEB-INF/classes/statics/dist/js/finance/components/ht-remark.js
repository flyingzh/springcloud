"use strict";Vue.component("ht-remark",{data:function(){var n=this;return{isModalOpen:this.recmodal,abstractList:this.remarkList,isHave:"",remarkContent:"",columns1:[{title:"操作",width:100,key:"operate",render:function(t,e){return t("div",[t("Icon",{props:{type:"edit"},style:{marginRight:"10px",padding:"5px"},on:{click:function(){n.editRemark(e)}}}),t("Icon",{props:{type:"close"},style:{padding:"5px"},on:{click:function(){n.delRemark(e.index)}}})])}},{title:"摘要内容",key:"content",ellipsis:!0}]}},methods:{addRemark:function(){var e=this;if(/(^\s*$)/.test(this.remarkContent))this.$Message.error({content:"请输入摘要内容",duration:5});else{var t=!0,n=!1,a=void 0;try{for(var i,o=this.remarkList[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var r=i.value;if(this.remarkContent.trim()===r.content)return void this.$Message.error({content:"保存失败,摘要已存在，请重新设置摘要！",duration:5})}}catch(t){n=!0,a=t}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}var s=void 0,c="";s=""===e.isHave?(c=contextPath+"/voucherExpController/save",{content:this.remarkContent}):(c=contextPath+"/voucherExpController/update",{id:e.remarkList[e.isHave].id,content:this.remarkContent}),$.ajax({type:"POST",url:c,data:JSON.stringify(s),contentType:"application/json;charset=utf-8",dataType:"json",success:function(t){if(console.log(t),t.data){if(""===e.isHave)e.remarkList.unshift({content:e.remarkContent});else e.remarkList[e.isHave]&&(e.remarkList[e.isHave].content=e.remarkContent,e.remarkList[e.isHave].id=0),e.isHave="";e.remarkContent="",e.$Message.success({content:"保存成功",duration:5})}}})}},cancleRemark:function(){this.remarkContent="",this.closeModal()},editRemark:function(t){this.remarkContent=t.row.content,this.isHave=t.index},delRemark:function(e){var n=this;this.$Modal.confirm({title:"系统提示",content:"<p>删除的摘要将不能恢复，请确认是否删除？</p>",okText:"确定",cancelText:"取消",onOk:function(){var t={id:n.remarkList[e].id};console.log(t),$.ajax({type:"POST",url:contextPath+"/voucherExpController/delete",data:t,dataType:"json",success:function(t){t.data&&(n.remarkList.splice(e,1),n.$Message.success({content:"删除成功",duration:5}))}})}})},closeModal:function(){this.isModalOpen=!1},dblClickRow:function(t,e){this.$emit("on-row-dblclick",t)}},watch:{recmodal:function(t){this.isModalOpen=t},remarkList:function(t){this.abstractList=t},isModalOpen:function(t){this.$emit("on-modal-change",t)},abstractList:function(t){this.$emit("on-list-change",t)}},props:{value:{},recmodal:{default:function(){return!1}},remarkList:{default:function(){return[]}}},template:'\n    <Modal\n        title="凭证摘要库"\n        v-model="isModalOpen"\n        @on-cancel=\'closeModal\'\n        :mask-closable="false">\n        <p class="remark-title">摘要内容：</p>\n        <Input type="textarea" v-model="remarkContent"></Input>\n        <div class="mg10 text-right">\n            <Button type="primary" @click="addRemark ">保存</Button>\n            <Button type="ghost" @click="cancleRemark" class="">取消</Button>\n        </div>\n        <Table \n            border\n            stripe\n            highlight-row \n            class="clear"\n            height="200" \n            size="small"\n            :columns="columns1" \n            :data="remarkList"\n\t\t\t@on-row-dblclick="dblClickRow"\n\t\t\t>\n        </Table>\n        <span slot="footer"></span>\n    </Modal>\n    '});