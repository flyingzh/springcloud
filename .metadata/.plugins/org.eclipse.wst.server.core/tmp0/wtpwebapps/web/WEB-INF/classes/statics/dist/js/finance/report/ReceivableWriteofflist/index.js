"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var _href=baseURL,vm=new Vue({el:"#receivableWriteofflist",data:{openTime:"",ishttpOK:!1,isSaveAdd:!1,writeIsChange:!0,floatNumber:2,deleteVisible:!1,deleteLoading:!0,for3Title:"客户",for4Title:"供应商",formData:{id:0,verificationType:0,documentDate:"",billNumber:"",occurrenceObjectOneId:0,occurrenceCodeOne:"",occurrenceObjectOne:"",occurrenceObjectTwoId:0,occurrenceObjectTwo:"",occurrenceCodeTwo:"",coinStopId:0,coinStop:"",summary:"",directorId:0,director:"",departmentId:0,department:"",salesmanId:0,salesman:"",voucherSize:"",voucherId:0,isVoucher:1,auditorName:"",auditorId:0,auditorDate:"",auditStatus:1,createdTime:"",updateTime:"",createName:"",createId:0,updateName:"",updateId:0,sobId:0,accountYear:0,accountPeriod:0},formDataInit:{verificationType:[],coinStop:[],client:[],supplier:[],director:[],department:[],salesman:[],summary:[]},tb1Title:"预收单据:",tb2Title:"应收单据:",table1DataList:[],table1DataListTotal:{documentaryAmountFor:"0.00",documentaryAmount:"0.00",cancellationAmount:"0.00",notCancellationAmount:"0.00",thisTiemCancellationFor:"0.00",thisTiemCancellation:"0.00"},table1CurrentSelectRow:"",table2DataList:[],table2DataListTotal:{documentaryAmountFor:"0.00",documentaryAmount:"0.00",cancellationAmount:"0.00",notCancellationAmount:"0.00",thisTiemCancellationFor:"0.00",thisTiemCancellation:"0.00"},table2CurrentSelectRow:"",detailVisible:!1,detailTitle:"源单",detailTable1:[],curTable:"",tableDate:{},category1:"",category2:"",exchangeRate:1,printModal:!1,printInfo:{}},filters:{filtersTableDate:function(t){return new Date(t).format("yyyy-MM-dd")},filtersTableNumber:function(t){return accounting.formatMoney(t,"",2)}},created:function(){var t=getUrlParam("id"),e=getUrlParam("action"),a=getUrlParam("sobId");this._ajaxGetFormData(t,a,e)},watch:{},methods:{queryById:function(t){var e=this,a={id:t};$.ajax({type:"post",async:!0,data:a,url:"",dataType:"json",success:function(t){100100===t.code&&(e.formData=t.data.verificationSheetEntity)}})},_selectReset:function(){this.$refs.verificationType.reset(),this.$refs.occurrenceObjectOneId.reset(),this.$refs.occurrenceObjectTwoId.reset(),this.$refs.coinStopId.reset(),this.$refs.directorId.reset(),this.$refs.departmentId.reset(),this.$refs.salesmanId.reset()},beforeOrLast:function(t){var a=this;if(1!=a.ishttpOK){a.ishttpOK=!0,a._selectReset();this.formData.verificationType;var e=_href+"verificationSheet/query",o={id:a.formData.id,nextOrLast:t};$.ajax({type:"post",data:o,url:e,dataType:"json",success:function(t){var e="";"100100"===t.code?(e=t.msg,a.$nextTick(function(){a.formData=t.data.verificationSheetEntity,a.table1DataList=t.data.wOEList1,a.table2DataList=t.data.wOEList2,a.writeIsChange=!1})):e="100010"===t.code?"暂无其它单据":t.msg,a.$Message.info({content:e,duration:3}),setTimeout(function(){a.ishttpOK=!1},1e3)},error:function(t){setTimeout(function(){a.ishttpOK=!1},1e3)}})}},preserve:function(){if(this.writeIsChange){var a=this;if(1===a.formData.verificationType||2===a.formData.verificationType||3===a.formData.verificationType||4===a.formData.verificationType){if(a.totalThisTiemCancellationFor!==a.total2ThisTiemCancellationFor)return void a.$Message.info({content:"两张表的核销金额不一致。",duration:3});if(!a.table1DataList.length||!a.table2DataList.length)return void a.$Message.info({content:"源单单据不能为空",duration:3})}else if(!a.table1DataList.length)return void a.$Message.info({content:"源单单据不能为空",duration:3});var t=!1,e="请填写必填项。";if(void 0!==a.formData.verificationType&&0!==a.formData.verificationType&&void 0!==a.formData.coinStopId&&0!==a.formData.coinStopId&&a.formData.documentDate&&this.formData.billNumber||(t=!0),1===a.formData.verificationType||3===a.formData.verificationType?void 0!==a.formData.occurrenceObjectOneId&&0!==a.formData.occurrenceObjectOneId||(t=!0,e="请选择客户"):2===a.formData.verificationType||4===a.formData.verificationType?void 0!==a.formData.occurrenceObjectTwoId&&0!==a.formData.occurrenceObjectTwoId||(t=!0,e="请选择供应商"):5===a.formData.verificationType?void 0===a.formData.occurrenceObjectOneId||0===a.formData.occurrenceObjectOneId?(t=!0,e="请选择转出客户"):a.formData.occurrenceObjectTwoId===a.formData.occurrenceObjectOneId&&(t=!0,e="转出转入客户不能相同"):6===a.formData.verificationType&&(void 0===a.formData.occurrenceObjectOneId||0===a.formData.occurrenceObjectOneId?(t=!0,e="请选择转出供应商"):a.formData.occurrenceObjectTwoId===a.formData.occurrenceObjectOneId&&(t=!0,e="转出转入供应商不能相同")),t)a.$Message.info({content:e,duration:3});else{var o,r,i,n,c,u,s=_href+"verificationSheet/save",d=[],m=[];d=6===a.formData.verificationType?a.formDataInit.supplier:a.formDataInit.client,m=5===a.formData.verificationType?a.formDataInit.client:a.formDataInit.supplier,o=d.find(function(t){return t.id==a.formData.occurrenceObjectOneId}),r=m.find(function(t){return t.id==a.formData.occurrenceObjectTwoId}),i=a.formDataInit.coinStop.find(function(t){return t.id==a.formData.coinStopId}),n=a.formDataInit.director.find(function(t){return t.id==a.formData.directorId}),c=a.formDataInit.department.find(function(t){return t.id==a.formData.departmentId}),u=a.formDataInit.salesman.find(function(t){return t.id==a.formData.salesmanId}),console.log("_findOccOne",o,r),o&&(a.formData.occurrenceObjectOne=o.name,a.formData.occurrenceCodeOne=o.exchangeRate),r&&(a.formData.occurrenceObjectTwo=r.name,a.formData.occurrenceCodeTwo=r.exchangeRate),i&&(a.formData.coinStop=i.name),n&&(a.formData.director=n.name),c&&(a.formData.department=c.name),u&&(a.formData.salesman=u.name);var l=JSON.stringify({WOEList1:a.table1DataList,WOEList2:a.table2DataList,verificationSheetEntity:a.formData});1!=a.ishttpOK&&(a.ishttpOK=!0,$.ajax({type:"post",async:!0,data:l,url:s,dataType:"json",contentType:"application/json;charset=utf-8",success:function(t){var e="";"100100"===t.code?(e=t.msg,a.writeIsChange=!1,a.$nextTick(function(){a.formData=t.data,console.log(a.formData)})):e=t.msg,a.$Message.info({content:e,duration:3}),a.isSaveAdd&&(a.clearFormData(),a._selectReset(),a.table1DataList=[],a.table2DataList=[],a._ajaxgetBillNumber()),setTimeout(function(){a.ishttpOK=!1},1e3)},error:function(t){setTimeout(function(){a.ishttpOK=!1},1e3)}}))}}else a.$Message.info({content:"请点击修改。",duration:3})},_ajaxGetFormData:function(e,a,o){var r=this;r.ishttpOK=!0;var t=_href+"verificationSheet/initialise";$.ajax({type:"post",async:!0,data:"",url:t,dataType:"json",success:function(t){"100100"===t.code&&r.$nextTick(function(){r.formDataInit=t.data,console.log(t,"=====>>>"),r.formData.verificationType=t.data.info.verificationType,r.formData.documentDate=t.data.info.documentDate,r.formData.billNumber=t.data.info.billNumber,r.formData.coinStopId=t.data.info.coinStopId,r.formData.createName=t.data.info.createName,r._ajaxgetBillNumber(),e?setTimeout(function(){r._ajaxDoCopyById(e,a,o)},1e3):setTimeout(function(){r.ishttpOK=!1},1e3)})},error:function(t){setTimeout(function(){r.ishttpOK=!1},1e3)}})},_ajaxgetBillNumber:function(){var e=this,t=_href+"verificationSheet/getBillNumber";$.ajax({type:"get",async:!0,data:"",url:t,dataType:"json",success:function(t){e.$nextTick(function(){e.formData.billNumber=t.data.billNumber,e.formData.documentDate=t.data.documentDate,console.log("that.formDataInit.coinStopId[0].id",e.formDataInit,e.formData.coinStopId),e.formData.coinStopId=e.formDataInit.coinStop[0].id})},error:function(t){}})},_ajaxGetDataList:function(){var e=this;$.ajax({type:"get",async:!0,data:"",url:"./index3.json",dataType:"json",success:function(t){e.table1DataList=t.data},error:function(t){}})},_ajaxDoCopyById:function(t,e,a){var o=this,r=baseURL+"verificationSheet/queryById";http.post(r,JSON.stringify({id:t,sobId:e})).then(function(t){"100100"===t.code?o.$nextTick(function(){o.formData=t.data.verificationSheetEntity,o.table1DataList=t.data.wOEList1,o.table2DataList=t.data.wOEList2,"query"===a||(o.formData.auditStatus=1,o.formData.id=0)}):o.$Message.info({content:t.msg,duration:3}),setTimeout(function(){o.ishttpOK=!1},1e3)},function(t){setTimeout(function(){o.ishttpOK=!1},1e3)})},actionBtnMth:function(t){var a=this,e=!1,o="";if("addNew"===t)a.clearFormData(),a._selectReset(),a.table1DataList=[],a.table2DataList=[],a._ajaxgetBillNumber(),a.formData.documentDate=(new Date).format("yyyy-MM-dd"),a.cancellationType(a.formDataInit.verificationType[0].id);else if("edit"===t){var r=_href+"verificationSheet/update";$.ajax({type:"post",async:!0,data:JSON.stringify({id:a.formData.id,userId:a.formData.createId,sobId:a.formData.sobId}),url:r,dataType:"json",contentType:"application/json;charset=utf-8",success:function(t){var e="";"100100"===t.code?(e=t.msg,a.writeIsChange=!0):e=t.msg,a.$Message.info({content:e,duration:3})}})}else if("delete"===t)a.deleteVisible=!0;else if("deleteRow"===t)"1"===this.curTable?a.table1DataList=a.table1DataList.filter(function(t){return console.log("item.sourceListId",t.sourceListId),console.log("that.table1CurrentSelectRow",a.table1CurrentSelectRow),t.sourceListId!==a.table1CurrentSelectRow}):"2"===this.curTable&&(a.table2DataList=a.table2DataList.filter(function(t){return t.sourceListId!==a.table2CurrentSelectRow})),a.table1CurrentSelectRow="";else if("examine"===t||"noexamine"===t){r="examine"===t?_href+"verificationSheet/auditing":_href+"verificationSheet/counterAudit";$.ajax({type:"post",async:!0,data:JSON.stringify({id:a.formData.id,userId:a.formData.createId,sobId:a.formData.sobId,documentDate:a.formData.documentDate}),url:r,dataType:"json",contentType:"application/json;charset=utf-8",success:function(t){var e="";"100100"===t.code?(e=t.msg,a.formData=t.data):e=t.msg,a.$Message.info({content:e,duration:3})}})}else if("source"===t)if(1===a.formData.verificationType||3===a.formData.verificationType||4===a.formData.verificationType?void 0!==a.formData.occurrenceObjectOneId&&0!==a.formData.occurrenceObjectOneId||(e=!0,o="请选择客户"):2===a.formData.verificationType||3===a.formData.verificationType||4===a.formData.verificationType?void 0!==a.formData.occurrenceObjectTwoId&&0!==a.formData.occurrenceObjectTwoId||(e=!0,o="请选择供应商"):5===a.formData.verificationType?void 0!==a.formData.occurrenceObjectOneId&&0!==a.formData.occurrenceObjectOneId||(e=!0,o="请选择转出客户"):6===a.formData.verificationType&&(void 0!==a.formData.occurrenceObjectOneId&&0!==a.formData.occurrenceObjectOneId||(e=!0,o="请选择转出供应商")),a.curTable||(e=!0,o="请选择表格"),e)a.$Message.info({content:o,duration:3});else{r=_href+"verificationSheet/getSourceList";var i=[],n="",c="",u=a.formData.verificationType;if("1"===this.curTable){for(var s=0;s<a.table1DataList.length;s++)i.push(a.table1DataList[s].sourceListId);c=a.category1,1!==u&&3!==u&&5!==u&&6!==u||(n=a.formData.occurrenceObjectOneId),2!==u&&4!==u||(n=a.formData.occurrenceObjectTwoId)}else if("2"===this.curTable){c=a.category2;for(s=0;s<a.table2DataList.length;s++)i.push(a.table2DataList[s].sourceListId);2!==u&&3!==u||(n=a.formData.occurrenceObjectTwoId),1!==u&&4!==u||(n=a.formData.occurrenceObjectOneId)}var d={occurrenceObjectId:n,category:c,listId:i,coinStopId:a.formData.coinStopId};$.ajax({type:"post",async:!0,data:JSON.stringify(d),url:r,dataType:"json",contentType:"application/json;charset=utf-8",success:function(t){if("100100"===t.code)console.log("d.data",t.data),a.detailTable1=t.data,a.detailTableModal(!0);else{var e=t.msg;a.$Message.info({content:e,duration:3})}},error:function(t){}})}},voucherAction:function(t){var a=this;if("showVoucher"===t){console.log("contextPath=====================>>>>>",contextPath,rcContextPath);var e={name:"查看凭证",url:rcContextPath+"/finance/voucher-lrt/index.html?voucherId="+a.formData.voucherId+"&sobId="+a.formData.sobId};window.parent.activeEvent(e)}else{var o=_href+"verificationSheet/setVoucher",r={id:a.formData.id,userId:a.formData.auditorId,documentDate:a.formData.documentDate,sobId:a.formData.sobId,isVoucher:a.formData.isVoucher,auditStatus:a.formData.auditStatus};$.ajax({type:"post",async:!0,data:JSON.stringify(r),url:o,dataType:"json",contentType:"application/json;charset=utf-8",success:function(t){var e="";"100100"===t.code?(e=t.msg,a.formData.voucherId=t.data.voucherId,a.formData.isVoucher=t.data.isVoucher):e=t.msg,a.$Message.info({content:e,duration:3})}})}},optionAction:function(t){"saveAdd"===t&&(this.isSaveAdd=!this.isSaveAdd)},formatNum:function(t,e){var a=Math.pow(1e3,e);return parseInt(t*a,10)/a},blur_money:function(t,e){if(t[e+"For"]){if(t[e+"For"]>=t.notCancellationAmountFor){t[e+"For"]=this.formatNum(1*t.notCancellationAmountFor,1);var a=this.formatNum(t.notCancellationAmountFor*t.surfaceExchangeRate,1);t[e]=a}else{t[e+"For"]=this.formatNum(1*t[e+"For"],1);var o=this.formatNum(t[e+"For"]*t.surfaceExchangeRate,1);t[e]=o}}},deleteOK:function(){var a=this,t=_href+"verificationSheet/delete";$.ajax({type:"post",async:!0,data:JSON.stringify({id:a.formData.id,sobId:a.formData.sobId,documentDate:a.formData.documentDate,userId:a.formData.createId,auditStatus:a.formData.auditStatus}),url:t,dataType:"json",contentType:"application/json;charset=utf-8",success:function(t){var e="";e=(t.code,t.msg),a.$Message.info({content:e,duration:3}),a.deleteVisible=!1,a.clearFormData(),a._selectReset()}})},occurrenceObjectOne:function(t){},occurrenceObjectTwo:function(t){},cancellationType:function(t){console.log(t,"==cancellationType");var e=this,a="客户",o="供应商";switch(t){case 1:e.tb1Title="预收单据:",e.tb2Title="应收单据:",e.category1=3,e.category2=1;break;case 2:e.tb1Title="预付单据:",e.tb2Title="应付单据:",e.category1=4,e.category2=2;break;case 3:e.tb1Title="应收单据:",e.tb2Title="应付单据:",e.category1=1,e.category2=2;break;case 4:e.tb1Title="应付单据:",e.tb2Title="应收单据:",e.category1=2,e.category2=1;break;case 5:e.tb1Title="应收单据:",e.tb2Title="",a="转出客户",o="转入客户",e.category1=1;break;case 6:e.tb1Title="应付单据:",e.tb2Title="",a="转出供应商",o="转入供应商",e.category1=2;break;default:e.tb1Title="预收单据:",e.tb2Title="应收单据:",e.category1=3,e.category2=1}e.for3Title=a,e.for4Title=o,e.ishttpOK||e.clearFormData()},currencyType:function(e){var t=this.formDataInit.coinStop.find(function(t){return t.id==e});t&&(this.exchangeRate=t.exchangeRate),this.table1DataList=[],this.table2DataList=[]},table1ChickTr1:function(t){this.curTable=t},table1ChickTr:function(t){this.table1CurrentSelectRow=t.id,this.curTable="1"},table2ChickTr2:function(t){this.curTable=t},table2ChickTr:function(t){this.table2CurrentSelectRow=t.id,this.curTable="2"},detailTableModal:function(t){this.detailVisible=t},callBackInfo:function(t){if(t.length){0!==this.table1CurrentSelectRow||this.table2CurrentSelectRow;var a=[];t.forEach(function(t){var e={category:t.category,status:t.status,transactionType:t.transactionType,sourceSingleType:t.documentType,sourceListNumber:t.documentNumber,occurrenceObject_id:t.occurrenceObject_id,occurrenceObject:t.occurrenceObject,documentDate:t.documentDate,remark:t.summary,coinStopId:t.coinStopId,coinStop:t.coinStop,surfaceExchangeRate:t.surfaceExchangeRate,documentaryAmount:t.documentaryAmount,documentaryAmountFor:t.documentaryAmountFor,cancellationAmountFor:t.cancellationAmountFor,notCancellationAmountFor:t.notCancellationAmountFor,thisTiemCancellationFor:t.notCancellationAmountFor,departmentId:t.departmentId,department:t.department,salesmanId:t.salesmanId,salesman:t.salesman,sobId:t.sobId,accountYear:t.accountYear,accountYeriodf:t.accountYeriod,sourceListId:t.id,id:t.id,thisTiemCancellation:0};a.push(e)}),console.log(t,"=====_list"),"1"===this.curTable?this.table1DataList=[].concat(_toConsumableArray(this.table1DataList),a):"2"===this.curTable&&(this.table2DataList=[].concat(_toConsumableArray(this.table2DataList),a))}},autoWriteoff:function(){var t=this;if(1===t.formData.verificationType||2===t.formData.verificationType||3===t.formData.verificationType||4===t.formData.verificationType)if(1===t.table1DataList.length&&1===t.table2DataList.length){var e=[t.table1DataList[0].notCancellationAmountFor,t.table2DataList[0].notCancellationAmountFor,t.table1DataList[0].thisTiemCancellationFor,t.table2DataList[0].thisTiemCancellationFor];e=e.filter(function(t){return 0!==t&&""!==t});var a=Math.min.apply(null,e);t.table1DataList[0].thisTiemCancellationFor=a||0,t.table2DataList[0].thisTiemCancellationFor=a||0}else if(1===t.table1DataList.length&&1<t.table2DataList.length){var o=0,r=0;if(t.table1DataList.forEach(function(t){o+=t.thisTiemCancellationFor}),t.table2DataList.forEach(function(t){r+=t.thisTiemCancellationFor}),o===r)return;if(r<o)t.table1DataList[0].thisTiemCancellationFor=r,t.table1DataList[0].thisTiemCancellation=r*t.table1DataList[0].surfaceExchangeRate;else{var i=o;t.table2DataList.forEach(function(t){var e=0,a=t.notCancellationAmountFor;0!==i&&(i<=a?(e=i,i=0):i-=e=a),console.log(e,"===_n2===",i,"===_n==="),t.thisTiemCancellationFor=e,t.thisTiemCancellation=e*t.surfaceExchangeRate}),0!==i&&t.$Message.info({content:"金额还余下 "+i+" 未被分摊完,请调整金额或者添加源单",duration:3})}}else if(1<t.table1DataList.length&&1===t.table2DataList.length){var n=0,c=0;if(t.table1DataList.forEach(function(t){n+=t.thisTiemCancellationFor}),t.table2DataList.forEach(function(t){c+=t.thisTiemCancellationFor}),n===c)return;if(n<c)t.table2DataList[0].thisTiemCancellationFor=n,t.table2DataList[0].thisTiemCancellation=n*t.table2DataList[0].surfaceExchangeRate;else{i=c;t.table1DataList.forEach(function(t){var e=0,a=t.notCancellationAmountFor;0!==i&&(i<=a?(e=i,i=0):i-=e=a),console.log(e,"===_n2===",i,"===_n==="),t.thisTiemCancellationFor=e,t.thisTiemCancellation=e*t.surfaceExchangeRate}),0!==i&&t.$Message.info({content:"金额还余下 "+i+" 未被分摊完,请调整金额或者添加源单",duration:3})}}},clearFormData:function(){this.formData.id=0,this.formData.occurrenceObjectOneId=0,this.formData.occurrenceCodeOne="",this.formData.occurrenceObjectOne="",this.formData.occurrenceObjectTwoId="",this.formData.occurrenceObjectTwo="",this.formData.occurrenceCodeTwo="",this.formData.summary="",this.formData.directorId=0,this.formData.director="",this.formData.departmentId=0,this.formData.department="",this.formData.salesmanId=0,this.formData.salesman="",this.formData.voucherSize="",this.formData.voucherId=0,this.formData.isVoucher=1,this.formData.auditorName="",this.formData.auditorId=0,this.formData.auditorDate="",this.formData.auditStatus=1,this.formData.createdTime="",this.formData.updateTime="",this.formData.updateName="",this.formData.updateId=0,this.formData.sobId=0,this.formData.accountYear=0,this.formData.accountPeriod=0,this.table1DataList=[],this.table2DataList=[],this.writeIsChange=!0},closeWindow:function(){window.parent.closeCurrentTab({name:"核销单",openTime:this.openTime,url:this.openTime,exit:!0})},logopAction:function(){console.log(layui.data("user"));var t={title:"核销单",template:1,colNames:[{name:"作者",col:"auditorName"},{name:"币别",col:"coinStop"},{name:"客户",col:"occurrenceObjectOne"},{name:"供应商",col:"occurrenceObjectTwo"},{name:"日期",col:"documentDate"},{name:"创建者",col:"createdTime"},{name:"编号",col:"billNumber"},{name:"科目",col:"directorId"}],styleCss:"",colMaxLenght:7,data:[{accountPeriod:10,accountYear:2018,auditStatus:2,auditorDate:"2018-07-06 19:07:00",auditorId:27,auditorName:"超级管理员",billNumber:"HXDJ-20180706-127",coinStop:"人民币",coinStopId:1,createId:27,createName:"超级管理员",createdTime:"2018-07-06 19:06:56",department:"",departmentId:0,director:"",directorId:0,documentDate:"2018-10-31 00:00:00",id:55,isVoucher:1,occurrenceCodeOne:null,occurrenceCodeTwo:null,occurrenceObjectOne:"123",occurrenceObjectOneId:1,occurrenceObjectTwo:"光芒四射",occurrenceObjectTwoId:36,salesman:"",salesmanId:0,sobId:1,summary:"",thisTiemCancellation:50,updateId:27,updateName:"超级管理员",updateTime:"2018-07-06 20:19:04",verificationType:3,voucherId:31,voucherSize:""},{accountPeriod:10,accountYear:2018,auditStatus:2,auditorDate:"2018-07-06 19:09:14",auditorId:27,auditorName:"超级管理员",billNumber:"HXDJ-20180706-128",coinStop:"人民币",coinStopId:1,createId:27,createName:"超级管理员",createdTime:"2018-07-06 19:09:13",department:"",departmentId:0,director:"",directorId:0,documentDate:"2018-10-31 00:00:00",id:56,isVoucher:1,occurrenceCodeOne:null,occurrenceCodeTwo:null,occurrenceObjectOne:"1231",occurrenceObjectOneId:2,occurrenceObjectTwo:"光芒四射",occurrenceObjectTwoId:36,salesman:"",salesmanId:0,sobId:1,summary:"",thisTiemCancellation:50,updateId:27,updateName:"超级管理员",updateTime:"2018-07-06 20:38:28",verificationType:3,voucherId:36,voucherSize:""},{accountPeriod:10,accountYear:2018,auditStatus:2,auditorDate:"2018-07-06 19:43:18",auditorId:27,auditorName:"超级管理员",billNumber:"HXDJ-20180706-131",coinStop:"人民币",coinStopId:1,createId:27,createName:"超级管理员",createdTime:"2018-07-06 19:42:42",department:"营销部",departmentId:3,director:"朱十七",directorId:87,documentDate:"2018-10-31 00:00:00",id:57,isVoucher:1,occurrenceCodeOne:null,occurrenceCodeTwo:null,occurrenceObjectOne:"123",occurrenceObjectOneId:1,occurrenceObjectTwo:"1231",occurrenceObjectTwoId:2,salesman:"吴六",salesmanId:76,sobId:1,summary:"",thisTiemCancellation:1e3,updateId:27,updateName:"超级管理员",updateTime:"2018-07-06 19:43:18",verificationType:5,voucherId:0,voucherSize:""},{accountPeriod:10,accountYear:2018,auditStatus:2,auditorDate:"2018-07-06 19:44:45",auditorId:27,auditorName:"超级管理员",billNumber:"HXDJ-20180706-132",coinStop:"人民币",coinStopId:1,createId:27,createName:"超级管理员",createdTime:"2018-07-06 19:44:35",department:"",departmentId:null,director:"",directorId:null,documentDate:"2018-10-31 00:00:00",id:58,isVoucher:2,occurrenceCodeOne:null,occurrenceCodeTwo:"",occurrenceObjectOne:"1231",occurrenceObjectOneId:2,occurrenceObjectTwo:"",occurrenceObjectTwoId:null,salesman:"",salesmanId:null,sobId:1,summary:"",thisTiemCancellation:1e3,updateId:27,updateName:"超级管理员",updateTime:"2018-07-07 14:18:55",verificationType:1,voucherId:47,voucherSize:""},{accountPeriod:10,accountYear:2018,auditStatus:2,auditorDate:"2018-07-06 20:17:22",auditorId:27,auditorName:"超级管理员",billNumber:"HXDJ-20180706-138",coinStop:"人民币",coinStopId:1,createId:27,createName:"超级管理员",createdTime:"2018-07-06 20:17:20",department:"研发部",departmentId:5,director:"周五",directorId:75,documentDate:"2018-10-31 00:00:00",id:59,isVoucher:1,occurrenceCodeOne:null,occurrenceCodeTwo:null,occurrenceObjectOne:"123",occurrenceObjectOneId:1,occurrenceObjectTwo:"光芒四射",occurrenceObjectTwoId:36,salesman:"孙三",salesmanId:73,sobId:1,summary:"",thisTiemCancellation:23,updateId:27,updateName:"超级管理员",updateTime:"2018-07-06 20:38:27",verificationType:3,voucherId:35,voucherSize:""},{accountPeriod:10,accountYear:2018,auditStatus:2,auditorDate:"2018-07-06 08:47:15",auditorId:27,auditorName:"超级管理员",billNumber:"HXDJ-20180706-34",coinStop:"人民币",coinStopId:1,createId:27,createName:"超级管理员",createdTime:"2018-07-06 08:47:13",department:"人事部",departmentId:2,director:"冯九",directorId:79,documentDate:"2018-10-19 00:00:00",id:52,isVoucher:2,occurrenceCodeOne:null,occurrenceCodeTwo:"",occurrenceObjectOne:"123",occurrenceObjectOneId:1,occurrenceObjectTwo:"",occurrenceObjectTwoId:null,salesman:"吴六",salesmanId:76,sobId:1,summary:"",thisTiemCancellation:3e3,updateId:27,updateName:"超级管理员",updateTime:"2018-07-07 14:18:56",verificationType:1,voucherId:48,voucherSize:""},{accountPeriod:10,accountYear:2018,auditStatus:2,auditorDate:"2018-07-06 08:51:35",auditorId:27,auditorName:"超级管理员",billNumber:"HXDJ-20180706-35",coinStop:"人民币",coinStopId:1,createId:27,createName:"超级管理员",createdTime:"2018-07-06 08:51:25",department:"采购部",departmentId:4,director:"冯九",directorId:79,documentDate:"2018-10-12 00:00:00",id:53,isVoucher:2,occurrenceCodeOne:null,occurrenceCodeTwo:"",occurrenceObjectOne:"123",occurrenceObjectOneId:1,occurrenceObjectTwo:"",occurrenceObjectTwoId:null,salesman:"郑七",salesmanId:77,sobId:1,summary:"",thisTiemCancellation:199,updateId:27,updateName:"超级管理员",updateTime:"2018-07-07 16:26:52",verificationType:1,voucherId:49,voucherSize:""}]};this.printInfo=t,this.printModalShow(!0)},printModalShow:function(t){this.printModal=t}},computed:{totalDocumentaryAmountFort:function(){var e=0;return this.table1DataList.forEach(function(t){e+=t.documentaryAmountFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||""},totalDocumentaryAmount:function(){var e=0;return this.table1DataList.forEach(function(t){e+=t.documentaryAmount}),(e=accounting.formatNumber(e,this.floatNumber,","))||""},totalCancellationAmount:function(){var e=0;return this.table1DataList.forEach(function(t){e+=t.cancellationAmountFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},totalNotCancellationAmount:function(){var e=0;return this.table1DataList.forEach(function(t){e+=t.notCancellationAmountFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},totalThisTiemCancellationFor:function(){var e=0;return this.table1DataList.forEach(function(t){e+=t.thisTiemCancellationFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||""},totalThisTiemCancellation:function(){var e=0;return this.table1DataList.forEach(function(t){e+=t.thisTiemCancellation}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},total2DocumentaryAmountFort:function(){var e=0;return this.table2DataList.forEach(function(t){e+=t.documentaryAmountFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||""},total2DocumentaryAmount:function(){var e=0;return this.table2DataList.forEach(function(t){e+=t.documentaryAmount}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},total2CancellationAmount:function(){var e=0;return this.table2DataList.forEach(function(t){e+=t.cancellationAmountFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},total2NotCancellationAmount:function(){var e=0;return this.table2DataList.forEach(function(t){e+=t.notCancellationAmountFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},total2ThisTiemCancellationFor:function(){var e=0;return this.table2DataList.forEach(function(t){e+=t.thisTiemCancellationFor}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},total2ThisTiemCancellation:function(){var e=0;return this.table2DataList.forEach(function(t){e+=t.thisTiemCancellation}),(e=accounting.formatNumber(e,this.floatNumber,","))||"0"},isDisabled:function(){var t=!1;return this.writeIsChange&&2!==this.formData.auditStatus||(t=!0),t},deleteisDisabled:function(){return 2===this.formData.isVoucher||2===this.formData.auditStatus},editisDisabled:function(){return 2===this.formData.isVoucher&&2===this.formData.auditStatus},voucherisDisabled:function(){return 0===this.formData.id||0===this.formData.auditStatus||1===this.formData.auditStatus||0===this.formData.isVoucher||2===this.formData.isVoucher},showVoucherDisabled:function(){return 0===this.formData.id||0===this.formData.auditStatus||0===this.formData.isVoucher||1===this.formData.isVoucher},examineisDisabled:function(){return 0===this.formData.id||0===this.formData.auditStatus||2===this.formData.auditStatus},noexamineisDisabled:function(){return 0===this.formData.id||0===this.formData.auditStatus||1===this.formData.auditStatus}},mounted:function(){this.openTime=window.parent.params&&window.parent.params.openTime}});