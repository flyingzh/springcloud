"use strict";Vue.component("ht-file-upload",{props:{isShow:Boolean,fileDetails:{default:[]},changeLog:Object,logAddress:String,showUpload:Boolean},template:'<div>\n                        <div v-if="!isShow">\n                            <i-button type="primary" @click="startUp">上传文件</i-button>\n                            <table class="edit-table">\n                                <thead>\n                                <tr>\n                                    <th class="width-xs text-center">序号</th>\n                                    <th>文件名</th>\n                                    <th>文件大小</th>\n                                    <th>上传人</th>\n                                    <th>上传时间</th>\n                                    <th>操作</th>\n                                </tr>\n                                </thead>\n                                <tbody >\n                                <tr v-show="item.del==false" v-for="(item,index) in fileDetails">\n                                    <td class="width-xs text-center">{{index+1}}</td>\n                                    <td><input type="text" :value="item.fd_id" hidden>\n                                        {{item.fdName}}\n                                    </td>\n                                    <td>\n                                        {{item.fdSize}}\n                                    </td>\n                                    <td>{{item.uploadUser}}</td>\n                                    <td class="text-center">{{item.uploadTime}}</td>\n                                    <td class="text-center">\n                                       <a :href="\''+contextPath+'/tbasecustomer/download?url=\'+item.fdUrl+\'&name=\'+item.fdName"\n                                           >下载</a>\n                                     <a href="javascript:void(0)" @click.prevent="delfileDetails(index,item.fd_id)">删除</a>\n                                    </td>\n                                </tr>\n                                </tbody>\n                            </table>\n                        </div>\n                        <div v-show="isShow">\n                            <common-record-list :record_config="changeLog"\n                                                :url="logAddress"></common-record-list>\n                        </div>\n                         <Modal\n                            v-model="showUpload"\n                            title="上传文件"\n                            @on-ok="modalOk"\n                            @on-cancel="modalCancel">\n                            <Upload\n                                    ref="upload"\n                                    :on-success="handleSuccess"\n                                    :max-size="2048"\n                                    :on-format-error="handleFormatError"\n                                    :on-exceeded-size="handleMaxSize"\n                                    multiple\n                                    \n                                    action="'+contextPath+'/tbasecustomer/img">\n                                <i-button type="ghost" icon="ios-cloud-upload-outline">开始上传</i-button>\n                                <span>文件上传大小限制为2M以内</span>\n                            </Upload>\n                        </Modal>\n                </div>',methods:{startUp:function(){this.showUpload=!0,this.$emit("update:showUpload",this.showUpload)},modalOk:function(){this.showUpload=!1,this.$emit("update:showUpload",this.showUpload)},delfileDetails:function(e,t){var n=this;layer.confirm("确认删除本条记录吗?",{btn:["确定","取消"],btn1:function(t){console.log(this),n.fileDetails[e].del=!0,n.$emit("update:fileDetails",n.fileDetails),layer.close(t)},btn2:function(t){layer.close(t)}})},modalCancel:function(){},handleSuccess:function(t,e){if("100100"==t.code){var n=t.data,i=this.$parent;i.customer.sysFile.fileDetails||(i.customer.sysFile={fileId:"",fileType:"",fileDetails:[]}),i.customer.sysFile.fileDetails.push(n)}else layer.alert("上传失败")},handleFormatError:function(t){this.$Notice.warning({title:"提示",desc:"文件上传失败，请联系技术人员"})},handleMaxSize:function(t){this.$Notice.warning({title:"提示",desc:"文件大小超过2M,请上传小于2M的文件"})}}});