"use strict";var mrpCountResult=new Vue({el:"#mrp-count-result",data:function(){return{countNum:"",treeShow:!1,tabShow:!1,countOrder:"",model:"",orderList:[],treeSetting:{view:{showLine:!1,selectedMulti:!1,dblClickExpand:!1,showIcon:!1},callback:{onClick:this.treeClickCallBack,beforeClick:this.treeBeforeClick}},ztreeUrl:contextPath+"/RMPCountController/goodsCodeList",MRPCountGoodsStockEntity:[],tabList:[]}},methods:{goodsClick:function(t){var o=t;window.parent.activeEvent({name:"商品",url:contextPath+"/base-data/commodity/commodity-info.html",params:{type:"skip",id:o}})},detailClick:function(t){var o=t;window.parent.activeEvent({name:"客户订单 - 查看",url:contextPath+"/sale/customer-order/customer-order-add.html",params:{type:"view",saleOrderNo:o}})},treeClickCallBack:function(t,o,e){var n={};n.countNo=e.countNo,n.documentType=e.documentType,n.goodsCode=e.goodsCode,$(".tabInfo").removeClass("tr-back"),this.tabShow=!1,mrpCountResult.tabList="",this.queryGoodsStock(n)},treeBeforeClick:function(t,o,e){return!o.isParent},modify:function(){var t=this.countOrder;this.countNum=t,this.tabShow=!1,this.treeShow=!0},queryGoodsStock:function(t){$.ajax({type:"POST",cache:!1,data:t,url:contextPath+"/RMPCountController/goodsStockList",success:function(t){t.data.map(function(t){t.demandDate=new Date(t.demandDate).format("yyyy-MM-dd")}),mrpCountResult.MRPCountGoodsStockEntity=t.data,mrpCountResult.$nextTick(function(){mrpCountResult.getGoodsNum(0)})}})},getGoodsNum:function(t){var o=this.MRPCountGoodsStockEntity[t].id;$(".tabInfo").eq(t).addClass("tr-back").siblings().removeClass("tr-back"),$.ajax({type:"POST",cache:!1,data:{id:o},url:contextPath+"/RMPCountController/countResultList",success:function(t){t.data.map(function(t){t.demandDate=new Date(t.demandDate).format("yyyy-MM-dd")}),mrpCountResult.tabList=t.data}}),this.tabShow=!0}},mounted:function(){var e=null;$.ajax({type:"POST",cache:!1,url:contextPath+"/RMPCountController/countNoList",success:function(t){if(t.data.map(function(t){t.countTime=new Date(t.countTime).format("yyyy-MM-dd")}),mrpCountResult.orderList=t.data,e=t.data[0].countNo,window.parent.params.params){var o=window.parent.params.params.countNo;mrpCountResult.countNum=o,mrpCountResult.countOrder=o,mrpCountResult.treeShow=!0}else mrpCountResult.countNum=e,mrpCountResult.countOrder=e,mrpCountResult.treeShow=!0}})}});