"use strict";Vue.component("ht-sourcelist",{props:{config:{type:Object,require:!1,default:function(){return!1}},sourceType:{},showModal:{default:function(){return!1}}},data:function(){var i=this;return{selected:[],body:{documentCode:"",documentTime:"",sourceType:""},base_config:{colNames:["操作","单据编号","单据日期","业务类型"],colModel:[{name:"codes",index:"invdate",width:200,align:"center",formatter:function(e,t,o,n){return $(document).on("click",".select"+o.documentCode,function(){i.doSelect(e,t,o,n)}),'<a type="primary" class="select'+o.documentCode+'">选取</a>'}},{name:"documentCode",index:"currencyName asc, invdate",width:200,align:"left",sort:!1},{name:"documentTime",index:"currencyName asc, invdate",width:200,sort:!1,formatter:"date",formatoptions:{srcformat:"Y/m/d",newformat:"Y/m/d"},align:"left"},{name:"businessType",index:"exchangeRate",width:250,align:"left"}],jsonReader:{root:"data.list",total:"data.totalPage",records:"data.totalCount",cell:"list"},prmNames:{page:"page",rows:"limit",sourceType:this.sourceType},mtype:"POST",contentType:"application/json",datatype:"json",styleUI:"Bootstrap",rownumbers:!0,pagination:!0,multiselectWidth:50,viewrecords:!0,rowNum:10,rowList:[10,30,50],pager:"#my_pager_id",url:contextPath+"/tQcCorrectPreventDocument/querySourceDocByType",onPaging:function(){}}}},methods:{doSelect:function(e,t,o,n){console.log(e,t,o,n),this.$emit("input",o.documentCode),this.$emit("sure")},init:function(){jQuery("#my_table_id").jqGrid(this.base_config)},clear:function(){this.body={documentCode:"",documentTime:""}},search:function(){this.body.documentTime&&(this.body.documentTime=new Date(this.body.documentTime).format("yyyy-MM-dd"));var e=$("#my_table_id"),t={postData:this.body};e.jqGrid("clearGridData"),e.jqGrid("setGridParam",t).trigger("reloadGrid")},closeModal:function(){this.$emit("cancel")}},mounted:function(){this.init()},watch:{sourceType:function(){this.body.sourceType=this.sourceType,this.search()}},template:'<div>\n            <Modal\n            @on-ok="doSelect"\n            @on-cancel="closeModal"\n        class-name="source-list"\n        width="900"\n        v-model="showModal"\n        title="选择源单">\n        <div class="content clearfix">\n           <div style="width: 800px;">\n              <div>\n                  <i-form :model="body" style="display:inline-block; margin-top: 10px;" :label-width="80">\n                    <form-item label="单据编号" style="display: inline-block">\n                        <i-input v-model="body.documentCode"></i-input>\n                    </form-item>\n                    <form-item label="单据日期" style="display: inline-block">\n                        <date-picker format="yyyy/MM/dd" v-model="body.documentTime" type="datetime" placeholder="请选择时间" style="width: 200px"></date-picker>\n                    </form-item>\n                    <ht-btns @clear="clear" @search="search"></ht-btns>\n                  </i-form>\n                 \n                </div>\n                <div class="jqGrid_wrapper">\n                    <table id="my_table_id"></table> \n                    <div id="my_pager_id"></div>\n                </div>\n            </div>           \n        </div>\n        <div slot="footer"></div>\n    </Modal>\n</div>'});