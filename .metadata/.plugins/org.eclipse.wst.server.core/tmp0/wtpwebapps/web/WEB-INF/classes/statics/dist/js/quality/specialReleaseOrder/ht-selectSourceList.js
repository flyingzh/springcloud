"use strict";Vue.component("ht-sourcelist",{props:{config:{type:Object,require:!1,default:function(){return!1}},sourceType:{},showModal:{default:function(){return!1}}},data:function(){var a=this;return{selected:[],date:[],body:{documentCode:"",startTime:"",endTime:"",alreadyTest:1,documentType:""},base_config:{colNames:["操作","源单编号","送检编号","单据日期","业务类型"],colModel:[{name:"codes",index:"invdate",width:200,align:"center",formatter:function(e,t,n,i){return $(document).on("click",".select"+n.documentCode,function(){a.doSelect(e,t,n,i)}),'<a type="primary" class="select'+n.documentCode+'">选取</a>'}},{name:"upstreamSourceCode",index:"currencyName asc, invdate",width:200,align:"center",sort:!1},{name:"documentCode",index:"currencyName asc, invdate",width:200,align:"center",sort:!1},{name:"documentTime",index:"currencyName asc, invdate",width:200,align:"center",sort:!1},{name:"businessType",index:"exchangeRate",width:200,align:"center",sort:!1}],jsonReader:{root:"data.list",total:"data.totalPage",records:"data.totalCount",cell:"list"},prmNames:{page:"page",rows:"limit",alreadyTest:1,documentType:this.sourceType},mtype:"POST",contentType:"application/json",datatype:"json",styleUI:"Bootstrap",rownumbers:!0,pagination:!0,multiselectWidth:50,viewrecords:!0,rowNum:10,rowList:[10,30,50],pager:"#my_pager_id",url:contextPath+"/specialReleaseDocument/list",onPaging:function(){}}}},methods:{doSelect:function(e,t,n,i){console.log(e,t,n,i),this.$emit("input",n.documentCode),this.$emit("sure")},init:function(){Object.assign(this.base_config,{postData:this.body}),jQuery("#my_table_id").jqGrid(this.base_config)},clear:function(){this.date=[],this.body={documentCode:"",startTime:"",endTime:""}},search:function(){var e=$("#my_table_id"),t={postData:this.body};e.jqGrid("clearGridData"),e.jqGrid("setGridParam",t).trigger("reloadGrid")},closeModal:function(){this.$emit("cancel")},changeDate:function(e){this.body.startTime=e[0].replace(/\//g,"-")+" 00:00:00",this.body.endTime=e[1].replace(/\//g,"-")+" 23:59:59"}},mounted:function(){this.init()},watch:{sourceType:function(){var e=this;this.body.documentType=this.sourceType,setTimeout(function(){e.search()},2e3)}},template:'<div>\n            <Modal\n            @on-ok="doSelect"\n            @on-cancel="closeModal"\n        class-name="source-list"\n        width="900"\n        v-model="showModal"\n        title="选择源单">\n        <div class="content clearfix">\n           <div style="width: 800px;border: 1px solid #ccc;">\n              <div>\n                  <i-form :model="body" style="display:inline-block; margin-top: 10px;" :label-width="80">\n                    <form-item label="送检编号" style="display: inline-block">\n                        <i-input v-model="body.documentCode"></i-input>\n                    </form-item>\n                    <form-item label="单据日期" style="display: inline-block">\n                       \x3c!-- <date-picker format="yyyy-MM-dd" v-model="date" :key="body.date" @on-change="body.date=$event"  type="datetime" placeholder="请选择时间" style="width: 200px"></date-picker>--\x3e\n                    <date-picker @on-change="changeDate" v-model="date" :clearable="false" format="yyyy/MM/dd" type="daterange" placement="bottom-end" placeholder="请选择时间" style="width: 200px"></date-picker>\n                    </form-item>\n                    <ht-btns @clear="clear" @search="search"></ht-btns>\n                  </i-form>\n                 \n                </div>\n                <div class="jqGrid_wrapper">\n                    <table id="my_table_id"></table> \n                    <div id="my_pager_id"></div>\n                </div>\n            </div>           \n        </div>\n        <div slot="footer"></div>\n    </Modal>\n</div>'});