"use strict";Vue.component("source-list",{props:{config:{type:Object,require:!1,default:function(){return!1}},code:{default:function(){return""}},showModal:{default:function(){return!1}}},data:function(){var i=this;return{selected:[],body:{hasCreateTestDocument:0,startTime:"",endTime:"",documentCode:"",upstreamSourceCode:"",date:""},base_config:{colNames:["操作","送检编号","源单单号","单据日期","业务类型","商品类型"],colModel:[{name:"codes",index:"invdate",width:80,align:"center",formatter:function(e,t,n,o){return $(document).on("click",".select"+n.documentCode,function(){i.doSelect(e,t,n,o)}),'<a type="primary" class="select'+n.documentCode+'">选取</a>'}},{name:"documentCode",width:180,align:"center",sort:!1},{name:"upstreamSourceCode",width:180,align:"center",sort:!1},{name:"sendTestTime",width:165,align:"center",sort:!1},{name:"businessType",width:165,align:"center"},{name:"productTypeName",width:165,align:"center"}],jsonReader:{root:"data.list",total:"data.totalPage",records:"data.totalCount",cell:"list"},prmNames:{page:"page",rows:"limit"},mtype:"POST",contentType:"application/json",datatype:"json",styleUI:"Bootstrap",rownumbers:!0,pagination:!0,multiselectWidth:50,viewrecords:!0,rowNum:10,rowList:[10,30,50],pager:"#my_pager_id",url:contextPath+"/documentController/list/",onPaging:function(){}}}},methods:{doSelect:function(e,t,n,o){console.log(e,t,n,o),this.$emit("input",n),this.$emit("sure")},init:function(){jQuery("#my_table_id").jqGrid(this.base_config)},clear:function(){this.body={documentCode:"",date:"",startTime:"",upstreamSourceCode:"",endTime:""}},search:function(){var e=$("#my_table_id"),t={postData:Object.assign({documentType:this.code},this.body)};e.jqGrid("clearGridData"),e.jqGrid("setGridParam",t).trigger("reloadGrid")},cancel:function(){this.$emit("cancel")},changeDate:function(e){this.body.startTime=e[0].replace(/\//g,"-")+" 00:00:00",this.body.endTime=e[1].replace(/\//g,"-")+" 23:59:59"}},mounted:function(){this.init()},watch:{code:{handler:function(){this.search()}}},template:'<div>\n            <Modal\n            @on-ok="doSelect"\n            @on-cancel="cancel"\n        class-name="source-list"\n        v-model="showModal"\n        width="95"\n        title="选择源单信息">\n        <div class="content clearfix">\n            <div>\n                <div>\n                    <i-form :model="body" label-width="80">\n                        <row>\n                            <i-col span="6">\n                                <form-item label="送检编号">\n                                    <i-input v-model="body.documentCode"></i-input>\n                                </form-item>\n                            </i-col>\n                             <i-col span="6">\n                                <form-item label="源单单号">\n                                    <i-input v-model="body.upstreamSourceCode"></i-input>\n                                </form-item>\n                            </i-col>\n                            <i-col span="7">\n                                <form-item label="单据日期">                       \n                                    <date-picker @on-change="changeDate" format="yyyy/MM/dd" v-model="body.date" type="daterange" placement="bottom-end" placeholder="Select date"></date-picker>\n                                </form-item>\n                            </i-col>\n                            <i-col span="5">\n                                <ht-btns @clear="clear" @search="search" style="margin-left:20px;"></ht-btns>\n                            </i-col>\n                        </row>\n                    </i-form>                 \n                </div>\n                <div class="jqGrid_wrapper">\n                    <table id="my_table_id"></table> \n                    <div id="my_pager_id"></div>\n                </div>\n            </div>           \n        </div>\n    </Modal>\n</div>'});