"use strict";var SALEPRICELISTVM=new Vue({el:"#sale-price-list",data:function(){var l=this;return{isHideSearch:!0,isHideList:!0,reload:!1,selected:[],dataValue:"",openTime:"",body:{name:"",createName:"",startTime:"",endTime:"",isDel:1},data_config:{url:contextPath+"/saleStonePriceController/listByPage",colNames:["id","石价表编号","石价表名称","创建日期","创建人"],colModel:[{name:"id",index:"id",hidden:!0},{name:"stonePriceNo",index:"stonePriceNo",width:250,align:"left",formatter:function(e,t,a,n){var i=".detail"+e;return $(document).off("click",i).on("click",i,function(){l.detailClick({value:e,grid:t,rows:a,state:n})}),'<a class="detail'+e+'">'+e+"</a>"}},{name:"name",index:"name",width:250,align:"left"},{name:"createTime",index:"createTime",width:250,align:"left",formatter:function(e,t,a,n){return new Date(e).format("yyyy-MM-dd")}},{name:"createName",index:"createName",width:250,align:"left"}]}}},methods:{changeDate:function(e){this.body.startTime=""==e[0]?"":e[0].replace(/\//g,"-")+" 00:00:00",this.body.endTime=""==e[1]?"":e[1].replace(/\//g,"-")+" 23:59:59"},search:function(){console.log("================="),this.reload=!this.reload},clear:function(){this.body={name:"",createName:"",startTime:"",endTime:"",isDel:1},this.dataValue=[],console.log(this.body)},detailClick:function(e){var t=e.rows.id;window.parent.activeEvent({name:"普通销售石价表-查看",url:contextPath+"/sale/sale-price/sale-price-add.html",params:{id:t}})},refresh:function(){this.clear(),this.reload=!this.reload},add:function(){window.parent.activeEvent({name:"普通销售石价表-新增",url:contextPath+"/sale/sale-price/sale-price-add.html",params:""})},deleteData:function(){var t=this;0!==t.selected.length?(console.log(t.selected),$.ajax({type:"POST",url:contextPath+"/saleStonePriceController/deleteBatch",contentType:"application/json",data:JSON.stringify(t.selected),dataType:"json",success:function(e){"100100"===e.code?t.$Modal.success({title:"提示",content:"删除成功!"}):t.$Modal.warning({title:"提示",content:"删除失败!"}),t.refresh()},error:function(e){t.$Modal.warning({title:"提示",content:"服务器出错!"})}})):this.$Modal.warning({title:"提示",content:"请至少选择一条记录进行删除"})},modify:function(){if(!ht.util.hasValue(this.selected,"array"))return this.$Modal.warning({title:"提示",content:"请先选择一条记录"}),!1;if(1<this.selected.length)return this.$Modal.warning({title:"提示",content:"最多只能选择一条记录"}),!1;var e=this.selected[0];$.isEmptyObject(e)||(console.log(e),window.parent.activeEvent({name:"普通销售石价表-修改",url:contextPath+"/sale/sale-price/sale-price-add.html",params:{id:e}}))},cancel:function(){window.parent.closeCurrentTab({name:"普通销售石价表",exit:!0,openTime:this.openTime})}},mounted:function(){this.openTime=window.parent.params.openTime}});