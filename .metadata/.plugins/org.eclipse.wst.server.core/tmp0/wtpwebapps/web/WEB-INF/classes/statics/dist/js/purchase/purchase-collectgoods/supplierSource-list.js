"use strict";Vue.component("supplier-source-list",{props:{config:{type:Object,require:!1,default:function(){return!1}},code:{default:function(){return""}},showModal:{default:function(){return!1}},url:{default:function(){return"/supplier/list"}}},data:function(){var n=this;return{selected:[],supplier:{supplierName:"",supplierCode:""},base_supplier_config:{colNames:["操作","供应商名称","供应商编码"],colModel:[{name:"id",index:"invdate",width:100,align:"center",formatter:function(e,i,t,r){return $(document).off("click",".selectSupplier"+t.id).on("click",".selectSupplier"+t.id,function(){n.doSelect(e,i,t,r)}),'<a type="primary" class="selectSupplier'+t.id+'">选取</a>'}},{name:"supplierName",index:"name",width:200,align:"center",sort:!1},{name:"supplierCode",index:"code",width:200,align:"center",sort:!1}],jsonReader:{root:"data.list",total:"data.totalPage",records:"data.totalCount",cell:"list"},prmNames:{page:"page",rows:"limit"},mtype:"POST",contentType:"application/json",datatype:"json",styleUI:"Bootstrap",rownumbers:!0,pagination:!0,multiselectWidth:100,viewrecords:!0,rowNum:10,rowList:[10,30,50],pager:"#supplier_pager_id",onPaging:function(){}}}},methods:{doSelect:function(e,i,t,r){this.$emit("input",t),this.$emit("sure")},init:function(){jQuery("#supplier_table_id").jqGrid(this.base_supplier_config)},clear:function(){this.supplier={supplierName:"",supplierCode:""};var e={postData:Object.assign(this.supplier)};jQuery("#supplier_table_id").jqGrid("clearGridData"),jQuery("#supplier_table_id").jqGrid("setGridParam",e).trigger("reloadGrid")},search:function(){var e=$("#supplier_table_id"),i={postData:Object.assign(this.supplier)};e.jqGrid("clearGridData"),e.jqGrid("setGridParam",i).trigger("reloadGrid")},reInit:function(){this.base_supplier_config.url=contextPath+this.url;var e=$("#jqGrid_supplier");e.empty();$("<table id=supplier_table_id></table>").appendTo(e),$("<div id=supplier_pager_id></div>").appendTo(e),this.init()},cancel:function(){this.clear(),this.$emit("cancel")}},mounted:function(){this.base_supplier_config.url=contextPath+this.url,this.init()},watch:{url:{handler:function(){this.reInit()}}},template:'<div>\n            <Modal\n            width="680"\n            @on-ok="doSelect"\n            @on-cancel="cancel"\n        class-name="source-list"\n        v-model="showModal"\n        title="选择供应商">\n        <div class="content clearfix">\n           <div>\n             <div>\n                  <i-form :model="supplier" style="display:inline-block; margin-top: 10px;" :label-width="80">\n                    <form-item label="供应商名称">\n                        <i-input v-model="supplier.supplierName"></i-input>\n                    </form-item>\n                     <form-item label="供应商编码">\n                        <i-input v-model="supplier.supplierCode"></i-input>\n                    </form-item>\n                    <ht-btns @clear="clear" @search="search"></ht-btns>\n                  </i-form>\n            </div>\n            <div class="jqGrid_wrapper" id="jqGrid_supplier" >\n                <table id="supplier_table_id"></table> \n                <div id="supplier_pager_id"></div>\n            </div>\n            </div>\n        </div>\n    </Modal>\n</div>'});