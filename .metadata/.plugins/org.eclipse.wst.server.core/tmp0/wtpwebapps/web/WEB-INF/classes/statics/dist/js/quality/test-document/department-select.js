"use strict";Vue.component("department-select",{props:{config:{type:Object,require:!1,default:function(){return!1}},showModal:{default:function(){return!1}}},data:function(){var i=this;return{selected:[],body:{code:"",date:""},nodeData:[{id:1,pId:0,name:"1001 库存现金",open:!0}],treeSetting:{callback:{onClick:this.clickEvent}},department_config:{colNames:["操作","部门编码","部门名称"],colModel:[{name:"codes",index:"invdate",width:140,align:"center",formatter:function(e,t,n,o){return $(document).on("click",".select"+n.documentCode,function(){i.doSelect(e,t,n,o)}),'<a type="primary" class="select'+n.documentCode+'">选取</a>'}},{name:"documentCode",width:140,align:"center",sort:!1},{name:"sendTestTime",width:140,align:"center",sort:!1}],jsonReader:{root:"data.list",total:"data.totalPage",records:"data.totalCount",cell:"list"},prmNames:{page:"page",rows:"limit"},mtype:"POST",contentType:"application/json",datatype:"json",styleUI:"Bootstrap",rownumbers:!0,pagination:!0,multiselectWidth:50,viewrecords:!0,rowNum:10,rowList:[10,30,50],pager:"#department_pager_id",url:contextPath+"/testDocument/getCurrentUserDeptInfo",onPaging:function(){}}}},methods:{getTreeData:function(){var t=this;$.ajax({type:"POST",url:contextPath+"/testDocument/getCurrentUserDeptInfo",contentType:"application/json",dataType:"json",success:function(e){t.nodeData=e.data},error:function(e){t.$Spin.hide(),console.log("服务器出错")}})},doSelect:function(e,t,n,o){console.log(e,t,n,o),this.$emit("input",n.documentCode),this.$emit("sure")},init:function(){jQuery("#department_table_id").jqGrid(this.department_config)},clear:function(){this.body={code:"",date:""}},search:function(){var e=$("#department_table_id"),t={postData:this.body};e.jqGrid("clearGridData"),e.jqGrid("setGridParam",t).trigger("reloadGrid")},clickEvent:function(e,t,n){console.log(e),console.log(t),console.log(n)},cancel:function(){alert(333),this.$emit("sure")}},mounted:function(){this.getTreeData(),this.init()},template:'<div>\n            <Modal\n            @on-ok="doSelect"\n            @on-cancel="cancel"\n        class-name="source-list"\n        v-model="showModal"\n        title="选择部门">\n        <div>\n        <div class="tree" style="display: inline-block; max-width:200px;">\n            <ht-tree :node-data="nodeData" ref="my_tree" :setting="treeSetting"></ht-tree>\n        </div>\n        <div class="content clearfix" style="display: inline-block">\n           <div style="width: 700px;border: 1px solid #ccc;">\n              <div class="jqGrid_wrapper">\n                <table id="department_table_id"></table> \n                <div id="department_pager_id"></div>\n            </div>\n            </div>\n           \n        </div>\n</div>\n    </Modal>\n</div>'});