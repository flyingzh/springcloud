"use strict";new Vue({el:"#bank-statement-report",data:function(){return{openTime:"",displayCurrencyType:"3",formData:{datePicker:(new Date).format("yyyy-MM-dd"),queryDate:(new Date).format("yyyy-MM-dd"),isDisplayDisabledSubject:!1,isDisplayDetail:!0,isDisplayCount:!0,isDisplayTotal:!0},filterVisible:!1,base_config:{multiselect:!0,mtype:"POST",styleUI:"Bootstrap",contentType:"application/json;charset=utf-8",url:contextPath+"/bankStatement/getBankStatement",datatype:"json",jsonReader:{root:"data",cell:"data",repeatitems:!1},viewrecords:!0,rowNum:99999},colNames:[],colModel:[],tableHeaders:[],printModal:!1,printInfo:{}}},mounted:function(){this.initMethod(),this.openTime=window.parent.params&&window.parent.params.openTime},methods:{initMethod:function(){this.delTable(),this.setTableHeader()},setTableHeader:function(){"1"==this.displayCurrencyType?(this.colNames=["科目代码","科目名称","币别","银行名称","银行账号","昨日余额","今日借方","今日贷方","今日余额"],this.colModel=[{name:"subjectCode",width:100,formatter:function(t,a,e,n){return null==t||0==t?"":t}},{name:"subjectName",width:150},{name:"currencyName",width:80},{name:"bankName",width:150},{name:"bankAccount",width:150},{name:"yesterdayBalanceFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":new t.toFixed(2)}},{name:"debitAmountFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"creditAmountFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"todayBalanceFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}}],this.base_config.height=$(window).height()-120,this.tableHeaders=[]):"2"==this.displayCurrencyType?(this.colNames=["科目代码","科目名称","币别","银行名称","银行账号","昨日余额","今日借方","今日贷方","今日余额"],this.colModel=[{name:"subjectCode",width:100,formatter:function(t,a,e,n){return null==t||0==t?"":t}},{name:"subjectName",width:150},{name:"currencyName",width:80},{name:"bankName",width:150},{name:"bankAccount",width:150},{name:"yesterdayBalance",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"debitAmount",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"creditAmount",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"todayBalance",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}}],this.base_config.height=$(window).height()-120,this.tableHeaders=[]):("3"==this.displayCurrencyType?(this.colNames=["科目代码","科目名称","币别","银行名称","银行账号","原币","本位币","原币","本位币","原币","本位币","原币","本位币"],this.colModel=[{name:"subjectCode",width:100,formatter:function(t,a,e,n){return null==t||0==t?"":t}},{name:"subjectName",width:150},{name:"currencyName",width:80},{name:"bankName",width:150},{name:"bankAccount",width:150},{name:"yesterdayBalanceFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"yesterdayBalance",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"debitAmountFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"debitAmount",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"creditAmountFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"creditAmount",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"todayBalanceFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"todayBalance",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}}]):(this.colNames=["科目代码","科目名称","币别","银行名称","银行账号","原币","本位币","原币","本位币","原币","本位币","原币","本位币"],this.colModel=[{name:"subjectCode",width:100,formatter:function(t,a,e,n){return null==t||0==t?"":t}},{name:"subjectName",width:150},{name:"currencyName",width:80},{name:"bankName",width:150},{name:"bankAccount",width:150},{name:"yesterdayBalanceFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"yesterdayBalance",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"debitAmountFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"debitAmount",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"creditAmountFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"creditAmount",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"todayBalanceFor",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}},{name:"todayBalance",width:120,formatter:function(t,a,e,n){return null==t||0==t?"":t.toFixed(2)}}]),this.tableHeaders=[{startColumnName:"yesterdayBalanceFor",numberOfColumns:2,titleText:"昨日余额"},{startColumnName:"debitAmountFor",numberOfColumns:2,titleText:"今日借方"},{startColumnName:"creditAmountFor",numberOfColumns:2,titleText:"今日贷方"},{startColumnName:"todayBalanceFor",numberOfColumns:2,titleText:"今日余额"}],this.base_config.height=$(window).height()-160),this.jqGridInit(this.colNames,this.colModel,this.tableHeaders)},delTable:function(){$("#grid").empty();var t=$(".jqGrid_wrapper");t.empty(),$('<table id="grid"></table>').appendTo(t)},jqGridInit:function(t,a,i){var o=this,e=Object.assign({},o.base_config,{postData:{queryDate:o.formData.queryDate,isDisplayDisabledSubject:o.formData.isDisplayDisabledSubject,isDisplayDetail:o.formData.isDisplayDetail,isDisplayCount:o.formData.isDisplayCount,isDisplayTotal:o.formData.isDisplayTotal},colNames:t,colModel:a,dataType:"local",pager:"#page",loadComplete:function(t){if(null!=t&&null!=t.data)for(var a in t.data)null!=t.data[a].yesterdayBalanceFor&&0!=t.data[a].yesterdayBalanceFor&&(t.data[a].yesterdayBalanceFor=t.data[a].yesterdayBalanceFor.toFixed(2)),null!=t.data[a].yesterdayBalance&&0!=t.data[a].yesterdayBalance&&(t.data[a].yesterdayBalance=t.data[a].yesterdayBalance.toFixed(2)),null!=t.data[a].debitAmountFor&&0!=t.data[a].debitAmountFor&&(t.data[a].debitAmountFor=t.data[a].debitAmountFor.toFixed(2)),null!=t.data[a].debitAmount&&0!=t.data[a].debitAmount&&(t.data[a].debitAmount=t.data[a].debitAmount.toFixed(2)),null!=t.data[a].creditAmountFor&&0!=t.data[a].creditAmountFor&&(t.data[a].creditAmountFor=t.data[a].creditAmountFor.toFixed(2)),null!=t.data[a].creditAmount&&0!=t.data[a].creditAmount&&(t.data[a].creditAmount=t.data[a].creditAmount.toFixed(2)),null!=t.data[a].todayBalanceFor&&0!=t.data[a].todayBalanceFor&&(t.data[a].todayBalanceFor=t.data[a].todayBalanceFor.toFixed(2)),null!=t.data[a].todayBalance&&0!=t.data[a].todayBalance&&(t.data[a].todayBalance=t.data[a].todayBalance.toFixed(2));o.lodoPList=t.data||[],jQuery("#grid").jqGrid("destroyGroupHeader"),jQuery("#grid").jqGrid("setGroupHeaders",{useColSpanStyle:!0,groupHeaders:i});var e=jQuery("#grid").jqGrid("getRowData"),n=$("#grid").jqGrid("getDataIDs");e.push($("#grid").jqGrid("getRowData",n[n.length-1]))},gridComplete:function(){}});jQuery("#grid").jqGrid(e)},open:function(){this.filterVisible=!0},refresh:function(){this.query()},query:function(){null!=this.formData.queryDate&&""!=this.formData.queryDate&&this.initMethod(),this.filterVisible=!1},exportData:function(){var t=this;window.open(contextPath+"/bankStatement/exportBankStatement?queryDate="+t.formData.queryDate+"&displayCurrencyType="+t.displayCurrencyType+"&isDisplayDisabledSubject="+t.formData.isDisplayDisabledSubject+"&isDisplayDetail="+t.formData.isDisplayDetail+"&isDisplayCount="+t.formData.isDisplayCount+"&isDisplayTotal="+t.formData.isDisplayTotal)},print:function(){var a=this;if(console.log(a.lodoPList,"=========that.lodoPList"),a.lodoPList&&a.lodoPList.length)if("1"==a.displayCurrencyType){var t={title:"银行存款日报表",template:1,titleInfo:[{name:"日期",val:this.formData.queryDate},{name:"币别",val:"显示原币"},{name:"禁用科目",val:1==this.formData.isDisplayDisabledSubject?"显示":"不显示"},{name:"明细科目",val:1==this.formData.isDisplayDetail?"显示":"不显示"},{name:"币别小计",val:1==this.formData.isDisplayCount?"显示":"不显示"},{name:"总计",val:1==this.formData.isDisplayTotal?"显示":"不显示"}],colNames:[{name:"科目代码",col:"subjectCode"},{name:"科目名称",col:"subjectName"},{name:"币别",col:"currencyName"},{name:"银行名称",col:"bankName"},{name:"银行账号",col:"bankAccount"},{name:"昨日余额",col:"yesterdayBalanceFor",sum:!0},{name:"今日借方",col:"debitAmountFor",sum:!0},{name:"今日贷方",col:"creditAmountFor",sum:!0},{name:"今日余额",col:"todayBalanceFor",sum:!0}],styleCss:"",colMaxLenght:9,totalRow:!1,data:a.lodoPList};a.printInfo=t,a.printModalShow(!0)}else if("2"==a.displayCurrencyType){t={title:"银行存款日报表",template:1,titleInfo:[{name:"日期",val:this.formData.queryDate},{name:"币别",val:"显示本位币"},{name:"禁用科目",val:1==this.formData.isDisplayDisabledSubject?"显示":"不显示"},{name:"明细科目",val:1==this.formData.isDisplayDetail?"显示":"不显示"},{name:"币别小计",val:1==this.formData.isDisplayCount?"显示":"不显示"},{name:"总计",val:1==this.formData.isDisplayTotal?"显示":"不显示"}],colNames:[{name:"科目代码",col:"subjectCode"},{name:"科目名称",col:"subjectName"},{name:"币别",col:"currencyName"},{name:"银行名称",col:"bankName"},{name:"银行账号",col:"bankAccount"},{name:"昨日余额",col:"yesterdayBalance",sum:!0},{name:"今日借方",col:"debitAmount",sum:!0},{name:"今日贷方",col:"creditAmount",sum:!0},{name:"今日余额",col:"todayBalance",sum:!0}],styleCss:"",colMaxLenght:9,totalRow:!1,data:a.lodoPList};a.printInfo=t,a.printModalShow(!0)}else{var e=a.lodoPList,n="";'\n                    <tr class=\'thCs\'>\n                        <th rowspan="2" style="width: 7%">科目代码</th>\n                        <th rowspan="2" style="width: 7%">科目名称</th>\n                        <th rowspan="2" style="width: 6%">币别</th>\n                        <th rowspan="2" style="width: 7%">银行名称</th>\n                        <th rowspan="2" style="width: 7%">银行账号</th>\n                        <th colspan="2" style="width: 12%">昨日余额</th>\n                        <th colspan="2" style="width: 12%">今日借方</th>\n                        <th colspan="2" style="width: 12%">今日贷方</th>\n                        <th colspan="2" style="width: 12%">今日余额</th>\n                    </tr>\n                    <tr class=\'thCs\'>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                    </tr>\n                ',e.forEach(function(t){n+="\n                        <tr>\n                            <td>"+a._nullData(t.subjectCode)+"</td>\n                            <td>"+a._nullData(t.subjectName)+"</td>\n                            <td>"+a._nullData(t.currencyName)+"</td>\n                            <td>"+a._nullData(t.bankName)+"</td>\n                            <td>"+a._nullData(t.bankAccount)+"</td>\n                            <td>"+a._nullData(t.yesterdayBalanceFor)+"</td>\n                            <td>"+a._nullData(t.yesterdayBalance)+"</td>\n                            <td>"+a._nullData(t.debitAmountFor)+"</td>\n                            <td>"+a._nullData(t.debitAmount)+"</td>\n                            <td>"+a._nullData(t.creditAmountFor)+"</td>\n                            <td>"+a._nullData(t.creditAmount)+"</td>\n                            <td>"+a._nullData(t.todayBalanceFor)+"</td>\n                            <td>"+a._nullData(t.todayBalance)+"</td>\n                        </tr>\n                    "});var i={title:"银行存款日报表",template:12,data:[],colMaxLenght:12,titleInfo:[{name:"日期",val:this.formData.queryDate},{name:"币别",val:"显示原币和本位币"},{name:"禁用科目",val:1==this.formData.isDisplayDisabledSubject?"显示":"不显示"},{name:"明细科目",val:1==this.formData.isDisplayDetail?"显示":"不显示"},{name:"币别小计",val:1==this.formData.isDisplayCount?"显示":"不显示"},{name:"总计",val:1==this.formData.isDisplayTotal?"显示":"不显示"}],tbodyInfo:{theadTX:'\n                    <tr class=\'thCs\'>\n                        <th rowspan="2" style="width: 7%">科目代码</th>\n                        <th rowspan="2" style="width: 7%">科目名称</th>\n                        <th rowspan="2" style="width: 6%">币别</th>\n                        <th rowspan="2" style="width: 7%">银行名称</th>\n                        <th rowspan="2" style="width: 7%">银行账号</th>\n                        <th colspan="2" style="width: 12%">昨日余额</th>\n                        <th colspan="2" style="width: 12%">今日借方</th>\n                        <th colspan="2" style="width: 12%">今日贷方</th>\n                        <th colspan="2" style="width: 12%">今日余额</th>\n                    </tr>\n                    <tr class=\'thCs\'>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                        <th style="width: 6%">原币</th>\n                        <th style="width: 6%">本位币</th>\n                    </tr>\n                ',tbodyTX:n,tfootTX:""}};htPrint(i)}else a.$Message.info({content:"无打印数据",duration:3})},printModalShow:function(t){this.printModal=t},_nullData:function(t){return t||""},cancel:function(){this.filterVisible=!1;window.parent.closeCurrentTab({name:"银行存款日报表",openTime:this.openTime,url:this.openTime,exit:!0})},dateChange:function(t){console.log(t);this.formData.queryDate=t}}});