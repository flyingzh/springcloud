"use strict";var _methods,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};function _defineProperty(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var purchaseGoodDeliver=new Vue({el:"#purchaseGoodDeliver",data:function(){var e;return _defineProperty(e={productDetailModal:{showModal:!1,ids:{goodsId:"",commodityId:"",documentType:"P_APPLY_DELIVER"}},productDetailModal2:{showModal:!1,ids:{goodsId:"",commodityId:"",documentType:"W_STOCK_IN"}},boeType:"P_APPLY_DELIVER",productTypeList:[],productDetailList:[],purchaseGoodsList:[],salesmanList:[],salesmanId:null,empCode:"",salesmanName:"",supplierName:"",deliveryType:[],logisticsMode:"",isSaveDisable:!1,isSubmitDisable:!1,isAddDisable:!0,isSourceEdit:!1,isDelDisable:!1,isLogisticsModeDisable:!1,isSalesManDisable:!1,isDeliverGoodsWeightDisable:!1,isDeliverGoodsCountDisable:!1,isRemarkDisable:!1,isRead:!1,isSupplierDisable:!1,isGoodsCodeDisable:!0,isHint:!0,selectTab:!0,selectedIndex1:0,showSupplierModal:!1,isFromList:!1,modalTrigger:!1,unSourceAdd:!1,modalType:"",selectSupplier:"",showSupplier:!1,steplist:[],approvalTableData:[],storageList:[],wareHouse:[],locationMap:[],tabVal:"tab1",supplierCode:"",unitMap:{},supplierId2:null,supplierName2:null,supplierCode2:null,reviewedName:"",reviewedDate:null,goodsTypeName:"",purchase:{id:"",dataSources:"",orderStatus:"",businessTypeId:"",orderNo:"",purchaseDate:"",goodsTypeName:"",goodsGroupPath:"",organizationId:"",salesmanName:"",supplierId:"",supplierCode:"",supplierName:"",defaultContact:"",phone:"",concreteAddress:"",commodityId:"",createName:"",createTime:"",updateName:"",updateTime:"",auditor:"",auditTime:"",purchaseCount:"",purchaseWeight:"",goodList:[],delGoodIds:[]},codeTabs:"tab1",applyOrder:{goodList:[],applyCount:"",applyWeight:"",orderStatus:1,remark:"",applyUserId:"",delGoodIds:[],organizationId:"",updateId:"",applyDeptId:"",limit:"",startTime:"",id:"",orderNo:"",estimatePurchaseMoney:"",estimatePurchaseDate:"",auditor:"",updateTime:"",updateName:"",version:"",goodsType:"",applyUserName:"",auditorId:"",createTime:"",goodsTypeId:"",applyDeptName:"",auditTime:"",createId:"",endTime:"",applyDate:"",isDel:1,createName:"",goodsGroupPath:""},purchaseDeliverEntitys:{orderStatus:1,orderNo:"",goodsBarcodeId:null,goodsBarcode:"",deliveryName:"",deliveryDate:this.getNowDate(),supplierId:this.supplierId,goodsTypePath:"",goodsTypeName:"",deliverWeight:0,deliverCount:0,dataSource:2,delStatus:1,logisticsMode:"",reviewedName:"",reviewedDate:null,createId:null,createName:"",updateId:null,businessType:1,updateName:"",createTime:this.getNowDate(),updateTime:this.getNowDate(),organizationId:window.parent.userInfo.organId,isSave:!1,isSubmit:!1,isPurchaseDeliverType:!1,salesmanId:1,salesmanName:"",purchaseGoodsList:[]},selectedIndex:0,count2:0,weight2:0,totalWeight:0,transferGoodsNum:0,testTotalWeight:0,testTransferGoodsNum:0,remark:"",deliveryName:"",username:window.parent.userInfo.username,deliveryDate:null,createTime:null,updateTime:null,isEdit3:!1,isSave:!0,createName:null,updateName:null,auditor:null,auditTime:null,typeValue:"",isMyTable2:!0,goodlist:[],goodlist2:[],configList:[{documentNo:""}],isChangeTransferGoodsNum:!1,isChangeTotalWeight:!1,sourceType:{"销售出仓":"调拨单-销售出仓","采购退库":"调拨单-采购退库","采购送料":"调拨单-采购送料","采购料结":"调拨单-采购料结","受托加工送料":"调拨单-受托加工送料","受托加工退料":"调拨单-受托加工退料"},goodsTypeId:{1:"金料",2:"石料",3:"配件"},supplierId:null,selected:[],openTime:"",isSearchHide:!0,isTabulationHide:!0,isFirstData:!1,isLastData:!1,isHide:!0,orgName:""},"selected",[]),_defineProperty(e,"needReload",!1),_defineProperty(e,"deliverId",null),_defineProperty(e,"deliverId2",""),_defineProperty(e,"deliverOrderNo",null),_defineProperty(e,"isShow",!1),_defineProperty(e,"docType",[]),_defineProperty(e,"dataValue",[]),_defineProperty(e,"categoryType",[]),_defineProperty(e,"commodityCategoty",[]),_defineProperty(e,"reload",!1),_defineProperty(e,"testBusinessType",null),_defineProperty(e,"testSupplierId",null),_defineProperty(e,"testGoodsTypeId",null),_defineProperty(e,"deptList",[]),_defineProperty(e,"unitList",[]),_defineProperty(e,"productDetailList",[{options:[]}]),_defineProperty(e,"productDetailListTemp",{goodsEntities:[]}),_defineProperty(e,"productDetailAttr",{goldBoms:[],stonesBoms:[],partBoms:[],assistAttrs:[],stoneHeader:["颜色","净度","分段","形状","切工","荧光","奶色","咖色"],goldHeader:[],partHeader:[],assistAttrsHeader:[]}),_defineProperty(e,"productDetailAttrTemp",null),_defineProperty(e,"needReload",!1),_defineProperty(e,"showProductProperty",!1),_defineProperty(e,"approveComment",!1),_defineProperty(e,"rejectComment",!1),_defineProperty(e,"approvement",{receiptsId:"",approvalResult:"1",approvalInfo:""}),_defineProperty(e,"rejectement",{receiptsId:"",approvalResult:"0",approvalInfo:""}),_defineProperty(e,"confirmConfig",{showConfirm:!1,title:"提示",content:"请点击确认",onlySure:!0,success:!0}),_defineProperty(e,"body",{goodsTypeId:null,documentNo:"",goodsType:"",supplierId:null,startTime:"",endTime:"",orderStatus:null,orderNo:""}),_defineProperty(e,"data_config_approval",{url:"",colNames:["操作类型","开始级次","目的级次","审批人","审批意见","审批时间"],colModel:[{name:"approvalResult",width:200,align:"left",formatter:function(e,o,t,i){return 1==e?"审核":"驳回"}},{name:"currentLevel",width:200,align:"left",formatter:function(e,o,t,i){return 0===e?"开始":1===e?"一级审核":2===e?"二级审核":3===e?"三级审核":4===e?"四级审核":5===e?"五级审核":6===e?"六级审核":"结束"}},{name:"nextLevel",width:200,align:"left",formatter:function(e,o,t,i){return-1===t.approvalResult||0===t.approvalResult&&void 0===t.nextLevel?"开始":"0"===e?"开始":"1"===e?"一级审核":"2"===e?"二级审核":"3"===e?"三级审核":"4"===e?"四级审核":"5"===e?"五级审核":"6"===e?"六级审核":"结束"}},{name:"createName",width:200,align:"left"},{name:"approvalInfo",width:220,align:"left"},{name:"createTime",width:250,align:"left"}],jsonReader:{root:"data.data"},multiselect:!1}),_defineProperty(e,"steplist",[]),_defineProperty(e,"stepData",[{currentLevel:0,subtitle:"开始"},{currentLevel:1,subtitle:"一级审批"},{currentLevel:2,subtitle:"二级审批"},{currentLevel:3,subtitle:"三级审批"},{currentLevel:4,subtitle:"四级审批"},{currentLevel:5,subtitle:"五级审批"},{currentLevel:6,subtitle:"六级审批"},{currentLevel:7,subtitle:"结束"}]),_defineProperty(e,"currentStep",""),_defineProperty(e,"nextStep",""),e},methods:(_methods={isEdit:function(e,o){eventHub.$emit("isEdit",e)},saveAccess:function(e,o,t){eventHub.$emit("saveFile",e,o)},getAccess:function(e,o,t){eventHub.$emit("queryFile",e,o)},refresh:function(){window.location.reload()},refresh1:function(){window.location.reload()},refresh2:function(){window.location.reload()},refresh3:function(){window.location.reload()},changeDate:function(e){this.body.startTime=e[0].replace(/\//g,"-")+" 00:00:00",this.body.endTime=e[1].replace(/\//g,"-")+" 23:59:59"},changeDeliveryDate:function(e){this.body.startTime=e[0].replace(/\//g,"-")+" 00:00:00",this.body.endTime=e[1].replace(/\//g,"-")+" 23:59:59"},hideSearch:function(){this.isHide=!this.isHide,this.isSearchHide=!this.isSearchHide,$(".chevron").css("top","")},hidTabulation:function(){this.isHide=!this.isHide,this.isTabulationHide=!this.isTabulationHide,this.isTabulationHide?$(".chevron").css("top",""):$(".chevron").css("top","83%")},initApproval:function(e){var a=this;$.ajax({type:"post",data:{},dataType:"json",success:function(e){for(var o=e.data.list,t=0;t<o.length;t++)switch(o[t].processLevel){case 1:o[t].processLevel="一级审核";break;case 2:o[t].processLevel="二级审核";break;case 3:o[t].processLevel="三级审核";break;case 4:o[t].processLevel="四级审核";break;case 5:o[t].processLevel="五级审核";break;case 6:o[t].processLevel="六级审核"}if(o.unshift({processLevel:"开始"}),o.push({processLevel:"结束"}),(a.steplist=o)[1].currentLevel===e.data.levelLength){for(var i=0;i<o.length;i++)o[i].currentLevel=o.length-1;return!1}for(var s=o[1].currentLevel,r=0;r<a.stepData.length;r++)s===a.stepData[r].currentLevel&&(a.currentStep=a.stepData[r+1].subtitle,a.stepData[r+1].currentLevel===e.data.levelLength?a.nextStep=a.stepData[a.stepData.length-1].subtitle:a.nextStep=a.stepData[r+2].subtitle)}})},add:function(){},save:function(e){purchaseGoodDeliver.isSubmitDisable=!0,purchaseGoodDeliver.isSaveDisable=!0;for(var o={orderStatus:1,orderNo:"",salesmanId:purchaseGoodDeliver.empCode,salesmanName:this.getSalesmanByEmpCode(this.empCode),deliveryDate:this.getNowDate(),supplierId:this.supplierId,supplierName:this.supplierName,goodsTypePath:"",goodsTypeName:"",deliverWeight:0,deliverCount:0,dataSource:2,delStatus:1,businessType:1,logisticsMode:"",businessStatus:1,createId:null,createName:"",createTime:this.getNowDate(),updateId:null,updateName:"",updateTime:this.getNowDate(),organizationId:window.parent.userInfo.organId,isSave:!0,isSubmit:!1,isPurchaseDeliverType:!1,purchaseGoodsList:[]},t=0,i=0,s=this.goodlist,r=0;r<s.length;r++){var a={};a.countingUnit=s[r].countingUnit,a.goldWeight=s[r].goldWeight,a.goodsBarcode=s[r].goodsBarcode,a.goodsCode=s[r].goodsCode,a.goodsName=s[r].goodsName,a.goodsTypeName=s[r].goodsTypeName,a.pictureUrl=s[r].pictureUrl,a.sourceId=s[r].requisitionId,a.sourceNo=s[r].transferNo,a.sourceType=s[r].sourceType,a.reservoirPositionId=s[r].transferOutPositionId,a.warehouseId=s[r].transferOutWarehouse,a.countingUnit=s[r].unitCost,a.weightUnit=s[r].weightUnit,a.goodsMainType=s[r].goodsMainType,a.remark=s[r].remark,a.deliverGoodsWeight=1*s[r].deliverGoodsWeight,i+=a.deliverGoodsWeight,a.deliverGoodsCount=1*s[r].deliverGoodsCount,t+=a.deliverGoodsCount,a.stoneSection="",a.goldColor="",a.stoneColor="",a.stoneClarity="",a.mainStoneWeight="",a.viceStoneWeight="",a.goldWeight="",a.goodsLineNo="",o.purchaseGoodsList.push(a)}1==purchaseGoodDeliver.isSourceEdit&&((o=purchaseGoodDeliver.purchaseDeliverEntitys).purchaseGoodsList=this.goodlist,o.salesmanId=purchaseGoodDeliver.empCode,o.supplierId=this.supplierId,o.supplierName=this.supplierName),o.goodsTypeName=this.goodlist[0].goodsTypeName,o.goodsTypePath=this.goodlist[0].goodsTypePath,o.logisticsMode=this.logisticsMode,o.salesmanName=this.salesmanName,o.deliverCount=t,o.deliverWeight=i,$.ajax({type:"POST",url:"/web/purchaseDeliverController/add",contentType:"application/json",data:JSON.stringify(o),success:function(e){if(console.log(e.code),"100100"==e.code){layer.alert("保存数据成功",{icon:1}),purchaseGoodDeliver.isDelDisable=!0,purchaseGoodDeliver.isEdit("N"),Object.assign(purchaseGoodDeliver.purchaseDeliverEntitys,e.data.data.data);purchaseGoodDeliver.purchaseDeliverEntitys.orderNo;purchaseGoodDeliver.updateName=purchaseGoodDeliver.purchaseDeliverEntitys.updateName,purchaseGoodDeliver.updateTime=purchaseGoodDeliver.purchaseDeliverEntitys.updateTime,purchaseGoodDeliver.saveAccess(purchaseGoodDeliver.purchaseDeliverEntitys.orderNo,purchaseGoodDeliver.boeType)}else layer.alert("保存数据失败",{icon:0})},error:function(e){alert(e)}})},submit:function(){for(var e=!1,o={orderStatus:2,orderNo:"",salesmanId:purchaseGoodDeliver.empCode,salesmanName:this.getSalesmanByEmpCode(this.empCode),deliveryDate:this.getNowDate(),supplierId:this.supplierId,supplierName:this.supplierName,goodsTypePath:"",goodsTypeName:"",deliverWeight:0,deliverCount:0,dataSource:2,delStatus:1,logisticsMode:"",businessType:1,businessStatus:1,createId:null,createName:"",updateId:null,updateName:"",isSave:!1,isSubmit:!0,createTime:null,updateTime:null,organizationId:window.parent.userInfo.organId,purchaseGoodsList:[]},t=[],i=0,s=0,r=this.goodlist,a=0;a<r.length;a++){var d={},l={};d.countingUnit=r[a].countingUnit,d.goldWeight=r[a].goldWeight,d.goodsBarcode=r[a].goodsBarcode,d.goodsCode=r[a].goodsCode,d.goodsName=r[a].goodsName,d.goodsTypeName=r[a].goodsTypeName,d.pictureUrl=r[a].pictureUrl,d.sourceId=r[a].requisitionId,d.sourceNo=r[a].transferNo,d.sourceType=r[a].sourceType,d.reservoirPositionId=r[a].transferOutPositionId,d.warehouseId=r[a].transferOutWarehouse,d.countingUnit=r[a].unitCost,d.weightUnit=r[a].weightUnit,d.goodsMainType=r[a].goodsMainType,d.remark=this.remark,d.deliverGoodsWeight=1*r[a].deliverGoodsWeight,s+=d.deliverGoodsWeight,d.deliverGoodsCount=1*r[a].deliverGoodsCount,i+=d.deliverGoodsCount,d.stoneSection="",d.goldColor="",d.stoneColor="",d.stoneClarity="",d.mainStoneWeight="",d.viceStoneWeight="",d.goldWeight="",d.goodsLineNo="",o.purchaseGoodsList.push(d),l.transferNo=r[a].transferNo,t.push(l)}1==purchaseGoodDeliver.isSourceEdit&&((o=purchaseGoodDeliver.purchaseDeliverEntitys).purchaseGoodsList=this.goodlist,o.salesmanId=purchaseGoodDeliver.empCode,o.supplierId=this.supplierId,o.supplierName=this.supplierName,o.isSubmit=!0),o.orderStatus=2,o.goodsTypeName=this.goodlist[0].goodsTypeName,o.goodsTypePath=this.goodlist[0].goodsTypePath,o.logisticsMode=this.logisticsMode,o.salesmanName=this.salesmanName,o.deliverCount=i,o.deliverWeight=s;var n=purchaseGoodDeliver.goodlist2,p=null;if(2==o.dataSource)for(var u=0;u<n.length;u++)for(var c=n[u].goodsBarcode,h=0;h<r.length;h++){if(c==r[h].goodsBarcode){0==purchaseGoodDeliver.isSourceEdit&&(this.testTransferGoodsNum=1*n[u].transferGoodsNum,this.testTotalWeight=1*n[u].totalWeight),1==purchaseGoodDeliver.isSourceEdit&&(this.testTransferGoodsNum=1*n[u].deliverGoodsCount,this.testTotalWeight=1*n[u].deliverGoodsWeight);var g=1*(p=this.goodlist[h]).deliverGoodsCount,v=/^[1-9]\d*$/;if(!v.test(g))return layer.alert("第"+(h+1)+"行请正确输入！！"),void(this.isSave=!1);if(g>this.testTransferGoodsNum)return layer.alert("第"+(h+1)+"行送料数量不能大于调拨单原始数量！！"),void(this.isSave=!1);var m=1*p.deliverGoodsWeight;if(!(v=/^[+]?[0-9]+(\.[0-9]+)?$/).test(m))return layer.alert("第"+(h+1)+"行请正确输入！！"),void(this.isSave=!1);if(m>this.testTotalWeight)return layer.alert("第"+(h+1)+"行送料数量不能大于调拨单原始重量！！"),void(this.isSave=!1)}}null!=o.supplierName&&""!=o.supplierName?null!=o.salesmanName&&""!=o.salesmanName?null!=o.logisticsMode&&""!=o.logisticsMode?(0==e&&(e=!0),1==e&&(o.deliverCount==purchaseGoodDeliver.weight2&&o.deliverWeight==purchaseGoodDeliver.transferGoodsNum?o.isPurchaseDeliverType=!0:o.isPurchaseDeliverType=!1,$.ajax({type:"POST",url:"/web/purchaseDeliverController/submit",contentType:"application/json",data:JSON.stringify(o),success:function(e){if(console.log(e.code),"100100"==e.code){layer.alert("提交数据成功",{icon:1}),purchaseGoodDeliver.isSubmitDisable=!0,purchaseGoodDeliver.isSaveDisable=!0,purchaseGoodDeliver.isDelDisable=!0,purchaseGoodDeliver.isSalesManDisable=!0,purchaseGoodDeliver.isLogisticsModeDisable=!0,purchaseGoodDeliver.isDeliverGoodsWeightDisable=!0,purchaseGoodDeliver.isDeliverGoodsCountDisable=!0,purchaseGoodDeliver.isRemarkDisable=!0,purchaseGoodDeliver.isEdit("N"),Object.assign(purchaseGoodDeliver.purchaseDeliverEntitys,e.data.data.data);purchaseGoodDeliver.purchaseDeliverEntitys.orderNo;purchaseGoodDeliver.updateName=purchaseGoodDeliver.purchaseDeliverEntitys.updateName,purchaseGoodDeliver.updateTime=purchaseGoodDeliver.purchaseDeliverEntitys.updateTime,purchaseGoodDeliver.saveAccess(purchaseGoodDeliver.purchaseDeliverEntitys.orderNo,purchaseGoodDeliver.boeType)}else layer.alert("提交数据失败",{icon:0})},error:function(e){alert(e)}}))):layer.alert("物流方式未选择!"):layer.alert("业务员未选择!"):layer.alert("供应商未选择!")},unSourceSave:function(){for(var e={id:purchaseGoodDeliver.deliverId,orderStatus:1,orderNo:purchaseGoodDeliver.deliverOrderNo,salesmanId:purchaseGoodDeliver.empCode,salesmanName:this.getSalesmanByEmpCode(this.empCode),deliveryDate:this.getNowDate(),supplierId:this.supplierId2,supplierName:this.supplierName2,goodsTypePath:"",goodsTypeName:"",deliverWeight:0,deliverCount:0,dataSource:1,delStatus:1,logisticsMode:"",businessStatus:1,createId:null,createName:window.parent.userInfo.organName,createTime:this.getNowDate(),updateId:null,updateName:"",updateTime:this.getNowDate(),isPurchaseDeliverType:!1,organizationId:window.parent.userInfo.organId,isSave:!1,isSubmit:!1,purchaseGoodsList:[]},o=0,t=0,i=this.goodlist,s=(this.handlerDataToPost(),0);s<i.length;s++){var r={};this.goodlist[s];r.remark=i[s].remark,r.deliverGoodsWeight=1*i[s].deliverGoodsWeight,t+=r.deliverGoodsWeight,r.deliverGoodsCount=1*i[s].deliverGoodsCount,o+=r.deliverGoodsCount,r.sourceNo=i[s].sourceNo,r.warehouseId=i[s].warehouseId,r.reservoirPositionId=i[s].reservoirPositionId,r.goodsTypeName=i[s].goodsTypeName,r.goodsTypeName=this.typeValue,e.purchaseGoodsList=this.goodlist}0!=e.purchaseGoodsList.length?(e.logisticsMode=this.logisticsMode,e.salesmanName=this.salesmanName,e.deliverCount=o,e.deliverWeight=t,e.goodsTypeName=this.purchaseDeliverEntitys.goodsTypeName,e.goodsTypePath=this.purchaseDeliverEntitys.goodsTypePath,$.ajax({type:"POST",url:"/web/purchaseDeliverController/add",contentType:"application/json",data:JSON.stringify(e),success:function(e){if(console.log(e.code),"100100"==e.code){layer.alert("保存数据成功",{icon:1}),purchaseGoodDeliver.isSubmitDisable=!0,purchaseGoodDeliver.isSaveDisable=!0,Object.assign(purchaseGoodDeliver.purchaseDeliverEntitys,e.data.data.data);purchaseGoodDeliver.purchaseDeliverEntitys.orderNo;purchaseGoodDeliver.updateName=purchaseGoodDeliver.purchaseDeliverEntitys.updateName,purchaseGoodDeliver.updateTime=purchaseGoodDeliver.purchaseDeliverEntitys.updateTime,purchaseGoodDeliver.saveAccess(purchaseGoodDeliver.purchaseDeliverEntitys.orderNo,purchaseGoodDeliver.boeType)}else layer.alert("保存数据失败",{icon:0})},error:function(e){alert(e)}})):layer.alert("请先新增商品信息!")},unSourceSubmit:function(){for(var e={id:purchaseGoodDeliver.deliverId,orderStatus:2,orderNo:purchaseGoodDeliver.deliverOrderNo,salesmanId:purchaseGoodDeliver.empCode,salesmanName:this.getSalesmanByEmpCode(this.empCode),deliveryDate:this.getNowDate(),supplierId:this.supplierId2,supplierName:this.supplierName2,goodsTypePath:"",goodsTypeName:"",deliverWeight:0,deliverCount:0,dataSource:1,delStatus:1,logisticsMode:"",businessStatus:1,createId:null,createName:window.parent.userInfo.organName,createTime:this.getNowDate(),updateId:null,updateName:"",updateTime:this.getNowDate(),isPurchaseDeliverType:!1,organizationId:window.parent.userInfo.organId,isSave:!1,isSubmit:!0,purchaseGoodsList:[]},o=0,t=0,i=this.goodlist,s=0;s<i.length;s++){var r={};this.goodlist[s];r.remark=this.remark,r.deliverGoodsWeight=1*i[s].deliverGoodsWeight,t+=r.deliverGoodsWeight,r.deliverGoodsCount=1*i[s].deliverGoodsCount,o+=r.deliverGoodsCount,e.purchaseGoodsList=this.goodlist}0!=e.purchaseGoodsList.length?(e.orderStatus=2,e.isSubmit=!0,e.logisticsMode=this.logisticsMode,e.salesmanName=this.salesmanName,e.deliverCount=o,e.deliverWeight=t,e.goodsTypeName=this.purchaseDeliverEntitys.goodsTypeName,e.goodsTypePath=this.purchaseDeliverEntitys.goodsTypePath,null!=e.supplierName&&""!=e.supplierName?null!=e.salesmanName&&""!=e.salesmanName?null!=e.logisticsMode&&""!=e.logisticsMode?$.ajax({type:"POST",url:"/web/purchaseDeliverController/submit",contentType:"application/json",data:JSON.stringify(e),success:function(e){if(console.log(e.code),"100100"==e.code){layer.alert("提交数据成功",{icon:1}),purchaseGoodDeliver.isSubmitDisable=!0,purchaseGoodDeliver.isSaveDisable=!0,purchaseGoodDeliver.isSupplierDisable=!0,purchaseGoodDeliver.isLogisticsModeDisable=!0,purchaseGoodDeliver.isSalesManDisable=!0,Object.assign(purchaseGoodDeliver.purchaseDeliverEntitys,e.data.data.data);purchaseGoodDeliver.purchaseDeliverEntitys.orderNo;purchaseGoodDeliver.updateName=purchaseGoodDeliver.purchaseDeliverEntitys.updateName,purchaseGoodDeliver.updateTime=purchaseGoodDeliver.purchaseDeliverEntitys.updateTime,purchaseGoodDeliver.saveAccess(purchaseGoodDeliver.purchaseDeliverEntitys.orderNo,purchaseGoodDeliver.boeType)}else layer.alert("提交数据失败",{icon:0})},error:function(e){alert(e)}}):layer.alert("物流方式未选择!"):layer.alert("业务员未选择!"):layer.alert("供应商未选择!")):layer.alert("请先新增商品信息!")},saveClick:function(e){console.log(e)},approval:function(e){4!=purchaseGoodDeliver.purchaseDeliverEntitys.orderStatus?(this.modalType="approve",this.modalTrigger=!this.modalTrigger):purchaseGoodDeliver.$Modal.warning({title:"提示",content:"单据已审核"})},reject:function(){4!=purchaseGoodDeliver.purchaseDeliverEntitys.orderStatus?(this.modalType="reject",this.modalTrigger=!this.modalTrigger):purchaseGoodDeliver.$Modal.warning({title:"提示",content:"已审核的单据不能驳回!"})},approvalOrRejectCallBack:function(e){if("100100"==e.result.code){var o=e.result.data;purchaseGoodDeliver.purchaseDeliverEntitys.orderStatus=o.orderStatus,purchaseGoodDeliver.reviewedName=o.reviewedName,purchaseGoodDeliver.reviewedDate=o.reviewedDate}else this.$Modal.warning({content:e.result.msg,title:"警告"})},cancel:function(){},exit1:function(){window.parent.closeCurrentTab({name:"采购待送料列表",exit:!0,openTime:this.openTime})},exit2:function(){window.parent.closeCurrentTab({name:"采购送料单",exit:!0,openTime:this.openTime})},exit3:function(){window.parent.closeCurrentTab({name:"采购送料单列表",exit:!0,openTime:this.openTime})},getApproveInfo:function(){},getRejectInfo:function(){},rowClick:function(e,o){var t=this,i=this.goodlist[this.selectedIndex];if(console.log(i),"add"===e&&this.validateProduct()){if(""==purchaseGoodDeliver.typeValue)return void layer.alert("请先选择商品类型！");this.goodlist.push({options:[]}),this.productDetailListTemp.goodsEntities.push({options:[]}),purchaseGoodDeliver.unSourceAdd=!0,this.goodlist.map(function(e,o){Object.assign(t.goodlist[o],{goodsTypeName:t.purchaseDeliverEntitys.goodsTypeName,goodsTypePath:t.purchaseDeliverEntitys.goodsTypePath})})}"del"===e&&(this.goodlist.splice(this.selectedIndex,1),$(".tdInfo").eq(this.selectedIndex).removeClass("ht-selected"))},initGoodCategory:function(e){var r=this,a=[];return e.forEach(function(e){var o=e.customCode,t=e.name,i=e.cateLists,s=e.code;i&&(i=r.initGoodCategory(i)),a.push({value:o,label:t,children:i,code:s})}),a.forEach(function(e){e.children||delete e.children}),a},getNowDate:function(){var e=new Date,o=e.getFullYear(),t=e.getMonth()+1,i=e.getDate(),s=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return 1<=t&&t<=9&&(t="0"+t),0<=i&&i<=9&&(i="0"+i),0<=s&&s<=9&&(s="0"+s),0<=r&&r<=9&&(r="0"+r),0<=a&&a<=9&&(a="0"+a),o+"-"+t+"-"+i+" "+s+":"+r+":"+a},getIndex:function(e){this.selectedIndex=e,$(".tdInfo").eq(this.selectedIndex).addClass("ht-selected").siblings().removeClass("ht-selected")},showProductDetail2:function(e){var o=this;if(this.selectedIndex=e,!this.productDetailListTemp.goodsEntities[e].goodsBarcodeId)return this.$Modal.error({content:"还未选择商品，请先选择商品，再选择明细！"}),!1;alert("this.goodlist[index].goodsBarcodeId==="+this.goodlist[e].goodsBarcodeId);var t={goodsId:this.goodlist[e].goodsBarcodeId,documentType:"P_APPLY_DELIVER"};Object.assign(this.productDetailModal2,{showModal:!0,ids:t}),this.$nextTick(function(){o.$refs.modalRef2.getProductDetail()})},showProductDetail:function(e){var o=this;if(this.selectedIndex=e,!this.goodlist[e].commodityId)return this.$Modal.error({content:"还未选择商品，请先选择商品，再选择明细！"}),!1;var t={goodsId:this.goodlist[e].goodsId,commodityId:this.goodlist[e].commodityId,documentType:"P_APPLY_DELIVER"};Object.assign(this.productDetailModal,{showModal:!0,ids:t}),this.$nextTick(function(){o.$refs.modalRef.getProductDetail()})},validateProduct:function(){var t=!0,i=this;return $.each(this.goodlist,function(e,o){if(o.goodsId)return!0;if("attr_ranges_goods"==o.goodsMainType){if(!o.tBaseBomEntity)return t=!1,i.$Modal.error({content:"第"+(e+1)+"行商品明细未选择，请先选择商品明细！"}),!1}else{if(!o.goodsCode)return t=!1,i.$Modal.error({content:"第"+(e+1)+"行商品编码未选择，请先选择商品编码！"}),!1;if(!o.assistAttrs)return t=!1,i.$Modal.error({content:"第"+(e+1)+"行商品明细未选择，请先选择商品明细！"}),!1}}),t},getInitDataById:function(){var o=this,e=window.parent.params.params.code;e&&$.ajax({type:"POST",url:contextPath+"/tpurchaseapply/info/"+e,dataType:"json",success:function(e){"100100"===e.code?(Object.assign(o.applyOrder,_extends({},e.data)),o.productDetailList=e.data.goodList):this.$Modal.warning({content:"服务器出错"})},error:function(){layer.alert("服务器出错啦")}})},handlerDataToPost:function(){var e={stonesParts:[],materialParts:[],partParts:[],goldParts:[]},t=this.applyOrder;return t.goodList=[JSON.parse(JSON.stringify(e))],console.log(this.goodlist),htHandlerProductDetail(this.goodlist,t,e),this.goodlist.map(function(e,o){t.goodList[o]||(t.goodList[o]={}),Object.assign(t.goodList[o],{commodityId:e.id,pictureUrl:e.pictureUrl,goodsNo:e.goodsNo,goodsName:e.goodsName,goodsMainType:e.goodsMainType,goodsSpecifications:e.goodsSpecifications,countingUnit:e.countingUnit,applyCount:e.applyCount,weightUnit:e.weightUnit,mainStoneWeight:e.mainStoneWeight,applyWeight:e.applyWeight,pricingMethod:e.pricingMethod,price:e.price,amount:e.amount,remark:e.remark,goodsId:e.goodsId})}),t},modalSure:function(e){this.productDetailModalClick(e)},modalSure2:function(e){this.productDetailModalClick2(e)},modalCancel:function(e){this.productDetailModal2.showModal=!1,this.productDetailModal.showModal=!1},productDetailModalClick:function(e){"attr_ranges_goods"===this.goodlist[this.selectedIndex].goodsMainType?Object.assign(this.goodlist[this.selectedIndex],{tBaseBomEntity:e,assistAttrs:null,overEdit:!0}):Object.assign(this.goodlist[this.selectedIndex],{assistAttrs:e,tBaseBomEntity:null,overEdit:!0})},productDetailModalClick2:function(e){"attr_ranges_goods"===this.productDetailListTemp.goodsEntities[this.selectedIndex1].goodsEntity.goodsMainType?Object.assign(this.productDetailListTemp.goodsEntities[this.selectedIndex1].goodsEntity,{tBaseBomEntity:e,assistAttrs:null,overEdit:!0}):Object.assign(this.productDetailListTemp.goodsEntities[this.selectedIndex1].goodsEntity,{assistAttrs:e,tBaseBomEntity:null,overEdit:!0}),this.productDetailModal2.showModal=!1},crolMark:function(e){this.codeTabs=e,this.productDetailList[this.selectedIndex]=$.extend(!0,{},this.productDetailList[this.selectedIndex],{goodsEntities:this.productDetailListTemp.goodsEntities})},getSupplierInfo:function(e){var o=e,t=this;$.ajax({type:"POST",url:contextPath+"/purchaseDeliverController/getSupplierDetail?supplierId="+o,contentType:"application/json",dataType:"json",success:function(e){t.purchase.supplierCode=e.data.supplierCode,t.purchase.supplierName=e.data.supplierName,t.purchase.phone=e.data.phone,t.purchase.defaultContact=e.data.defaultContact,t.purchase.concreteAddress=e.data.concreteAddress},error:function(e){layer.alert("服务器出错")}})},getSelectedItem:function(e,t){var i=this;$.ajax({type:"post",url:contextPath+"/tbasecommodity/getBriefById/"+e.id,dataType:"json",success:function(e){var o=e.data;console.log(o),Object.assign(i.goodlist[t],{goodsCode:o.code,goodsName:o.name,commodityId:o.id,pictureUrl:o.frontPic&&o.frontPic.fdUrl,goodsType:o.categoryName,goodsTypePath:o.categoryCustomCode,custStyleCode:o.custStyleCode,goodsMainType:o.mainType,goodsSpecifications:o.specification,countUnit:o.countUnitId,weightUnit:o.weightUnitId,chargeUnit:o.pricingType,pricingMethod:o.pricingType}),"attr_ranges_gold"===o.mainType&&(i.goodlist[t].goldColor=o.certificateType),i.$forceUpdate()},error:function(){layer.alert("服务器出错啦")}})},getInputValue:function(e,o){var t=this;console.log(e,o,t.purchaseDeliverEntitys.goodsGroupPath);var i={categoryCustomCode:t.purchaseDeliverEntitys.goodsGroupPath,field:e,limit:""};$.ajax({type:"post",url:contextPath+"/tbasecommodity/findByType",data:i,dataType:"json",success:function(e){Object.assign(t.goodlist[o],{options:e.data}),t.$forceUpdate()},error:function(){layer.alert("服务器出错啦")}})},initUnit:function(){var i=this;$.ajax({type:"post",url:contextPath+"/tbaseunit/list",contentType:"application/json",dataType:"json",async:!1,success:function(e){"100100"===e.code?(e.data.map(function(e){var o=e.id,t=e.name;i.unitMap[o]=t}),console.log(i.unitMap)):layer.alert("服务器异常,请联系技术人员！",{icon:0})},error:function(e){layer.alert("网络异常,请联系技术人员！",{icon:0})}})},rcv:function(e,o,t){console.log("dayu",e,o,t),this.purchase.supplierId=e,this.supplierId2=e,this.supplierName2=t,this.purchase.supplierCode=o,this.supplierCode2=o,this.getSupplierInfo(e)},closeSupplierModal:function(e,o,t){console.log(e,o,t),this.showSupplierModal=!1},closeSupplier:function(){this.showSupplier=!1;this.purchaseDeliverEntitys.supplierId=this.selectSupplier.id,this.purchaseDeliverEntitys.supplierName=this.selectSupplier.supplierName}},_defineProperty(_methods,"getSupplierInfo",function(e){var o=e;$.ajax({type:"POST",url:contextPath+"/tpurchaseorder/getSupplierDetail?supplierId="+o,contentType:"application/json",dataType:"json",success:function(e){purchaseGoodDeliver.supplierName=e.data.supplierName},error:function(e){layer.alert("服务器出错")}})}),_defineProperty(_methods,"selectSupplierModal",function(){this.showSupplierModal=!0}),_defineProperty(_methods,"getLogisticMode",function(){this.deliveryType=getCodeList("jxc_jxc_wlfs")}),_defineProperty(_methods,"getSalesman",function(){var o=this;$.ajax({type:"post",url:contextPath+"/entrustMaterialInController/queryAllEmpByOrganId",contentType:"application/json",dataType:"json",success:function(e){console.log("业务员",e),o.salesmanList=e.data},error:function(){o.$Message.error("服务器出错啦")}})}),_defineProperty(_methods,"getSalesmanByEmpCode",function(e){for(var o=0;o<this.salesmanList.length;o++)if(e==this.salesmanList[o].id){purchaseGoodDeliver.salesmanName=this.salesmanList[o].empName;break}}),_defineProperty(_methods,"loadWarehouses",function(){var o=this;$.ajax({type:"post",url:contextPath+"/rurchaseReturnGoods/queryByWarehouseInfo",dataType:"json",success:function(e){"100100"==e.code?o.wareHouse=e.data:layer.alert(e.msg,{icon:0})},error:function(){layer.alert("服务器异常，请稍后再试！",{icon:0})}})}),_defineProperty(_methods,"loadData",function(){var o=this;$.ajax({type:"post",url:contextPath+"/tpurchasecollectgoods/data",dataType:"json",success:function(e){o.employees=e.data.employees},error:function(){console.log("服务器出错啦")}})}),_defineProperty(_methods,"changeProductType",function(e,o){this.goodlist=[];var t=o[o.length-1];this.purchaseDeliverEntitys.goodsTypeName=t.label,this.purchaseDeliverEntitys.goodsGroupPath=t.value,this.purchaseDeliverEntitys.goodsTypePath=t.label}),_defineProperty(_methods,"getProductType",function(){var o=this;$.ajax({type:"post",url:contextPath+"/tbasecommoditycategory/listByAll?parentId=0",dataType:"json",success:function(e){"100100"===e.code?o.productTypeList=o.initGoodCategory(e.data.cateLists):this.$Modal.error({content:e.msg})},error:function(){this.$Modal.error({content:"网络异常,请联系技术人员！"})}})}),_defineProperty(_methods,"isHintShow",function(e){var o=this;e&&this.typeValue&&this.isHint&&this.goodlist&&0<this.goodlist.length&&this.$Modal.warning({content:"温馨提示：改变商品类型将删除所有商品信息!",onOk:function(){o.isHint=!1,console.log("温馨提示：改变商品类型将删除所有商品信息！")}})}),_defineProperty(_methods,"getGoodsItem",function(e,o){var t=this,i={id:e.id};this.goodlist[o];$.ajax({type:"post",url:contextPath+"/goodsController/queryGoodsDetail",data:JSON.stringify(i),contentType:"application/json",dataType:"json",success:function(e){console.log("明细",e.data),"100100"===e.code&&(Object.assign(t.goodlist[o],{goodsName:e.data[0].goodsName,goodsBarcode:e.data[0].goodsBarcode,goodsBarcodeId:e.data[0].id,goodsBarcodeOptions:e.data,commodityId:e.data[0].commodityId,goodsCode:e.data[0].goodsNo,id:e.data[0].commodityId}),Object.assign(t.productDetailListTemp.goodsEntities[o],{goodsName:e.data[0].goodsName,goodsBarcode:e.data[0].goodsBarcode,goodsBarcodeId:e.data[0].id,goodsBarcodeOptions:e.data,commodityId:e.data[0].commodityId,goodsCode:e.data[0].goodsNo,id:e.data[0].commodityId}),t.$forceUpdate(),purchaseGoodDeliver.getSelectedItem(t.goodlist[o],o))},error:function(){layer.alert("服务器出错啦")}})}),_defineProperty(_methods,"crolMark",function(e){this.tabVal=e}),_defineProperty(_methods,"getGoodsBarcodeValue",function(e,o){var t=this,i={goodsBarcode:e,goodsNo:"",commodityId:this.goodlist[o].commodityId,isInStock:1,stockInNo:"",warehouseId:this.goodlist[o].warehouseId,reservoirPositionId:this.goodlist[o].reservoirPositionId,stockType:"",goodsName:"",custStyleType:"",limit:""};$.ajax({type:"post",url:contextPath+"/goodsController/queryGoodsDetail",data:JSON.stringify(i),contentType:"application/json",dataType:"json",success:function(e){"100100"===e.code&&(t.goodlist[o].goodsBarcodeOptions=e.data.map(function(e){return $.extend(!0,{},{code:e.goodsBarcode,name:e.goodsName,id:e.id})}),t.$forceUpdate())},error:function(){layer.alert("服务器出错啦")}})}),_defineProperty(_methods,"typeInit",function(e,o,t){for(var i=0;i<e.length;i++){if(e[i].value==t)return o.push(e[i].value),!0;if(e[i].children&&0<e[i].children.length&&this.typeInit(e[i].children,o,t))return o.push(e[i].value),!0}}),_defineProperty(_methods,"locatorChange",function(e,o){var t=e;"object"===(void 0===e?"undefined":_typeof(e))&&(t=e.target.value);for(var i="",s=0;s<this.wareHouse.length;s++)if(t==this.wareHouse[s].id){i=this.wareHouse[s].groupId;break}this.$set(this.storageList,o,this.locationMap[i])}),_defineProperty(_methods,"openSupplier",function(){1==this.purchaseDeliverEntitys.orderStatus&&(this.showSupplier=!0)}),_defineProperty(_methods,"repositionDropdown",function(){return repositionDropdownOnSroll("testTableWrap","goods")}),_defineProperty(_methods,"selectProductDetail2",function(e){this.selectedIndex1=e}),_defineProperty(_methods,"detailAction",function(t){if(this.goodlist[t].goodsCode)if(this.goodlist[t].deliverGoodsWeight)if(this.goodlist[t].deliverGoodsCount)if(this.goodlist[t].warehouseId)if(this.codeTabs="tab2","handworkAdd"==this.params.activeType||null==this.productDetailList[t].goodsEntities||this.productDetailList[t].goodsEntities==[]){if(this.productDetailListTemp=JSON.parse(JSON.stringify(this.productDetailList[t])),null!=this.productDetailList[t].goodsEntities&&this.productDetailList[t].returnCount<this.productDetailList[t].goodsEntities.length){var e=parseInt(this.productDetailList[t].returnCount),o=parseInt(this.productDetailListTemp.goodsEntities.length)-e;this.productDetailList[t].goodsEntities=this.productDetailList[t].goodsEntities.splice(e,o),this.productDetailListTemp.goodsEntities.splice(e,o)}else{var i=Number(this.productDetailList[t].returnCount);this.productDetailListTemp.goodsEntities=new Array(i).fill({goodsEntity:{options:[]}})}this.productDetailListTemp=$.extend(!0,{},this.productDetailListTemp,this.productDetailList[t])}else{var s=this;s.productDetailListTemp=s.productDetailList[t];for(var r=[],a=0;a<s.productDetailList[t].goodsEntities.length;a++)r.push(s.productDetailList[t].goodsEntities[a].goodsBarcodeId);$.ajax({type:"post",url:contextPath+"/goodsController/queryByGoodsOnIds",data:JSON.stringify(r),contentType:"application/json",dataType:"json",success:function(e){if(console.log("明细",e.data),"100100"===e.code){s.productDetailListTemp=s.productDetailList[t];for(var o=0;o<s.productDetailListTemp.goodsEntities.length;o++)Object.assign(s.productDetailListTemp.goodsEntities[o],{goodsEntity:Object.assign({},e.data[o])});s.$forceUpdate()}},error:function(){layer.alert("服务器出错啦")}})}else layer.alert("请先选择仓库！");else layer.alert("请先输入送料数量！");else layer.alert("请先输入送料重量！");else layer.alert("请先选择商品编码！")}),_methods),watch:{applyOrder:{handler:function(e,o){var t=e.goodsGroupPath;this.typeInit(this.productTypeList,[],t)},deep:!0}},created:function(){this.orgName=window.parent.userInfo.orgName,this.initUnit(),this.initApproval(),this.getProductType();var e=[],o=window.parent.params.params;if(!0===o||void 0===o);else if(Array.isArray(o)){for(var t=0;t<o.length;t++){var i=o[t],s={};s.transferNo=i.documentNo,e.push(s)}$.ajax({type:"POST",url:"/web/purchaseDeliverController/goodslist",contentType:"application/json",data:JSON.stringify(e),success:function(e){e.data.list.map(function(e){Object.assign(e,{},{sourceNo:e.transferNo,deliverGoodsWeight:e.totalWeight,deliverGoodsCount:e.transferGoodsNum,warehouseId:e.transferOutWarehouse,reservoirPositionId:e.transferOutPositionId})}),purchaseGoodDeliver.goodlist=e.data.list;for(var o=0;o<purchaseGoodDeliver.goodlist.length;o++){purchaseGoodDeliver.supplierId=purchaseGoodDeliver.goodlist[0].supplierId,purchaseGoodDeliver.supplierName=purchaseGoodDeliver.getSupplierInfo(purchaseGoodDeliver.supplierId),purchaseGoodDeliver.logisticsMode=purchaseGoodDeliver.goodlist[0].logisticsMode,this.deliveryDate=purchaseGoodDeliver.goodlist[0].createTime,purchaseGoodDeliver.goodsTypeName=purchaseGoodDeliver.goodlist[0].goodsTypeName;break}purchaseGoodDeliver.goodlist.map(function(e){var o=JSON.parse(JSON.stringify(e));purchaseGoodDeliver.goodlist2.push(o)})},error:function(e){alert(e)}})}else{var r=o.orderNo,a=(o.id,{orderNo:r});$.ajax({type:"POST",url:"/web/purchaseDeliverController/purchaseDeliverGoodsList",data:a,success:function(e){console.log("接口请求了2"),purchaseGoodDeliver.isSourceEdit=!0,purchaseGoodDeliver.goodlist=e.data.purchaseGoodsList,purchaseGoodDeliver.purchaseDeliverEntitys=e.data,purchaseGoodDeliver.deliverId=purchaseGoodDeliver.purchaseDeliverEntitys.id,purchaseGoodDeliver.deliverOrderNo=purchaseGoodDeliver.purchaseDeliverEntitys.orderNo,purchaseGoodDeliver.supplierId=purchaseGoodDeliver.purchaseDeliverEntitys.supplierId,purchaseGoodDeliver.supplierName=purchaseGoodDeliver.purchaseDeliverEntitys.supplierName,purchaseGoodDeliver.logisticsMode=purchaseGoodDeliver.purchaseDeliverEntitys.logisticsMode,purchaseGoodDeliver.empCode=purchaseGoodDeliver.purchaseDeliverEntitys.salesmanId,this.deliveryDate=purchaseGoodDeliver.purchaseDeliverEntitys.createTime,purchaseGoodDeliver.createId=purchaseGoodDeliver.purchaseDeliverEntitys.createId,purchaseGoodDeliver.username=purchaseGoodDeliver.purchaseDeliverEntitys.createName,purchaseGoodDeliver.createTime=purchaseGoodDeliver.purchaseDeliverEntitys.createTime,purchaseGoodDeliver.updateName=purchaseGoodDeliver.purchaseDeliverEntitys.updateName,purchaseGoodDeliver.updateTime=purchaseGoodDeliver.purchaseDeliverEntitys.updateTime,purchaseGoodDeliver.reviewedName=purchaseGoodDeliver.purchaseDeliverEntitys.reviewedName,purchaseGoodDeliver.reviewedDate=purchaseGoodDeliver.purchaseDeliverEntitys.reviewedDate,purchaseGoodDeliver.goodsTypeName=purchaseGoodDeliver.purchaseDeliverEntitys.goodsTypeName,purchaseGoodDeliver.getAccess(purchaseGoodDeliver.purchaseDeliverEntitys.orderNo,purchaseGoodDeliver.boeType),purchaseGoodDeliver.goodlist.map(function(e){var o=JSON.parse(JSON.stringify(e));purchaseGoodDeliver.goodlist2.push(o)}),console.log("打印"),console.log(purchaseGoodDeliver.goodlist2),(o.isRead||2==purchaseGoodDeliver.purchaseDeliverEntitys.orderStatus)&&(purchaseGoodDeliver.isRead=!0,purchaseGoodDeliver.isSaveDisable=!0,purchaseGoodDeliver.isSubmitDisable=!0,purchaseGoodDeliver.isDelDisable=!0,purchaseGoodDeliver.isSalesManDisable=!0,purchaseGoodDeliver.isLogisticsModeDisable=!0,purchaseGoodDeliver.isDeliverGoodsWeightDisable=!0,purchaseGoodDeliver.isDeliverGoodsCountDisable=!0,purchaseGoodDeliver.isRemarkDisable=!0,purchaseGoodDeliver.isEdit("N")),2==purchaseGoodDeliver.purchaseDeliverEntitys.orderStatus&&(purchaseGoodDeliver.isRead=!1,purchaseGoodDeliver.isSaveDisable=!0,purchaseGoodDeliver.isSubmitDisable=!0,purchaseGoodDeliver.isDelDisable=!0,purchaseGoodDeliver.isSalesManDisable=!0,purchaseGoodDeliver.isLogisticsModeDisable=!0,purchaseGoodDeliver.isDeliverGoodsWeightDisable=!0,purchaseGoodDeliver.isDeliverGoodsCountDisable=!0,purchaseGoodDeliver.isRemarkDisable=!0,purchaseGoodDeliver.isEdit("N")),3==purchaseGoodDeliver.purchaseDeliverEntitys.orderStatus&&(purchaseGoodDeliver.isSaveDisable=!0,purchaseGoodDeliver.isSubmitDisable=!0,purchaseGoodDeliver.isDelDisable=!0,purchaseGoodDeliver.isSalesManDisable=!0,purchaseGoodDeliver.isLogisticsModeDisable=!0,purchaseGoodDeliver.isDeliverGoodsWeightDisable=!0,purchaseGoodDeliver.isDeliverGoodsCountDisable=!0,purchaseGoodDeliver.isRemarkDisable=!0,purchaseGoodDeliver.isEdit("N"))},error:function(e){alert(e)}})}},mounted:function(){this.openTime=window.parent.params.openTime,this.orgName=window.parent.userInfo.orgName,console.log(window.parent.userInfo),this.createTime=(new Date).toLocaleDateString(),this.deliveryDate=(new Date).toLocaleDateString(),console.log("打印"),console.log(window.parent.userInfo.organId),this.getSalesman(),this.getLogisticMode(),this.isEdit("Y"),this.loadWarehouses(),this.loadData(),this.repositionDropdown()}});