"use strict";var customerCount=new Vue({el:"#customer-count",data:function(){return{custnameFlag:!1,showTag:!1,isSaveDisable:!1,isSubmitDisable:!1,isDisableCustName:!1,updateFlag:"",productFlag:!0,showTemp:!1,isAddRowDisable:!1,isDelRowDisable:!1,saleGold:"",tempGoodsMailType:"",productDetailModal:{showModal:!1,ids:{goodsId:"",commodityId:"",documentType:"SALE_STOCK"},overEdit:!1,orderStatus:1},CustomerStockMateriaQueryVo:{queryList:[]},user:{userId:"",username:"",organizationId:"",organizationName:"",userCurrentOrganId:""},selectedIndex:"",isDisable:!1,modalTrigger:!1,modalType:"",documentType:"SALE_STOCK",stepList:[],approvalTableData:[],warehouses:[],optionList:[],boeType:"SALE_STOCK",delIndex:"",unitMap:{},employees:[],customerArr:"",isShow:!1,customer:{name:"",Num:""},tabId:"tabId",reload:!0,selected:[],data_user_list:{url:contextPath+"/deposit/findCustomerCode",colNames:["操作","客户名称","客户编码"],colModel:[{name:"id",index:"invdate",width:80,align:"center",formatter:function(o,t,s,e){return $(document).off("click",".select"+s.id).on("click",".select"+s.id,function(){customerCount.confirm(o,t,s,e)}),'<a type="primary" class="select'+s.id+'">选取</a>'}},{name:"name",index:"name",width:300,align:"center"},{name:"code",index:"code",width:300,align:"center"}],multiselect:!1},basicInfo:{id:"",stockPriceNo:"",organizationId:"",organName:"",custNo:"",custName:"",custId:"",status:1,orderDate:"",businessType:"",saleMenId:"",saleMenName:"",saleOrderNo:"",remark:"",createId:"",createName:"",createTime:"",updateId:"",updateName:"",updateTime:"",auditId:"",auditName:"",auditTime:"",isDel:1,version:"",financialDataFlag:"",financialDataId:"",totalAmount:"",totalWeight:"",goodList:[],delGoodIds:[]},businessTypeList:[{value:"ONLY_STORE_MATERIAL",label:"仅存料"},{value:"STORE_MATERIAL_PRICE",label:"存料结价"}],goodinfoList:[],onegoodInfo:{goodsId:"",pictureUrl:"",goodsType:"",goodsCode:"",goodTypeName:"",goodsMainType:"",goodsName:"",goldColor:"",goodsNorm:"",weightUnit:"",goldWeight:"",goldPrice:"",commodityId:"",goldAmount:"",inWarehouseName:"",inWarehouseId:"",materialOrderNo:""}}},methods:{countNum:function(){if(0<this.goodinfoList.length){var t=0;this.goodinfoList.map(function(o){""!=o.goldWeight&&null!=o.goldWeight||(o.goldWeight=0),t+=Number(o.goldWeight)}),console.log(t),t=t.toFixed(3),this.basicInfo.totalWeight=t}},countMoney:function(){if(0<this.goodinfoList.length){var t=0;this.goodinfoList.map(function(o){""!=o.goldAmount&&null!=o.goldAmount||(o.goldAmount=0),t+=Number(o.goldAmount)}),t=t.toFixed(2),this.basicInfo.totalAmount=t}},barModalSure:function(o){this.barCodeDetailModal.showModal=!1},barModalCancel:function(o){this.barCodeDetailModal.showModal=!1},act:function(o){var t=this.goodinfoList[o];console.log(t),""==t.goldWeight?t.goldWeight=0:""==t.goldPrice&&(t.goldPrice=0);var s=Number(t.goldWeight)*Number(t.goldPrice);this.$set(this.goodinfoList[o],"goldAmount",s),this.countNum(),this.countMoney()},actNum:function(o){var t=this.goodinfoList[o];if(t.goldAmount<0)this.$Modal.info({content:"请输入大于0的数"});else{var s=Number(t.goldAmount)/Number(t.goldPrice);s=s.toFixed(3),this.$set(this.goodinfoList[o],"goldWeight",s),this.countNum(),this.countMoney()}},clearNum:function(o,t,s){return console.log(11),htInputNumber(o,t,s)},confirm:function(o,t,s,e){var i=s;this.basicInfo.custNo=i.code,this.basicInfo.custName=i.name,this.basicInfo.custId=i.id,this.isShow=!1,this.reload=!this.reload},searchCut:function(){var o={postData:{customerName:this.customer.name,customerNum:this.customer.Num}};$("#tabId").jqGrid("setGridParam",o).trigger("reloadGrid")},getUnit:function(){var e=this;$.ajax({type:"post",url:contextPath+"/tbaseunit/list",dataType:"json",success:function(o){o.data.map(function(o){var t=o.id,s=o.name;e.unitMap[t]=s})},error:function(){e.$Message.warning("服务器报错")}})},searchClear:function(){this.customer={name:"",Num:""};var o={postData:{customerName:this.customer.name,customerNum:this.customer.Num}};$("#"+this.tabId).jqGrid("clearGridData"),$("#tabId").jqGrid("setGridParam",o).trigger("reloadGrid")},isEdit:function(o,t){eventHub.$emit("isEdit",o)},saveAccess:function(o,t,s){eventHub.$emit("saveFile",o,t)},getAccess:function(o,t,s){eventHub.$emit("queryFile",o,t)},userInfo:function(){this.isDisable||this.isDisableCustName||(this.isShow=!0)},getInputValue:function(o,t){var s=this,e={categoryCustomCode:"0.22.23.",field:o,limit:""};$.ajax({type:"post",url:contextPath+"/tbasecommodity/findByType",data:e,dataType:"json",success:function(o){console.log(o),s.optionList=o.data},error:function(){layer.alert("服务器出错啦111")}})},getSelectedItem:function(o,a){var n=this;$.ajax({type:"post",url:contextPath+"/tbasecommodity/getBriefById/"+o.id,dataType:"json",success:function(o){var t=o.data;for(var s in console.log(t),t.weightUnitId=n.unitMap[t.weightUnitId],n.saleGold)if(s===t.certificateType)var e=n.saleGold[s];if(!e)e=1;var i=Object.assign({},{goodsName:t.name,commodityId:t.id,goodsCode:t.code,weightUnit:t.weightUnitId,goodsType:t.categoryCustomCode,custStyleCode:t.styleCustomCode,goodsNorm:t.specification,pictureUrl:t.frontPic&&t.frontPic.fdUrl,goodTypeName:t.categoryName,pricingMethod:t.pricingType,goodsMainType:t.mainType,goldColor:t.certificateType,goldPrice:e});Vue.set(n.goodinfoList,a,i)},error:function(){layer.alert("服务器出错啦333")}})},save:function(){var e=this,s=this.handlerDataToPost();if(console.log(s),!this.productFlag){var i=0;s.goodList.map(function(o,t){$.ajax({type:"post",url:contextPath+"/tgoodsPart/getParts",data:{id:o.goodsId,documentType:"SALE_STOCK"},dataType:"json",success:function(o){s.goodList[t].goldParts=o.data.goldParts,s.goodList[t].materialParts=o.data.materialParts,s.goodList[t].partParts=o.data.partParts,s.goodList[t].stonesParts=o.data.stonesParts,(i+=1)==s.goodList.length&&$.ajax({type:"post",url:contextPath+"/tSaleStockPrice/save",contentType:"application/json;charset=utf-8",data:JSON.stringify(s),dataType:"json",success:function(o){console.log(o),"100100"===o.code?($.ajax({type:"POST",async:!1,url:contextPath+"/customerStockMaterial/quaryCustomerStockMateriaByStockPriceNo",dataType:"json",data:{stockPriceNo:e.basicInfo.stockPriceNo},success:function(o){console.log(o);var t=o;null===t.data.goodList&&(t.data.goodList=[]),e.basicInfo=t.data;var s=t.data.goodList;customerCount.goodinfoList=[],s&&(s.map(function(o){null!=o.goodsId&&(o.materialOrderNo=null,customerCount.goodinfoList.push(o))}),e.basicInfo.delGoodIds=[],e.getEmployees())}}),e.$Modal.success({title:"提示",content:"保存成功!"}),e.saveAccess(o.data.id,e.boeType)):e.$Modal.error({title:"提示",content:"保存失败!"+o.msg})},error:function(o){e.$Modal.error({title:"提示",content:"保存失败!请联系技术人员"})}})}})})}this.productFlag&&$.ajax({type:"post",url:contextPath+"/tSaleStockPrice/save",contentType:"application/json;charset=utf-8",data:JSON.stringify(s),dataType:"json",success:function(o){console.log(o),"100100"===o.code?($.ajax({type:"POST",async:!1,url:contextPath+"/customerStockMaterial/quaryCustomerStockMateriaByStockPriceNo",dataType:"json",data:{stockPriceNo:e.basicInfo.stockPriceNo},success:function(o){console.log(o);var t=o;null===t.data.goodList&&(t.data.goodList=[]),console.log(t.data),e.basicInfo=t.data;var s=t.data.goodList;customerCount.goodinfoList=[],s&&(s.map(function(o){null!=o.goodsId&&(o.materialOrderNo=null,customerCount.goodinfoList.push(o))}),e.basicInfo.delGoodIds=[],e.getEmployees())}}),e.$Modal.success({title:"提示",content:"保存成功!"})):e.$Modal.error({title:"提示",content:"保存失败!"})},error:function(o){e.$Modal.error({title:"提示",content:"保存失败!请联系技术人员"})}})},checkData:function(o){for(var t in this.paramsMap)if(null==this.paramsMap[t]||""===this.paramsMap[t]||"null"===this.paramsMap[t]||this.paramsMap[t].length<1)return o&&this.$Modal.warning({title:"提示",okText:"确定",content:t+"不能为空"}),!1;return!0},submit:function(){var e=this;if(console.log(this.basicInfo),this.paramsMap={"客户名称":this.basicInfo.custNo,"业务员":this.basicInfo.saleMenName,"明细信息":this.goodinfoList,"业务类型":this.basicInfo.businessType},this.checkData(!0)&&this.validateProduct()){if(this.goodinfoList){console.info(this.goodinfoList);for(var o=0;o<this.goodinfoList.length;o++)if("attr_ranges_gold"==this.goodinfoList[o].goodsMainType){if(""==this.goodinfoList[o].goldWeight||null==this.goodinfoList[o].goldWeight)return this.$Modal.info({content:"第"+(o+1)+"行金料总重没填"}),!1;if(""==this.goodinfoList[o].goldPrice||null==this.goodinfoList[o].goldPrice)return this.$Modal.info({content:"第"+(o+1)+"行金价没填"}),!1;if(""==this.goodinfoList[o].goldAmount||null==this.goodinfoList[o].goldAmount)return this.$Modal.info({content:"第"+(o+1)+"行金额没填"}),!1;if(""==this.goodinfoList[o].inWarehouseId||null==this.goodinfoList[o].inWarehouseId)return this.$Modal.info({content:"第"+(o+1)+"行仓库没填"}),!1}}if(1!==this.basicInfo.status)return this.$Modal.warning({title:"提示",content:"该单据之前已经提交过了,不能再提交!"}),!1;var s=this.handlerDataToPost();if(s.status=2,this.productFlag)$.ajax({type:"POST",url:contextPath+"/tSaleStockPrice/save",contentType:"application/json",data:JSON.stringify(s),dataType:"json",success:function(o){console.log(o),"100100"===o.code?(console.log(o),$.ajax({type:"POST",async:!1,url:contextPath+"/customerStockMaterial/quaryCustomerStockMateriaByStockPriceNo",dataType:"json",data:{stockPriceNo:e.basicInfo.stockPriceNo},success:function(o){console.log(o);var t=o;null===t.data.goodList&&(t.data.goodList=[]),e.basicInfo=t.data;var s=t.data.goodList;customerCount.goodinfoList=[],s&&(s.map(function(o){null!=o.goodsId&&(o.materialOrderNo=null,customerCount.goodinfoList.push(o))}),e.basicInfo.delGoodIds=[],e.getEmployees())}}),e.$Modal.success({title:"提示",content:"提交成功!"}),e.isSaveDisable=!0,e.isSubmitDisable=!0,e.isAddRowDisable=!0,e.isDelRowDisable=!0,e.isDisableCustName=!0,e.basicInfo.id=o.data.id,e.basicInfo.orderDate=(new Date).format("yyyy-MM-dd HH:mm:ss"),e.basicInfo.updateName=o.data.updateName,e.basicInfo.updateTime=o.data.updateTime,e.saveAccess(o.data.id,e.boeType),1<e.basicInfo.status&&(e.isDisable=!0),e.showTag=!0,1<customerCount.basicInfo.status&&(customerCount.isDisable=!0),e.isEdit(1==e.basicInfo.status?"Y":"N")):(e.$Modal.error({title:"提示",content:"提交失败!"}),e.basicInfo.status=1)},error:function(o){e.$Modal.warning({title:"提示",content:"服务器出错"}),e.basicInfo.status=1}});else{var i=0;s.goodList.map(function(o,t){$.ajax({type:"post",url:contextPath+"/tgoodsPart/getParts",data:{id:o.goodsId,documentType:"SALE_STOCK"},dataType:"json",success:function(o){s.goodList[t].goldParts=o.data.goldParts,s.goodList[t].materialParts=o.data.materialParts,s.goodList[t].partParts=o.data.partParts,s.goodList[t].stonesParts=o.data.stonesParts,(i+=1)==s.goodList.length&&$.ajax({type:"POST",url:contextPath+"/tSaleStockPrice/save",contentType:"application/json",data:JSON.stringify(s),dataType:"json",success:function(o){console.log(o),"100100"===o.code?(console.log(o),$.ajax({type:"POST",async:!1,url:contextPath+"/customerStockMaterial/quaryCustomerStockMateriaByStockPriceNo",dataType:"json",data:{stockPriceNo:e.basicInfo.stockPriceNo},success:function(o){console.log(o);var t=o;null===t.data.goodList&&(t.data.goodList=[]),e.basicInfo=t.data;var s=t.data.goodList;customerCount.goodinfoList=[],s&&(s.map(function(o){null!=o.goodsId&&(o.materialOrderNo=null,customerCount.goodinfoList.push(o))}),e.basicInfo.delGoodIds=[],e.getEmployees())}}),e.$Modal.success({title:"提示",content:"提交成功!"}),e.isSaveDisable=!0,e.isSubmitDisable=!0,e.isAddRowDisable=!0,e.isDelRowDisable=!0,e.isDisableCustName=!0,e.basicInfo.id=o.data.id,e.basicInfo.orderDate=(new Date).format("yyyy-MM-dd HH:mm:ss"),e.basicInfo.updateName=o.data.updateName,e.basicInfo.updateTime=o.data.updateTime,e.saveAccess(o.data.id,e.boeType),1<e.basicInfo.status&&(e.isDisable=!0),e.showTag=!0,1<customerCount.basicInfo.status&&(customerCount.isDisable=!0),e.isEdit(1==e.basicInfo.status?"Y":"N")):(e.$Modal.error({title:"提示",content:"提交失败!"}),e.basicInfo.status=1)},error:function(o){e.$Modal.warning({title:"提示",content:"服务器出错"}),e.basicInfo.status=1}})}})})}}},approval:function(){var o=this;1==o.basicInfo.status&&o.$Modal.warning({content:"请先提交单据！"}),o.modalType="approve",o.modalTrigger=!o.modalTrigger},reject:function(){this.modalType="reject",this.modalTrigger=!this.modalTrigger},approvalOrRejectCallBack:function(o){var t=this;"100515"==o.result.code&&("approve"==t.modalType&&t.ajaxUpdateDocStatusById(t.basicInfo.id,4),"reject"==t.modalType&&t.ajaxUpdateDocStatusById(t.basicInfo.id,1)),"100100"==o.result.code&&(t.basicInfo.status=o.result.data.status,t.basicInfo.auditId=o.result.data.auditId,t.basicInfo.auditName=o.result.data.auditName,t.basicInfo.auditTime=o.result.data.auditTime),1==t.basicInfo.status&&(this.showTag=!1,t.isEdit(1==t.basicInfo.status?"Y":"N"))},ajaxUpdateDocStatusById:function(o,t){console.log(t);var s=this;$.ajax({url:contextPath+"/tSaleStockPriceController/update",method:"POST",dataType:"json",contentType:"application/json;charset=utf-8",data:JSON.stringify({id:o,status:t}),success:function(o){"100100"==o.code&&(s.basicInfo.status=t)}})},exit:function(){window.parent.closeCurrentTab({exit:!0,openTime:this.openTime})},changeBusinessType:function(){"ONLY_STORE_MATERIAL"===this.basicInfo.businessType?this.showTemp=!0:"STORE_MATERIAL_PRICE"===this.basicInfo.businessType&&(this.showTemp=!1)},changeInfo:function(o){console.log(o),this.basicInfo.saleMenName=o.label,this.basicInfo.saleMenId=o.value},addRow:function(){if(""===this.basicInfo.custNo)this.$Modal.info({content:"请先选择客户"});else if(""===this.basicInfo.businessType)this.$Modal.info({content:"请先选择业务类型"});else{if(!this.validateProduct())return;this.goodinfoList.push(Object.assign({},this.onegoodInfo)),console.log(this.goodinfoList)}},delRow:function(){""===this.delIndex?this.$Modal.info({content:"请选择需要删除的下标"}):(console.log(this.goodinfoList[this.delIndex].goodsId),this.goodinfoList[this.delIndex].goodsId&&(null==this.basicInfo.delGoodIds&&(this.basicInfo.delGoodIds=[]),this.basicInfo.delGoodIds.push(this.goodinfoList[this.delIndex].goodsId)),console.log(this.goodinfoList[this.delIndex].goodsId),this.goodinfoList.splice(this.delIndex,1),$(".tdInfo").removeClass("tr-back"),this.delIndex="",this.countNum(),this.countMoney(),this.goodinfoList.length<1&&(this.basicInfo.totalWeight=0,this.basicInfo.totalAmount=0))},getIndex:function(o){this.delIndex!=o||""===this.delIndex?(this.delIndex=o,$(".tdInfo").eq(this.delIndex).addClass("tr-back").siblings().removeClass("tr-back")):($(".tdInfo").eq(this.delIndex).removeClass("tr-back"),this.delIndex="")},handlerDataToPost:function(){var o={stonesParts:[],materialParts:[],partParts:[],goldParts:[]},s=this.basicInfo;return 0<this.goodinfoList.length&&(s.goodList=[JSON.parse(JSON.stringify(o))]),console.log(this.goodinfoList),htHandlerProductDetail(this.goodinfoList,s,o),console.log(this.basicInfo.delGoodIds),console.log(s.goodList),this.goodinfoList.map(function(o,t){s.goodList[t]||(s.goodList[t]={}),console.log(o.goodsId),Object.assign(s.goodList[t],{pictureUrl:o.pictureUrl,status:o.status,commodityId:o.commodityId,goodsCode:o.goodsCode,goodsName:o.goodsName,goodsNorm:o.goodsNorm,goldColor:o.goldColor,weightUnit:o.weightUnit,goldWeight:o.goldWeight,goodTypeName:o.goodTypeName,goodsMainType:o.goodsMainType,goodsType:o.goodsType,inWarehouseName:o.inWarehouseName,inWarehouseId:o.inWarehouseId,materialOrderNo:o.materialOrderNo,goldPrice:o.goldPrice,goldAmount:o.goldAmount,goodsId:o.goodsId}),console.log(s.goodList[t])}),console.log(s),s},validateProduct:function(){var s=!0,e=this;return console.log(e.goodinfoList),$.each(e.goodinfoList,function(o,t){if(t.goodsId)return!0;if("attr_ranges_gold"==t.goodsMainType){if(!t.tBaseBomEntity)return s=!1,e.$Modal.error({content:"第"+(o+1)+"行商品明细未选择，请先选择商品明细！"}),!1}else if(!t.assistAttrs)return s=!1,e.$Modal.error({content:"第"+(o+1)+"行商品明细未选择，请先选择商品明细！"}),!1}),s},changeWarehouse:function(){for(var o=arguments.length,t=Array(o),s=0;s<o;s++)t[s]=arguments[s];console.log(t),console.log(this.goodinfoList[0].inLocationId)},loadWarehouses:function(){var t=this;$.ajax({type:"post",url:contextPath+"/purchasestock/queryWarehouses",dataType:"json",success:function(o){t.warehouses=[],"100100"==o.code&&0<o.data.length&&(t.warehouses=o.data.map(function(o){return Object.assign({},{value:o.id,label:o.name})}))},error:function(o){}})},addStockPriceNo:function(){var t=this;$.ajax({type:"post",url:contextPath+"/customerStockMaterial/addCustomerStockMateria",dataType:"json",success:function(o){console.log(o),t.basicInfo.stockPriceNo=o.data.stockPriceNo,t.basicInfo.orderDate=new Date},error:function(o){}})},showProductDetail:function(o,t){var s=this;if(""==this.goodinfoList[o].goodsCode||null==this.goodinfoList[o].goodsCode)this.$Modal.error({content:"请先输入商品编码！"});else if(this.productDetailModal.isOrderBom="detail"!==t,this.selectedIndex=o,console.log(this.goodinfoList[o].goodsMainType),console.log(this.goodinfoList[o].materialOrderNo),null!=this.goodinfoList[o].materialOrderNo){var e={goodsId:this.goodinfoList[o].goodsId,commodityId:this.goodinfoList[o].commodityId,documentType:"S_CUST_MATERIAL"};console.log(e),Object.assign(this.productDetailModal,{showModal:!0,ids:e}),this.$nextTick(function(){s.$refs.modalRef.getProductDetail()})}else if(console.log(this.goodinfoList[o].goodsLineNoId),null!=this.goodinfoList[o].goodsLineNoId){var i={goodsId:this.goodinfoList[o].goodsLineNoId,commodityId:this.goodinfoList[o].commodityId,documentType:"S_CUST_MATERIAL"};console.log(i),Object.assign(this.productDetailModal,{showModal:!0,ids:i}),this.$nextTick(function(){s.$refs.modalRef.getProductDetail()})}else{var a={goodsId:this.goodinfoList[o].goodsId,commodityId:this.goodinfoList[o].commodityId,documentType:"SALE_STOCK"};console.log(a),Object.assign(this.productDetailModal,{showModal:!0,ids:a}),this.$nextTick(function(){s.$refs.modalRef.getProductDetail()})}},modalSure:function(o){this.productDetailModalClick(o)},modalCancel:function(o){},productDetailModalClick:function(o){console.log(o),"attr_ranges_goods"===this.goodinfoList[this.selectedIndex].goodsMainType?Object.assign(this.goodinfoList[this.selectedIndex],{tBaseBomEntity:o,assistAttrs:null,overEdit:!0}):Object.assign(this.goodinfoList[this.selectedIndex],{assistAttrs:o,tBaseBomEntity:{},overEdit:!0})},getEmployees:function(){var t=this;$.ajax({type:"post",url:contextPath+"/tpurchasecollectgoods/data",dataType:"json",success:function(o){t.basicInfo.organizationId=o.data.orgId,t.basicInfo.organName=o.data.orgName,t.employees=o.data.employees},error:function(){console.log("服务器出错啦222")}})},initGoldPrice:function(o){var t=this;$.ajax({type:"post",url:contextPath+"/tbasetodygoldprice/queryPrice",data:{type:o},dataType:"json",success:function(o){t.saleGold=o.data},error:function(){t.$Message.warning("服务器报错")}})},getAllValue:function(){var t=this;$.ajax({type:"post",url:contextPath+"/tbasecommodity/findByType",data:{categoryCustomCode:"0.22.23.",field:"",limit:""},dataType:"json",success:function(o){t.optionList=o.data},error:function(){layer.alert("服务器出错啦111")}})}},mounted:function(){var t=this;this.getUnit(),this.getAllValue(),this.loadWarehouses(),this.getEmployees(),this.initGoldPrice(1),this.openTime=window.parent.params.openTime,this.openName=window.parent.params.name;var o=window.parent.params.params;if(console.log(o),"add"===o.type&&(this.basicInfo.stockPriceNo=o.allInfo.data.stockPriceNo,this.basicInfo.orderDate=new Date,this.isEdit("Y")),"addInfo"===o.type){var s=this;$.ajax({type:"post",url:contextPath+"/customerStockMaterial/addCustomerStockMateria",dataType:"json",success:function(o){console.log(o),s.basicInfo.stockPriceNo=o.data.stockPriceNo},error:function(o){}}),this.basicInfo.custName=o.allInfo.data[0].customerName,this.basicInfo.custNo=o.allInfo.data[0].custNo,this.basicInfo.custId=o.allInfo.data[0].customerId,this.basicInfo.saleOrderNo=o.allInfo.data[0].saleOrderNo,this.isAddRowDisable=!0,this.isDelRowDisable=!0,this.basicInfo.orderDate=new Date,this.productFlag=!1,this.custnameFlag=!0,this.isEdit(1==this.basicInfo.status?"Y":"N");for(var e=0;e<o.allInfo.data.length;e++){var i=o.allInfo.data[e].goodList;i&&i.map(function(o){null!=o.goodsId&&(o.goldWeight=o.totalWeight,t.goodinfoList.push(o),console.log(t.goodinfoList))})}}if("query"===o.type){if(this.basicInfo=o.allInfo.data,null!=o.allInfo.data.goodList)if(null!=o.allInfo.data.goodList[0].materialOrderNo){var a=o.allInfo.data.goodList;a&&a.map(function(o){null!=o.goodsId&&(o.materialOrderNo=null,t.goodinfoList.push(o))}),this.custnameFlag=!0,this.productFlag=!1,this.isAddRowDisable=!0,this.isDelRowDisable=!0,1<this.basicInfo.status&&(this.showTag=!0)}else{var n=o.allInfo.data.goodList;console.log(n),n&&n.map(function(o){null!=o.goodsId&&(o.materialOrderNo=null,t.goodinfoList.push(o))}),1<this.basicInfo.status&&(this.showTag=!0)}this.isEdit(1==this.basicInfo.status?"Y":"N"),this.getAccess(this.basicInfo.id,this.boeType)}this.countNum(),this.countMoney()}});