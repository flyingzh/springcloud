"use strict";Vue.component("ht-selectsupplier",{props:{config:{type:Object,require:!1,default:function(){return!1}},showModal:{default:function(){return!1}}},data:function(){var n=this;return{mainProduct:[],supplierLevel:[],suppType:[{name:"战略型",code:"1"},{name:"重点型",value:"2"},{name:"常规型",code:"3"},{name:"一般型",code:"4"}],selected:[],body:{supplierType:"",supplierLevel:"",mainProd:"",siShortName:""},base_config:{colNames:["操作","id","供应商编码","简称","主营商品"],colModel:[{name:"operation",index:"invdate",width:200,align:"center",formatter:function(e,i,t,o){return $(document).off("click",".select"+t.id).on("click",".select"+t.id,function(){n.doSelect(e,i,t,o)}),'<a type="primary" class="select'+t.id+'">选取</a>'}},{name:"id",index:"id",width:0,align:"left",hidden:!0},{name:"supplierCode",index:"supplierCode asc, invdate",width:200,align:"left",sort:!1},{name:"siShortName",index:"siShortName asc, invdate",width:200,sort:!1,align:"left"},{name:"mainProd",index:"mainProd",width:250,align:"left"}],jsonReader:{root:"data.list",total:"data.totalPage",records:"data.totalCount",cell:"list"},prmNames:{page:"page",rows:"limit"},mtype:"POST",contentType:"application/json",datatype:"json",styleUI:"Bootstrap",rownumbers:!0,pagination:!0,multiselectWidth:50,viewrecords:!0,rowNum:10,rowList:[10,30,50],pager:"#my_pager_id_supply",url:contextPath+"/tbasecommodity/findBySupplier",onPaging:function(){}}}},methods:{doSelect:function(e,i,t,o){console.log(t.id),this.$emit("getinfo",t.id,t.supplierCode,t.siShortName),this.$emit("sure")},init:function(){jQuery("#my_table_id_supply").jqGrid(this.base_config)},clear:function(){this.body={supplierType:"",supplierLevel:"",mainProd:"",siShortName:""}},search:function(){console.log(this.body);var e=$("#my_table_id_supply"),i={postData:this.body};e.jqGrid("clearGridData"),e.jqGrid("setGridParam",i).trigger("reloadGrid")},closeModal:function(){this.$emit("cancel")},loadSupplier:function(){var i=this;$.ajax({type:"post",url:contextPath+"/tbasecommodity/data",dataType:"json",contentType:"application/json",success:function(e){i.mainProduct=e.data.mainProduct,i.supplierLevel=e.data.supplierLevel},error:function(e){console.log(e)}})}},created:function(){this.loadSupplier()},mounted:function(){this.init()},watch:{"body.supplierType":function(e){void 0===e&&(this.body.supplierType="")},"body.mainProd":function(e){void 0===e&&(this.body.mainProd="")},"body.supplierLevel":function(e){void 0===e&&(this.body.supplierLevel="")}},template:'\n                <div>\n                <modal @on-ok="doSelect" @on-cancel="closeModal" v-model="showModal" title="选择供应商" width="900" >\n                    <div>\n                        <i-form label-width="120">\n                            <row>\n                                <i-col span="8">\n                                    <form-item label="供应商类别">\n                                        <i-select v-model="body.supplierType"  clearable  class="ht-width-md">\n                                            <i-option v-for="item in suppType" :value="item.code" :key="item.code">{{item\n                                                .name}}\n                                            </i-option>\n                                        </i-select>\n                                    </form-item>\n                                    <form-item label="主营商品">\n                                        <i-select v-model="body.mainProd" clearable  class="ht-width-md">\n                                            <i-option v-for="item in mainProduct" :value="item.id" :key="item.id">{{item.name}}</i-option>\n                                        </i-select>\n                                    </form-item>\n                                </i-col>\n                                <i-col span="8">\n                                    <form-item label="供应商等级">\n                                        <i-select v-model="body.supplierLevel" clearable class="ht-width-md">\n                                            <i-option v-for="item in supplierLevel" :value="item.id" :key="item.id">{{item.name}}</i-option>\n                                        </i-select>\n                                    </form-item>\n                                    <form-item label="供应商简称">\n                                        <i-input v-model="body.siShortName"  class="ht-width-md"></i-input>\n                                    </form-item>\n                                </i-col>\n                                <i-col span="8">\n                                    <i-button type="primary" style="margin-left: 100px" @click="search">查询</i-button>\n                                    <i-button type="primary" style="margin-left: 20px" @click="clear">清空</i-button>\n                                </i-col>\n                            </row>\n                        </i-form>\n                        <div class="jqGrid_wrapper">\n                            <table id="my_table_id_supply"></table>\n                            <div id="my_pager_id_supply"></div>\n                        </div>\n                    </div>\n                    <div slot="footer"></div>\n                </modal>\n            </div>\n    '});