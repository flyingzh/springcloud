"use strict";Vue.component("source-list",{props:{config:{type:Object,require:!1,default:function(){return!1}},showModal:{default:function(){return!1}}},data:function(){var a=this;return{selected:[],body:{code:"",date:""},base_config:{colNames:["操作","单据编号","单据日期","业务类型"],colModel:[{name:"codes",index:"invdate",width:200,align:"center",formatter:function(e,t,n,i){return $(document).on("click",".select"+n.documentCode,function(){a.doSelect(e,t,n,i)}),'<a type="primary" class="select'+n.documentCode+'">选取</a>'}},{name:"documentCode",index:"currencyName asc, invdate",width:200,align:"center",sort:!1},{name:"sendTestTime",index:"currencyName asc, invdate",width:200,align:"center",sort:!1},{name:"businessType",index:"exchangeRate",width:200,align:"center"}],jsonReader:{root:"data.list",total:"data.totalPage",records:"data.totalCount",cell:"list"},prmNames:{page:"page",rows:"limit"},mtype:"POST",contentType:"application/json",datatype:"json",styleUI:"Bootstrap",rownumbers:!0,pagination:!0,multiselectWidth:50,viewrecords:!0,rowNum:10,rowList:[10,30,50],pager:"#my_pager_id",url:contextPath+"/tbaseunit/list",onPaging:function(){}}}},methods:{doSelect:function(e,t,n,i){console.log(e,t,n,i),this.$emit("input",n.documentCode),this.$emit("sure")},init:function(){jQuery("#my_table_id").jqGrid(this.base_config)},clear:function(){this.body={code:"",date:""}},search:function(){var e=$("#my_table_id"),t={postData:this.body};e.jqGrid("clearGridData"),e.jqGrid("setGridParam",t).trigger("reloadGrid")},cancel:function(){this.$emit("cancel")}},mounted:function(){this.init()},template:'<div>\n            <Modal\n            @on-ok="doSelect"\n            @on-cancel="cancel"\n        class-name="source-list"\n        v-model="showModal"\n        title="选择部门">\n        <div class="content clearfix">\n           <div style="width: 800px;border: 1px solid #ccc;">\n              <div>\n                  <i-form :model="body" style="display:inline-block; margin-top: 10px;" :label-width="80">\n                    <form-item label="单据编号">\n                        <i-input v-model="body.code"></i-input>\n                    </form-item>\n                    <form-item label="单据日期">\n                        <date-picker format="yyyy-MM-dd" v-model="body.date" :key="body.date" @on-change="body.date=$event"  type="datetime" placeholder="请选择时间" style="width: 200px"></date-picker>\n                    </form-item>\n                    <ht-btns @clear="clear" @search="search"></ht-btns>\n                  </i-form>\n                 \n            </div>\n            <div class="jqGrid_wrapper">\n                <table id="my_table_id"></table> \n                <div id="my_pager_id"></div>\n            </div>\n            </div>\n           \n        </div>\n    </Modal>\n</div>'});