"use strict";var ButtonVM=new Vue({el:"#button-index",data:function(){return{isShow:!1,isEdit:!1,reload:!1,status:[],selected:[],Constant:{SUCCESS_CODE:"100100",Is_View:"0"},body:{name:""},addButton:{id:"",name:"",iCon:"",permission:"",status:"",remark:""},button_list:{url:contextPath+"/button/buttonListPage",colNames:["操作","名称","标识","状态","图标"],colModel:[{name:"id",index:"id",width:200,align:"center"},{name:"name",index:"name",width:200,align:"center"},{name:"permission",index:"permission",width:200,align:"center"},{name:"status",index:"status",width:200,align:"center",formatter:function(t,e,n,i){return 1===t?"正常":"禁用"}},{name:"icon",index:"icon",width:200,align:"center"}]}}},methods:{add:function(){this.isShow=!0},search:function(){this.reload=!this.reload},cancel:function(){this.isShow=!1,this.isEdit=!1,this.clearAddButton()},save:function(){if(!this.isEdit){var t=this.addButton;$("form").valid()&&($.isEmptyObject(String(t.id))?this.saveButton(t):this.updateButton(t))}},saveButton:function(t){$.ajax({url:contextPath+"/button/add",type:"POST",dataType:"json",data:JSON.stringify(t),contentType:"application/json;charset=utf-8",success:function(t){t.code===ButtonVM.Constant.SUCCESS_CODE?(layer.alert("添加按钮成功"),ButtonVM.clearAddButton()):layer.alert(t.msg)},error:function(t){}})},modify:function(){if(0!==this.selected.length)if(1<this.selected.length)layer.alert("只能选择一条记录进行修改");else{var t=this.selected[0];$.isEmptyObject(t)||void 0===t||this.viewButton(t,"1")}else layer.alert("请选择一条记录进行修改")},updateButton:function(t){$.ajax({url:contextPath+"/button/updateButton",type:"POST",dataType:"json",data:JSON.stringify(t),contentType:"application/json;charset=utf-8",success:function(t){t.code===ButtonVM.Constant.SUCCESS_CODE?layer.alert("修改按钮成功"):layer.alert(t.msg)},error:function(t){}})},view:function(){if(0!==this.selected.length)if(1<this.selected.length)layer.alert("只能选择一条记录进行查看");else{var t=this.selected[0];$.isEmptyObject(t)||void 0===t||this.viewButton(t,"0")}else layer.alert("请选择一条记录进行查看")},viewButton:function(t,n){$.ajax({url:contextPath+"/button/viewButtonInfo?id="+t,type:"POST",dataType:"json",data:"",contentType:"application/json;charset=utf-8",success:function(t){if(t.code===ButtonVM.Constant.SUCCESS_CODE){ButtonVM.isShow=!0,n===ButtonVM.Constant.Is_View&&(ButtonVM.isEdit=!0);var e=t.data;ButtonVM.addButton={id:e.id,name:e.name,permission:e.permission,iCon:e.iCon,remark:e.remark}}},error:function(){}})},del:function(){if(0!==this.selected.length)if(1<this.selected.length)layer.alert("只能选择一条记录进行删除");else{var t=this.selected[0];$.ajax({type:"POST",url:contextPath+"/button/delButtonById/"+t,data:"",dataType:"json",success:function(t){t.code===ButtonVM.Constant.SUCCESS_CODE?(layer.alert("删除按钮成功"),ButtonVM.reload=!ButtonVM.reload):layer.alert(t.msg)},error:function(t){}})}else layer.alert("请选择一条记录进行删除")},clearAddButton:function(){ButtonVM.addButton={id:"",name:"",permission:"",iCon:"",remark:""}},initFormValidate:function(){var t={onfocusout:function(t){$(t).valid()},onkeyup:!1,rules:{menu:{required:!0},menutitle:{required:!0},menuimage:{required:!0}},messages:{menu:{required:"请输入按钮名称"},menutitle:{required:"请输入按钮标识"},menuimage:{required:"请输入按钮图标"}}};$("#form").validate(t)}},mounted:function(){this.initFormValidate()}});