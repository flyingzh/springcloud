"use strict";new Vue({el:"#bank-account-daily-report",data:function(){return{openData:{selectedDate:new Date,isShowSubtotal:!0,isShowDetail:!0},filterVisible:!1,base_config:{multiselect:!0,mtype:"POST",styleUI:"Bootstrap",url:"",datatype:"json",jsonReader:{root:"list",cell:"list",repeatitems:!1},viewrecords:!0,rowNum:99999},colNames:[],colModel:[],tableHeaders:[],organisationList:[{label:"金大祥",value:1},{label:"金大祥1",value:2},{label:"金大祥2",value:3}],baseData:{standardCurrencyId:1},openTime:"",dataList:[],printInfo:{},printModal:!1}},mounted:function(){this.pageInit(),this.openTime=window.parent.params&&window.parent.params.openTime},methods:{printModalShow:function(t){this.printModal=t},pageInit:function(){var e=this;e.openData.selectedDate=new Date(e.openData.selectedDate).format("yyyy-MM-dd"),jQuery("#grid").jqGrid({url:contextPath+"/bankstatementappcontroller/reportDetail",postData:JSON.stringify(e.openData),ajaxGridOptions:{contentType:"application/json;charset=utf-8"},datatype:"json",colNames:["科目代码","科目名称","币别","银行名称","银行账号","昨日余额","今日借方","今日贷方","今日余额"],colModel:[{name:"subjectCode",width:80},{name:"subjectName",width:100},{name:"currencyName",width:80},{name:"bankName",width:150},{name:"bankAccount",width:150},{name:"yesterdayBalanceFor",width:120},{name:"debitAmountFor",width:120},{name:"creditAmountFor",width:120},{name:"todayBalanceFor",width:120}],rowNum:999999999,mtype:"post",jsonReader:{root:"data.bsrList",total:"data.totalPage",records:"data.totalCount",cell:"list"},styleUI:"Bootstrap",height:$(window).height()-100,loadComplete:function(t){"100100"==t.code?e.dataList=t.data.bsrList:e.$Message.warning({content:t.msg,duration:3,closable:!0})}})},open:function(){this.filterVisible=!0},refresh:function(){this.save()},save:function(){this.openData.selectedDate=new Date(this.openData.selectedDate).format("yyyy-MM-dd");var t=this.openData;this.filterVisible=!1,jQuery("#grid").setGridParam({postData:JSON.stringify(t)}).trigger("reloadGrid")},cancel:function(){this.filterVisible=!1},exportExcel:function(){var t=this.openData,e=new Date(t.selectedDate).format("yyyy-MM-dd"),a=contextPath+"/bankstatementappcontroller/reportExportExcel?selectedDateStr="+e+"&isShowDetail="+t.isShowDetail+"&isShowSubtotal="+t.isShowSubtotal;window.open(a)},closeWindow:function(){window.parent.closeCurrentTab({name:"银行对账日报表",openTime:this.openTime,exit:!0})},printV:function(){var t=this;if(t.dataList&&t.dataList.length){console.log("点击打印,查看that.dataList: "),console.log(t.dataList);var e={title:"银行对账日报表",template:1,titleInfo:[{name:"公司名称",val:layui.data("user").currentOrgName},{name:"日期",val:t.openData.selectedDate}],colNames:[{name:"科目代码",col:"subjectCode"},{name:"科目名称",col:"subjectName"},{name:"币别",col:"currencyName"},{name:"银行名称  ",col:"bankName"},{name:"银行账号",col:"bankAccount"},{name:"昨日余额",col:"yesterdayBalanceFor"},{name:"今日借方",col:"debitAmountFor"},{name:"今日贷方",col:"creditAmountFor"},{name:"今日余额",col:"todayBalanceFor"}],styleCss:"",colMaxLenght:9,data:t.dataList};t.printInfo=e,t.printModalShow(!0)}else t.$Message.error({content:"无打印数据!",duration:3})}}});