"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve=new Vue({el:"#initial-fixed-assets",data:function(){var a=this;return{card:{orginCardId:null,sobId:0,accountYear:2018,accountPeriod:10,changeType:1,assetTypeId:1,assetCode:"klfdlkljlj",assetName:"极高的",unitId:"1",num:100,enterAccountDate:"2018-3-3",locationId:1,useType:"非食用",useStateId:1,alterTypeId:1,model:"荣耀13",originPlace:"中国",supplierId:3,manufacturer:"华为",remark:"且行且珍惜",assetSubjectId:1,deprSubjectId:1,buyOrgVal:999,buyDepr:99,orgValAdjust:9,beginUsedate:"2018-1-1",expectUsePeriods:30,usePeriodsBeforeservice:2,deprService:22,deprServiceAdjust:3,expectNetSalvage:100,devalPreparation:4,deductionAmount:333,financeFaAttachDeviceList:[{deviceCode:"sb007",deviceName:"sb",recordDate:"2018-1-1",specModel:"007",measureUnit:"斤两",num:22,amount:123,locationId:1,remark:"天上地下"},{deviceCode:"sb007",deviceName:"sb",recordDate:"2018-1-1",specModel:"007",measureUnit:"斤两",num:22,amount:123,locationId:1,remark:"天上地下"}],financeFaAssignDeptList:[{deptId:10,rate:.22,financeFaAssignExpenseList:[{deptId:10,expenseSubjectId:1,rate:.33},{deptId:10,expenseSubjectId:1,rate:.33}]},{deptId:11,rate:.78,financeFaAssignExpenseList:[{deptId:11,expenseSubjectId:1,rate:.33},{deptId:11,expenseSubjectId:1,rate:.33}]}],financeFaOrginValList:[{currencyId:1,exchangeRate:.22,orgValFor:234,orgVal:234},{currencyId:1,exchangeRate:.22,orgValFor:234,orgVal:234}]},formData:{subjectName:"",subjectCode:"",subjectId:"",basicInformation:{for1:"",for2:"",for3:"",for4:"",for5:"",for6:"",for7:"",for8:"",for9:"",for10:"",for11:"",for12:"",for13:"",for14:"",for15:"",for16:"",for17:""},otherDepartments:{for1:"",for2:"",for3:"1",for4:"",for5:"1"},discountOriginal:{for1:"",for2:"",for3:"",for4:"",for5:"",for6:"",for7:"",for8:"",for9:"",for10:"",for11:"",for12:"",for13:"",for14:"",for15:"",for16:"",for17:"",for18:"",for19:""},initData:{for1:"",for2:"",for3:"",for4:"",for5:"",for6:"",for7:"",for8:"",for9:"",for10:"",for11:"",for12:"",for13:"",for14:"",for15:"",for16:"",for17:"",for18:""}},documentTypeList:[],organizationList:[{value:1,label:"金大祥集团"},{value:2,label:"航天集团"},{value:3,label:"粮食集团"}],nodesList:{},nodes:[],parValueStr:["100元","50元","20元","10元","5元","2元","1元","5角","2角","1角","5分","2分","1分"],setting:{callback:{onClick:this.clickEvent}},formItem:{input:"",select:"",radio:"male",checkbox:[],switch:!0,date:"",time:"",slider:[20,50],textarea:""},showdepreciation:!1,treeUrl:"",assetTypeTreeSetting:{callback:{onClick:this.assetTypeTreeClickCallBack,beforeClick:this.assetTypeTreeBeforeClick}},useStateTreeSetting:{callback:{onClick:this.useStateTreeClickCallBack,beforeClick:this.useStateTreeBeforeClick}},changeMethodTreeSetting:{callback:{onClick:this.changeMethodTreeClickCallBack,beforeClick:this.changeMethodTreeBeforeClick}},supplierTreeSetting:{callback:{onClick:this.supplierTreeClickCallBack,beforeClick:this.supplierTreeBeforeClick}},treeSetting:{callback:{onClick:this.treeClickCallBack,beforeClick:this.treeBeforeClick}},showAssetType:!1,showUseState:!1,showChangeMethod:!1,showSupplier:!1,showDepartment:!1,showAll:!1,subjectVisable:!1,cardVisible:!1,tableList:[],selected:[],selectedId:[],base_config:{multiselect:!0,mtype:"POST",styleUI:"Bootstrap",url:contextPath+"/cashier/cashierDetail",ajaxGridOptions:{contentType:"application/json;charset=utf-8"},datatype:"json",jsonReader:{root:"data.resultVo"},height:$(window).height()-140,viewrecords:!0,rowNum:999999999,onSelectAll:function(e,t){a.handlerId(e,t,"selected")},onSelectRow:function(e,t){console.log("data---------",e,t),e&&(a.handlerId(e,t,"selected"),console.log(a.selected))},gridComplete:function(){$("table[id='grid'] tr[id='null'] input").attr("style","display:none"),$("table[id='grid'] tr[id='0'] input").attr("style","display:none"),window.top.home.loading("hide")}},colNames:[],colModel:[],tableHeaders:[],SEListVisible:!1,allShow:!1,dataList:[]}},methods:{openSEListModal:function(){this.SEListVisible=!0},cancelSEListModal:function(e){this.SEListVisible=!1},openCardModal:function(){this.cardVisible=!0},cancelModal:function(e){this.cardVisible=!1},showSubjectVisable:function(e){this.subjectVisable=!0,this.subjectTpye=e},subjectClose:function(){this.subjectVisable=!1},subjectData:function(e){console.log(e,"====treeNode")},assetTypeTreeClickCallBack:function(e,t,a){this.formData.basicInformation.for7=a.name,this.showAssetType=!1},useStateTreeClickCallBack:function(e,t,a){this.formData.basicInformation.for4=a.name,this.showUseState=!1},changeMethodTreeClickCallBack:function(e,t,a){this.formData.basicInformation.for5=a.name,this.showChangeMethod=!1},supplierTreeClickCallBack:function(e,t,a){this.formData.basicInformation.for16=a.name,this.showSupplier=!1},treeClickCallBack:function(e,t,a){console.log(a,"====treeClickCallBack")},treeBeforeClick:function(e,t,a){return!t.isParent},showDepartmentTree:function(e,t){switch(console.log(e,this.showDepartment,"this.showdepreciation"),t){case"showAssetType":if(!0===this.showAssetType)return void(this.showAssetType=!1);this.showAssetType=e;break;case"showUseState":if(!0===this.showUseState)return void(this.showUseState=!1);this.showUseState=e;break;case"showChangeMethod":if(!0===this.showChangeMethod)return void(this.showChangeMethod=!1);this.showChangeMethod=e;break;case"showSupplier":if(!0===this.showSupplier)return void(this.showSupplier=!1);this.showSupplier=e}},showdepreciationTree:function(e){!0!==this.showdepreciation?this.showdepreciation=e:this.showdepreciation=!1},_nullData:function(e){return e||""},formartMoney:function(e){return null==e||0==e?"":accounting.formatNumber(e,2,",")},saveData:function(){var e=Date.parse(this.filterBody.timeStart)/1e3;Date.parse(this.filterBody.timeEnd)/1e3<e?this.$Message.error("开始日期不能大于结束日期"):this.initCashCheckTree()},cancelData:function(){},refreshData:function(){this.init()},init:function(){var t=this;$.ajax({type:"post",data:null,success:function(e){"100100"==e.code&&(t.currencyList=e.data.currencyList,t.subjectList=e.data.subjectList,t.organizationList=e.data.org,t.periodDate=e.data.periodDate,t.filterBody.sobId=e.data.org[0].value,t.filterBody.timeStart=e.data.periodDate.startDate,t.filterBody.timeEnd=e.data.periodDate.endDate,t.showDataForm.timeStart=new Date(e.data.periodDate.startDate).format("yyyy-MM-dd"),t.showDataForm.timeEnd=new Date(e.data.periodDate.endDate).format("yyyy-MM-dd"),t.formInitData.id="",t.formInitData.sobId=e.data.org[0].value,t.formInitData.datetime=e.data.periodDate.endDate,t.formInitData.currencyId=e.data.currencyList[0].id,t.formInitData.subjectName=e.data.subjectList[0].accountName,t.formInitData.subjectCode=e.data.subjectList[0].accountCode,t.formInitData.subjectId=e.data.subjectList[0].accountId,t.formInitData.remark="",t.formInitData.totalAmount="",t.initCashCheckTree())}}),t.setTableHeader()},onTreeChange:function(e){this.nodes="ltData"==e?this.nodesList.dateTree:this.nodesList.subjectTree},initCashCheckTree:function(){var t=this;t.filterBody.timeStart=new Date(t.filterBody.timeStart).format("yyyy-MM-dd"),t.filterBody.timeEnd=new Date(t.filterBody.timeEnd).format("yyyy-MM-dd"),$.ajax({type:"post",data:t.filterBody,success:function(e){console.log(e),"100100"==e.code&&(t.nodesList=e.data,"ltData"==t.leftType?t.nodes=e.data.dateTree:t.nodes=e.data.subjectTree)}})},setTableHeader:function(){this.colNames=["id","日期","当日序号","凭证字号","凭证期间","凭证审核","过账标志","摘要","对方科目","原币","本位币","原币","本位币","原币","本位币","经手人","制单人","数据来源","备注","voucherId","sobId"],this.colModel=[{name:"id",width:30,hidden:!0},{name:"datetimeStr",width:100},{name:"serialNumber",width:100,formatter:function(e,t,a){return null!=e&&0!=e?e:""}},{name:"voucherGroupData",width:100},{name:"voucherPeriodData",width:100},{name:"audited",width:100,align:"center",formatter:function(e,t,a){return 1==e?'<i class="ivu-icon ivu-icon-checkmark-round"></i>':""}},{name:"posted",width:100,align:"center",formatter:function(e,t,a){return 1==e?'<i class="ivu-icon ivu-icon-checkmark-round"></i>':""}},{name:"summary",width:120},{name:"relateSubjectName",width:150,formatter:function(e,t,a){return null!=e&&0!=e?e:""}},{name:"debitAmountFor",width:100,align:"right",formatter:function(e,t,a){return null==e||0==e?"":accounting.formatNumber(e,2,",")}},{name:"debitAmount",width:100,align:"right",formatter:function(e,t,a){return null==e||0==e?"":accounting.formatNumber(e,2,",")}},{name:"creditAmountFor",width:100,align:"right",formatter:function(e,t,a){return null==e||0==e?"":accounting.formatNumber(e,2,",")}},{name:"creditAmount",width:100,align:"right",formatter:function(e,t,a){return null==e||0==e?"":accounting.formatNumber(e,2,",")}},{name:"balanceFor",width:100,align:"right",formatter:function(e,t,a){return null==e||0==e?"":accounting.formatNumber(e,2,",")}},{name:"balance",width:100,align:"right",formatter:function(e,t,a){return null==e||0==e?"":accounting.formatNumber(e,2,",")}},{name:"handleName",width:90},{name:"createName",width:90},{name:"dataSource",width:150,formatter:function(e,t,a){return 1==e?"总账引入":2==e?"手工录入":3==e?"Excel导入":""}},{name:"remark",width:90},{name:"voucherId",hidden:!0},{name:"sobId",hidden:!0}],this.tableHeaders=[{startColumnName:"debitAmountFor",numberOfColumns:2,titleText:"借方金额"},{startColumnName:"creditAmountFor",numberOfColumns:2,titleText:"贷方金额"},{startColumnName:"balanceFor",numberOfColumns:2,titleText:"余额"}],this.jqGridInit(this.colNames,this.colModel,this.tableHeaders)},jqGridInit:function(e,t,i){var o=this,a=Object.assign({},this.base_config,{colNames:e,colModel:t,postData:JSON.stringify(o.openData),loadComplete:function(e){console.log(e),null!=e&&null!=e.data&&null!=e.data.resultVo&&(o.dataList=e.data.resultVo),jQuery("#grid").jqGrid("destroyGroupHeader"),jQuery("#grid").jqGrid("setGroupHeaders",{useColSpanStyle:!0,groupHeaders:i});var t=jQuery("#grid").jqGrid("getRowData"),a=$("#grid").jqGrid("getDataIDs");t.push($("#grid").jqGrid("getRowData",a[a.length-1])),o.tableList=t,console.log("tableList",o.tableList)}});jQuery("#grid").jqGrid(a)},handlerId:function(e,t,a){var i=this;if("object"===(void 0===e?"undefined":_typeof(e))&&t&&(i.selected=e.filter(function(e){if("null"!=e&&"0"!=e&&""!=e)return e})),"object"!==(void 0===e?"undefined":_typeof(e))||t||(i.selected=[]),"string"==typeof e)if(t){"null"!=e&&"0"!=e&&""!=e&&!(-1<i.selected.indexOf(e.toString()))&&this.selected.push(e.toString())}else{var o=i.selected.indexOf(e.toString());-1<o&&i.selected.splice(o,1)}},actionBtnMth:function(e){var t=this,a={show:!1,id:(new Date).getTime(),t1:t.dataList.length+1,t2:(new Date).format("yyyy-MM-dd"),t3:(new Date).getTime(),t4:"",t5:"",t6:"",t7:"",t8:""};if("addNew"===e)t.dataList.push(a);else{var i=t.dataList.filter(function(e){return e.show});if(!i.length)return void t.$Message.info({content:"请选择一条数据",duration:3});var o=Object.assign({},i[i.length-1]);if("import"===e){if(1<i.length)return void t.$Message.info({content:"只能选择一条",duration:3});var r=0;t.dataList.forEach(function(e,t){e.id===o.id&&(r=t)}),t.dataList.splice(r,0,a)}else if("copye"===e){if(1<i.length)return void t.$Message.info({content:"只能选择一条",duration:3});r=0;t.dataList.forEach(function(e,t){e.id===o.id&&(r=t)}),o.id=(new Date).getTime(),o.show=!1,t.dataList.splice(r+1,0,o)}else"delete"===e&&(t.dataList=t.dataList.filter(function(e){return!e.show}))}},clickTr:function(e,t){},click_all:function(){var t=this;this.allShow=!this.allShow,this.dataList.forEach(function(e){e.show=t.allShow})},change_tr:function(e){e.show=!e.show;var t=0;this.dataList.forEach(function(e){e.show&&t++}),t===this.dataList.length?this.allShow=!0:this.allShow=!1},getOrgList:function(){var t=this;$.ajax({url:contextPath+"/bankdepositstatement/getognlist",type:"post",success:function(e){t.organizationList=e.data,t.$nextTick(function(){t.card.sobId=e.data[0].id,console.log(t.card.sobId)})}})}},mounted:function(){console.log("数据字典："),console.log(getCodeList("fixedAssets_depreciation")),this.getOrgList(),this.init(),this.openTime=window.parent.params&&window.parent.params.openTime}});